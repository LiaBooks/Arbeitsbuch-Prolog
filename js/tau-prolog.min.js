var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,y,z){a!=Array.prototype&&a!=Object.prototype&&(a[y]=z.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,y,z,k){if(y){z=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var l=a[k];l in z||(z[l]={});z=z[l]}a=a[a.length-1];k=z[a];y=y(k);y!=k&&null!=y&&$jscomp.defineProperty(z,a,{configurable:!0,writable:!0,value:y})}};$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6","es3");$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");
$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6","es3");$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(y){return $jscomp.SYMBOL_PREFIX+(y||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var y=0;return $jscomp.iteratorPrototype(function(){return y<a.length?{done:!1,value:a[y++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,y){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var z=0,k={next:function(){if(z<a.length){var l=z++;return{value:y(l,a[l]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(){function a(e){var a=[],b=!1;e.replace(P,function(e,c,d,g,f,k,l,m,n,q,r,u,v,x,A,y,z){switch(!0){case void 0!=n:return a.push(parseInt(n,16)),"";case void 0!=q:return a.push(parseInt(q,8)),"";case void 0!=r:case void 0!=u:case void 0!=v:case void 0!=x:case void 0!=A:return a.push(e.substr(1).charCodeAt(0)),"";case void 0!=z:return a.push(z.charCodeAt(0)),"";case void 0!=y:b=!0;default:return a.push(Q[e]),""}});return b?null:a}function y(e,a){var b="";if(2>e.length)return e;for(var c=0;c<
e.length;c++){var d=e.charAt(c),h=e.charAt(c+1);if(d===a&&h===a)c++,b+=a;else if("\\"===d)if(-1!=="abfnrtv'\"\\a\b\f\n\r\t\x0B".split("").indexOf(h))switch(c+=1,h){case "a":b+="a";break;case "b":b+="\b";break;case "f":b+="\f";break;case "n":b+="\n";break;case "r":b+="\r";break;case "t":b+="\t";break;case "v":b+="\v";break;case "'":b+="'";break;case '"':b+='"';break;case "\\":b+="\\"}else return null;else b+=d}return b}function z(e){var c=e.substr(2);switch(e.substr(0,2).toLowerCase()){case "0x":return parseInt(c,
16);case "0b":return parseInt(c,2);case "0o":return parseInt(c,8);case "0'":return a(c)[0];default:return parseFloat(e)}}function k(e,a){return"on"===e.getFlag("char_conversion").id?a.replace(/./g,function(a){return e.getCharConversion(a)}):a}function l(e){this.thread=e;this.text="";this.tokens=[]}function f(e,a,b,t,w){if(!a[b])return{type:0,value:d.error.syntax(a[b-1],"expression expected",!0)};if("0"==t){var c=a[b];switch(c.name){case "number":return{type:1,len:b+1,value:new d.type.Num(c.value,
c.float)};case "variable":return{type:1,len:b+1,value:new d.type.Var(c.value)};case "string":switch(e.getFlag("double_quotes").id){case "atom":var k=new g(c.value,[]);break;case "codes":k=new g("[]",[]);for(e=c.value.length-1;0<=e;e--)k=new g(".",[new d.type.Num(c.value[e].charCodeAt(),!1),k]);break;case "chars":for(k=new g("[]",[]),e=c.value.length-1;0<=e;e--)k=new g(".",[new d.type.Term(String.fromCharCode(c.value[e]),[]),k])}return{type:1,len:b+1,value:k};case "l_paren":var p=f(e,a,b+1,e.__get_max_priority(),
!0);return 1!==p.type?p:a[p.len]&&"r_paren"===a[p.len].name?(p.len++,p):{type:0,derived:!0,value:d.error.syntax(a[p.len]?a[p.len]:a[p.len-1],") or operator expected",!a[p.len])};case "l_bracket":return p=f(e,a,b+1,e.__get_max_priority(),!0),1!==p.type?p:a[p.len]&&"r_bracket"===a[p.len].name?(p.len++,p.value=new g("{}",[p.value]),p):{type:0,derived:!0,value:d.error.syntax(a[p.len]?a[p.len]:a[p.len-1],"} or operator expected",!a[p.len])}}c=n(e,a,b,w);if(1===c.type||c.derived)return c;c=m(e,a,b);return 1===
c.type||c.derived?c:{type:0,derived:!1,value:d.error.syntax(a[b],"unexpected token")}}e.__get_max_priority();k=e.__get_next_priority(t);var l=b;if("atom"===a[b].name&&a[b+1]&&(a[b].space||"l_paren"!==a[b+1].name)){c=a[b++];var q=e.__lookup_operator_classes(t,c.value);if("-"===c.value&&(p=a[b])&&"number"==p.name)return{value:new d.type.Num("-"===c.value?-p.value:p.value,p.float),len:++b,type:1};if(q&&-1<q.indexOf("fy")){if(p=f(e,a,b,t,w),0!==p.type)return{value:new d.type.Term(c.value,[p.value]),len:p.len,
type:1}}else if(q&&-1<q.indexOf("fx")&&(p=f(e,a,b,k,w),0!==p.type))return{value:new d.type.Term(c.value,[p.value]),len:p.len,type:1}}p=f(e,a,l,k,w);if(1===p.type)if(b=p.len,c=a[b],a[b]&&"atom"==a[b].name&&e.__lookup_operator_classes(t,c.value)){q=e.__lookup_operator_classes(t,c.value);if(-1<q.indexOf("xf"))return{value:new d.type.Term(c.value,[p.value]),len:++p.len,type:1};if(-1<q.indexOf("xfx")){l=f(e,a,b+1,k,w);if(1===l.type)return{value:new d.type.Term(c.value,[p.value,l.value]),len:l.len,type:1};
l.derived=!0;return l}if(-1<q.indexOf("xfy")){l=f(e,a,b+1,t,w);if(1===l.type)return{value:new d.type.Term(c.value,[p.value,l.value]),len:l.len,type:1};l.derived=!0;return l}if(0!=p.type)for(;;)if(b=p.len,(c=a[b])&&"atom"==c.name&&e.__lookup_operator_classes(t,c.value))if(q=e.__lookup_operator_classes(t,c.value),-1<q.indexOf("yf"))p={value:new d.type.Term(c.value,[p.value]),len:++b,type:1};else if(-1<q.indexOf("yfx")){l=f(e,a,++b,k,w);if(0==l.type)return l.derived=!0,l;b=l.len;p={value:new d.type.Term(c.value,
[p.value,l.value]),len:b,type:1}}else break;else break}else d.error.syntax(a[p.len-1],"operator expected");return p}function n(e,a,b,t){if(!a[b]||"atom"===a[b].name&&"."===a[b].raw&&!t&&(a[b].space||!a[b+1]||"l_paren"!==a[b+1].name))return{type:0,derived:!1,value:d.error.syntax(a[b-1],"unfounded token")};t=a[b];var c=[];if("atom"===a[b].name&&","!==a[b].raw){b++;if(a[b-1].space)return{type:1,len:b,value:new d.type.Term(t.value,c)};if(a[b]&&"l_paren"===a[b].name){if(a[b+1]&&"r_paren"===a[b+1].name)return{type:0,
derived:!0,value:d.error.syntax(a[b+1],"argument expected")};var h=f(e,a,++b,"999",!0);if(0===h.type)return h.derived?h:{type:0,derived:!0,value:d.error.syntax(a[b]?a[b]:a[b-1],"argument expected",!a[b])};c.push(h.value);for(b=h.len;a[b]&&"atom"===a[b].name&&","===a[b].value;){h=f(e,a,b+1,"999",!0);if(0===h.type)return h.derived?h:{type:0,derived:!0,value:d.error.syntax(a[b+1]?a[b+1]:a[b],"argument expected",!a[b+1])};c.push(h.value);b=h.len}if(a[b]&&"r_paren"===a[b].name)b++;else return{type:0,derived:!0,
value:d.error.syntax(a[b]?a[b]:a[b-1],", or ) expected",!a[b])}}return{type:1,len:b,value:new d.type.Term(t.value,c)}}return{type:0,derived:!1,value:d.error.syntax(a[b],"term expected")}}function m(e,a,b){if(!a[b])return{type:0,derived:!1,value:d.error.syntax(a[b-1],"[ expected")};if(a[b]&&"l_brace"===a[b].name){var c=f(e,a,++b,"999",!0),w=[c.value],h=void 0;if(0===c.type)return a[b]&&"r_brace"===a[b].name?{type:1,len:b+1,value:new d.type.Term("[]",[])}:{type:0,derived:!0,value:d.error.syntax(a[b],
"] expected")};for(b=c.len;a[b]&&"atom"===a[b].name&&","===a[b].value;){c=f(e,a,b+1,"999",!0);if(0===c.type)return c.derived?c:{type:0,derived:!0,value:d.error.syntax(a[b+1]?a[b+1]:a[b],"argument expected",!a[b+1])};w.push(c.value);b=c.len}var g=!1;if(a[b]&&"bar"===a[b].name){g=!0;c=f(e,a,b+1,"999",!0);if(0===c.type)return c.derived?c:{type:0,derived:!0,value:d.error.syntax(a[b+1]?a[b+1]:a[b],"argument expected",!a[b+1])};h=c.value;b=c.len}return a[b]&&"r_brace"===a[b].name?{type:1,len:b+1,value:L(w,
h)}:{type:0,derived:!0,value:d.error.syntax(a[b]?a[b]:a[b-1],g?"] expected":", or | or ] expected",!a[b])}}return{type:0,derived:!1,value:d.error.syntax(a[b],"list expected")}}function r(e,a,b){var c=f(e,a,b,e.__get_max_priority(),!1);return 0!=c.type?(b=c.len,a[b]&&"atom"===a[b].name&&"."===a[b].raw?(b++,d.type.is_term(c.value)?":-/2"==c.value.indicator?{value:new d.type.Rule(c.value.args[0],x(c.value.args[1])),len:b,type:1}:"--\x3e/2"==c.value.indicator?(a=new d.type.Rule(c.value.args[0],c.value.args[1]),
a=a.rename(e),c=e.next_free_variable(),e=u(a.body,c,e),e.error?e=e.value:(a.body=e.value,a.head.args=a.head.args.concat([c,e.variable]),a.head=new g(a.head.id,a.head.args),e=a),e.body=x(e.body),{value:e,len:b,type:d.type.is_rule(e)?1:0}):{value:new d.type.Rule(c.value,null),len:b,type:1}:{type:0,value:d.error.syntax(a[b],"callable expected")}):{type:0,value:d.error.syntax(a[b]?a[b]:a[b-1],". or operator expected")}):c}function u(e,a,b){if(d.type.is_term(e)&&"!/0"===e.indicator)return{value:e,variable:a,
error:!1};if(d.type.is_term(e)&&",/2"===e.indicator){a=u(e.args[0],a,b);if(a.error)return a;e=u(e.args[1],a.variable,b);return e.error?e:{value:new g(",",[a.value,e.value]),variable:e.variable,error:!1}}if(d.type.is_term(e)&&"{}/1"===e.indicator)return{value:e.args[0],variable:a,error:!1};if(d.type.is_empty_list(e))return{value:new g("true",[]),variable:a,error:!1};if(d.type.is_list(e)){b=b.next_free_variable();for(var c=e,w;"./2"==c.indicator;)w=c,c=c.args[1];return d.type.is_variable(c)?{value:d.error.instantiation("DCG"),
variable:a,error:!0}:d.type.is_empty_list(c)?(w.args[1]=b,{value:new g("=",[a,e]),variable:b,error:!1}):{value:d.error.type("list",e,"DCG"),variable:a,error:!0}}return d.type.is_callable(e)?(b=b.next_free_variable(),e.args=e.args.concat([a,b]),e=new g(e.id,e.args),{value:e,variable:b,error:!1}):{value:d.error.type("callable",e,"DCG"),variable:a,error:!0}}function x(e){return d.type.is_variable(e)?new g("call",[e]):d.type.is_term(e)&&-1!==[",/2",";/2","->/2"].indexOf(e.indicator)?new g(e.id,[x(e.args[0]),
x(e.args[1])]):e}function L(e,a){a=a?a:new d.type.Term("[]",[]);for(var b=e.length-1;0<=b;b--)a=new d.type.Term(".",[e[b],a]);return a}function R(e){for(var a={},b=[],d=0;d<e.length;d++)e[d]in a||(b.push(e[d]),a[e[d]]=!0);return b}function H(e){return function(a,b,t){var c=t.args[0];t=t.args.slice(1,e);d.type.is_variable(c)?a.throwError(d.error.instantiation(a.level)):d.type.is_callable(c)?(c=new g(c.id,c.args.concat(t)),a.prepend([new q(b.goal.replace(c),b.substitution,b)])):a.throwError(d.error.type("callable",
c,a.level))}}function I(e){for(var a=e.length-1;0<=a;a--)if("/"===e.charAt(a))return new g("/",[new g(e.substring(0,a)),new v(parseInt(e.substring(a+1)),!1)])}function A(a){this.id=a}function v(a,c){this.value=(this.is_float=void 0!==c?c:parseInt(a)!==a)?a:parseInt(a)}function g(a,c,b){this.ref=b||++N;this.id=a;this.args=c||[];this.indicator=a+"/"+this.args.length}function B(a){this.links=a=a||{}}function q(a,c,b){c=c||new B;this.goal=a;this.substitution=c;this.parent=b||null}function F(a,c){this.head=
a;this.body=c}function G(a){this.fn=a}function C(a){a=void 0===a||0>=a?1E3:a;this.rules={};this.rename=0;this.modules=[];this.thread=new D(this);this.total_threads=1;this.renamed_variables={};this.public_predicates={};this.limit=a;this.flag={bounded:d.flag.bounded.value,max_integer:d.flag.max_integer.value,min_integer:d.flag.min_integer.value,integer_rounding_function:d.flag.integer_rounding_function.value,char_conversion:d.flag.char_conversion.value,debug:d.flag.debug.value,max_arity:d.flag.max_arity.value,
unknown:d.flag.unknown.value,double_quotes:d.flag.double_quotes.value,dialect:d.flag.dialect.value,version_data:d.flag.version_data.value,nodejs:d.flag.nodejs.value};this.warnings=[];this.__loaded_modules=[];this.__char_conversion={};this.__operators={1200:{":-":["fx","xfx"],"--\x3e":["xfx"],"?-":["fx"]},1100:{";":["xfy"]},1050:{"->":["xfy"]},1E3:{",":["xfy"]},900:{"\\+":["fy"]},700:{"=":["xfx"],"\\=":["xfx"],"==":["xfx"],"\\==":["xfx"],"@<":["xfx"],"@=<":["xfx"],"@>":["xfx"],"@>=":["xfx"],"=..":["xfx"],
is:["xfx"],"=:=":["xfx"],"=\\=":["xfx"],"<":["xfx"],"=<":["xfx"],">":["xfx"],">=":["xfx"]},600:{":":["xfy"]},500:{"+":["yfx"],"-":["yfx"],"/\\":["yfx"],"\\/":["yfx"]},400:{"*":["yfx"],"/":["yfx"],"//":["yfx"],rem:["yfx"],mod:["yfx"],"<<":["yfx"],">>":["yfx"]},200:{"**":["xfx"],"^":["xfy"],"-":["fy"],"+":["fy"],"\\":["fy"]}}}function D(a){this.epoch=Date.now();this.session=a;this.session.total_threads++;this.cpu_time_last=this.cpu_time=this.total_steps=0;this.points=[];this.level="top_level/0";this.__calls=
[];this.current_limit=this.session.limit}function O(a,c,b){this.id=a;this.rules=c;this.exports=b;d.module[a]=this}var J={major:0,minor:2,patch:37,status:"beta"};var E=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var e=a.length,d=0;d<e;d++)if(c===a[d])return d;return-1};var S=function(a,c){if(0!==a.length){for(var e=a[0],d=a.length,w=1;w<d;w++)e=c(e,a[w]);return e}};var K=Array.prototype.map?function(a,c){return a.map(c)}:function(a,c){for(var e=[],d=a.length,w=0;w<
d;w++)e.push(c(a[w]));return e};var P=/(\\a)|(\\b)|(\\f)|(\\n)|(\\r)|(\\t)|(\\v)|\\x([0-9a-fA-F]+)\\|\\([0-7]+)\\|(\\\\)|(\\')|('')|(\\")|(\\`)|(\\.)|(.)/g,Q={"\\a":7,"\\b":8,"\\f":12,"\\n":10,"\\r":13,"\\t":9,"\\v":11},M={whitespace:/^\s*(?:(?:%.*)|(?:\/\*(?:\n|\r|.)*?\*\/)|(?:\s+))\s*/,variable:/^(?:[A-Z_][a-zA-Z0-9_]*)/,atom:/^(!|,|;|[a-z][0-9a-zA-Z_]*|[#\$&\*\+\-\.\/:<=>\?@\^~\\]+|'(?:[^']*?(?:\\(?:x?\d+)?\\)*(?:'')*(?:\\')*)*')/,number:/^(?:0o[0-7]+|0x[0-9a-fA-F]+|0b[01]+|0'(?:''|\\[abfnrtv\\'"`]|\\x?\d+\\|[^\\])|\d+(?:\.\d+(?:[eE][+-]?\d+)?)?)/,
string:/^(?:"([^"]|""|\\")*"|`([^`]|``|\\`)*`)/,l_brace:/^(?:\[)/,r_brace:/^(?:\])/,l_bracket:/^(?:\{)/,r_bracket:/^(?:\})/,bar:/^(?:\|)/,l_paren:/^(?:\()/,r_paren:/^(?:\))/};l.prototype.set_last_tokens=function(a){return this.tokens=a};l.prototype.new_text=function(a){this.text=a;this.tokens=[]};l.prototype.get_tokens=function(a){var e=0,b=0,d=0,w=[];if(a){var h=this.tokens[a-1];e=h.len;a=k(this.thread,this.text.substr(h.len));b=h.line;d=h.start}else a=this.text;if(/^\s*$/.test(a))return null;for(;""!==
a;)if(h=[],null!==/^\n/.exec(a))b++,d=0,e++,a=a.replace(/\n/,"");else{for(var g in M)if(M.hasOwnProperty(g)){var f=M[g].exec(a);f&&h.push({value:f[0],name:g,matches:f})}if(!h.length)return this.set_last_tokens([{value:a,matches:[],name:"lexical",line:b,start:d}]);h=S(h,function(a,e){return a.value.length>=e.value.length?a:e});h.start=d;h.line=b;a=a.replace(h.value,"");d+=h.value.length;e+=h.value.length;switch(h.name){case "atom":h.raw=h.value;"'"==h.value.charAt(0)&&(h.value=y(h.value.substr(1,h.value.length-
2),"'"),null===h.value&&(h.name="lexical",h.value="unknown escape sequence"));break;case "number":h.float=null!==h.value.match(/[.eE]/)&&"0'."!==h.value;h.value=z(h.value);h.blank=last_is_blank;break;case "string":f=h.value.charAt(0);h.value=y(h.value.substr(1,h.value.length-2),f);null===h.value&&(h.name="lexical",h.value="unknown escape sequence");break;case "whitespace":if(h=w[w.length-1])h.space=!0;last_is_blank=!0;continue;case "r_bracket":0<w.length&&"l_bracket"===w[w.length-1].name&&(h=w.pop(),
h.name="atom",h.value="{}",h.raw="{}",h.space=!1);break;case "r_brace":0<w.length&&"l_brace"===w[w.length-1].name&&(h=w.pop(),h.name="atom",h.value="[]",h.raw="[]",h.space=!1)}h.len=e;w.push(h);last_is_blank=!1}e=this.set_last_tokens(w);return 0===e.length?null:e};var N=0;O.prototype.exports_predicate=function(a){return-1!==this.exports.indexOf(a)};A.prototype.toString=function(){return this.id};v.prototype.toString=function(){return this.is_float&&-1===E(this.value.toString(),".")?this.value+".0":
this.value.toString()};g.prototype.toString=function(){switch(this.indicator){case "[]/0":case "{}/0":case "!/0":return this.id;case "{}/1":return"{"+this.args[0].toString()+"}";case "./2":for(var a="["+this.args[0].toString(),c=this.args[1];"./2"===c.indicator;)a+=", "+c.args[0].toString(),c=c.args[1];"[]/0"!==c.indicator&&(a+="|"+c.toString());return a+"]";case ",/2":return"("+this.args[0].toString()+", "+this.args[1].toString()+")";default:a=this.id;if(!/^(!|,|;|[a-z][0-9a-zA-Z_]*)$/.test(a)&&
"{}"!==a&&"[]"!==a){c="";for(var b=0;b<a.length;b++)switch(a.charAt(b)){case "'":c+="\\'";break;case "\\":c+="\\\\";break;case "\b":c+="\\b";break;case "\f":c+="\\f";break;case "\n":c+="\\n";break;case "\r":c+="\\r";break;case "\t":c+="\\t";break;case "\v":c+="\\v";break;default:c+=a.charAt(b)}a="'"+c+"'"}return a+(this.args.length?"("+this.args.join(", ")+")":"")}};B.prototype.toString=function(){var a="{",c;for(c in this.links)this.links.hasOwnProperty(c)&&("{"!=a&&(a+=", "),a+=c+"/"+this.links[c].toString());
return a+"}"};q.prototype.toString=function(){return null===this.goal?"<"+this.substitution.toString()+">":"<"+this.goal.toString()+", "+this.substitution.toString()+">"};F.prototype.toString=function(){return this.body?this.head+" :- "+this.body+".":this.head+"."};G.prototype.toString=function(){return this.fn.toString()};A.prototype.clone=function(){return new A(this.id)};v.prototype.clone=function(){return new v(this.value,this.is_float)};g.prototype.clone=function(){return new g(this.id,K(this.args,
function(a){return a.clone()}))};B.prototype.clone=function(){var a={},c;for(c in this.links)this.links.hasOwnProperty(c)&&(a[c]=this.links[c].clone());return new B(a)};q.prototype.clone=function(){return new q(this.goal.clone(),this.substitution.clone(),this.parent)};F.prototype.clone=function(){return new F(this.head.clone(),null!==this.body?this.body.clone():null)};G.prototype.clone=function(){return new G(this.fn)};A.prototype.equals=function(a){return d.type.is_variable(a)&&this.id===a.id};v.prototype.equals=
function(a){return d.type.is_number(a)&&this.value===a.value&&this.is_float===a.is_float};g.prototype.equals=function(a){if(!d.type.is_term(a)||this.indicator!==a.indicator)return!1;for(var e=0;e<this.args.length;e++)if(!this.args[e].equals(a.args[e]))return!1;return!0};G.prototype.equals=function(a){return d.type.is_function(a)&&this.fn===a.fn};B.prototype.equals=function(a){var e;if(!d.type.is_substitution(a))return!1;for(e in this.links)if(this.links.hasOwnProperty(e)&&(!a.links[e]||!this.links[e].equals(a.links[e])))return!1;
for(e in a.links)if(a.links.hasOwnProperty(e)&&!this.links[e])return!1;return!0};q.prototype.equals=function(a){return d.type.is_state(a)&&this.goal.equals(a.goal)&&this.substitution.equals(a.substitution)&&this.parent==a.parent};F.prototype.equals=function(a){return d.type.is_rule(a)&&this.head.equals(a.head)&&(null===this.body&&null===a.body||null!==this.body&&this.body.equals(a.body))};A.prototype.rename=function(a){return a.get_free_variable(this)};v.prototype.rename=function(a){return this};
g.prototype.rename=function(a){return new g(this.id,K(this.args,function(e){return e.rename(a)}))};F.prototype.rename=function(a){return new F(this.head.rename(a),null!==this.body?this.body.rename(a):null)};G.prototype.rename=function(a){return this};A.prototype.variables=function(){return[this.id]};v.prototype.variables=function(){return[]};g.prototype.variables=function(){return[].concat.apply([],K(this.args,function(a){return a.variables()}))};F.prototype.variables=function(){return null===this.body?
this.head.variables():this.head.variables().concat(this.body.variables())};G.prototype.variables=function(){return[]};A.prototype.apply=function(a){return a.lookup(this.id)?a.lookup(this.id):this};v.prototype.apply=function(a){return this};g.prototype.apply=function(a){return new g(this.id,K(this.args,function(e){return e.apply(a)}),this.ref)};F.prototype.apply=function(a){return new F(this.head.apply(a),null!==this.body?this.body.apply(a):null)};B.prototype.apply=function(a){var e,b={};for(e in this.links)this.links.hasOwnProperty(e)&&
(b[e]=this.links[e].apply(a));return new B(b)};G.prototype.apply=function(a){return this};A.prototype.unify=function(a,c){if(c&&-1!==E(a.variables(),this.id)&&!d.type.is_variable(a))return null;c={};c[this.id]=a;return new q(a,new B(c))};v.prototype.unify=function(a,c){return d.type.is_number(a)&&this.value==a.value&&this.is_float==a.is_float?new q(a,new B):null};g.prototype.unify=function(a,c){if(d.type.is_term(a)&&this.indicator==a.indicator){for(var e=new B,t=0;t<this.args.length;t++){var g=d.unify(this.args[t].apply(e),
a.args[t].apply(e),c);if(null===g)return null;for(var h in g.substitution.links)e.links[h]=g.substitution.links[h];e=e.apply(g.substitution)}return new q(this.apply(e),e)}return null};G.prototype.unify=function(a,c){return d.type.is_function(a)&&this.fn===a.fn?new q(a,new B):null};g.prototype.select=function(){return",/2"===this.indicator?this.args[0].select():this};G.prototype.select=function(){return this};g.prototype.replace=function(a){return",/2"===this.indicator?",/2"===this.args[0].indicator?
new g(",",[this.args[0].replace(a),this.args[1]]):null===a?this.args[1]:new g(",",[a,this.args[1]]):a};G.prototype.replace=function(a){return a};g.prototype.search=function(a){if(d.type.is_term(a)&&void 0!==a.ref&&this.ref===a.ref)return!0;for(var e=0;e<this.args.length;e++)if((d.type.is_term(this.args[e])||d.type.is_function(this.args[e]))&&this.args[e].search(a))return!0;return!1};G.prototype.search=function(a){return d.type.is_function(a)&&this.fn===a.fn};C.prototype.getCharConversion=function(a){return this.__char_conversion[a]||
a};D.prototype.getCharConversion=function(a){return this.session.getCharConversion(a)};C.prototype.parse=function(a){return this.thread.parse(a)};D.prototype.parse=function(a){var e=new l(this);e.new_text(a);a=e.get_tokens();if(null===a)return!1;e=f(this,a,0,this.__get_max_priority(),!1);return e.len!==a.length?!1:{value:e.value,expr:e,tokens:a}};C.prototype.getFlag=function(a){return this.flag[a]};D.prototype.getFlag=function(a){return this.session.getFlag(a)};C.prototype.add_rule=function(a){this.rules[a.head.indicator]||
(this.rules[a.head.indicator]=[]);this.rules[a.head.indicator].push(a);this.public_predicates.hasOwnProperty(a.head.indicator)||(this.public_predicates[a.head.indicator]=!1);return!0};D.prototype.add_rule=function(a){return this.session.add_rule(a)};C.prototype.run_directive=function(a){this.thread.run_directive(a)};D.prototype.run_directive=function(a){return d.type.is_directive(a)?(d.directive[a.indicator](this,a),!0):!1};C.prototype.__get_max_priority=function(){return"1200"};D.prototype.__get_max_priority=
function(){return this.session.__get_max_priority()};C.prototype.__get_next_priority=function(a){var e=0;a=parseInt(a);for(var b in this.__operators)if(this.__operators.hasOwnProperty(b)){var d=parseInt(b);d>e&&d<a&&(e=d)}return e.toString()};D.prototype.__get_next_priority=function(a){return this.session.__get_next_priority(a)};C.prototype.__lookup_operator_classes=function(a,c){return this.__operators.hasOwnProperty(a)&&this.__operators[a][c]instanceof Array?this.__operators[a][c]||!1:!1};D.prototype.__lookup_operator_classes=
function(a,c){return this.session.__lookup_operator_classes(a,c)};C.prototype.throw_warning=function(a){this.thread.throw_warning(a)};D.prototype.throw_warning=function(a){this.warnings.push(a)};C.prototype.add_goal=function(a,c){this.thread.add_goal(a,c)};D.prototype.add_goal=function(a,c){!0===c&&(this.points=[]);c=a.variables();for(var e={},d=0;d<c.length;d++)e[c[d]]=new A(c[d]);this.points.push(new q(a,new B(e),null))};C.prototype.consult=function(a){return this.thread.consult(a)};D.prototype.consult=
function(a){if("string"===typeof a){var e=a.length;if(".pl"===a.substring(e-3,e)&&document.getElementById(a)){e=document.getElementById(a);var b=e.getAttribute("type");null!==b&&"text/prolog"===b.replace(/ /g,"").toLowerCase()&&(a=e.text)}}else if(a.nodeName)switch(a.nodeName.toLowerCase()){case "input":case "textarea":a=a.value;break;default:a=a.innerHTML}else return!1;a:{e=a;a=new l(this);a.new_text(e);e=0;do{e=a.get_tokens(e);if(null===e)break;e=r(this,e,0);if(0===e.type){a=new g("throw",[e.value]);
break a}else b=null===e.value.body&&":-/1"===e.value.head.indicator?this.run_directive(e.value.head.args[0]):this.add_rule(e.value);if(!b){a=b;break a}e=e.len}while(1);a=!0}return a};C.prototype.query=function(a){return this.thread.query(a)};D.prototype.query=function(a){this.points=[];a:{var e=new l(this);e.new_text(a);a=0;do{a=e.get_tokens(a);if(null===a)break;var b=f(this,a,0,this.__get_max_priority(),!1);if(0!==b.type){var t=b.len;tokens_pos=t;if(a[t]&&"atom"===a[t].name&&"."===a[t].raw)this.add_goal(x(b.value));
else{e=a[t];e=new g("throw",[d.error.syntax(e?e:a[t-1],". or operator expected",!e)]);break a}a=b.len+1}else{e=new g("throw",[b.value]);break a}}while(1);e=!0}return e};C.prototype.get_free_variable=function(a){return this.thread.get_free_variable(a)};D.prototype.get_free_variable=function(a){var e=[];if("_"===a.id||void 0===this.session.renamed_variables[a.id]){this.session.rename++;for(0<this.points.length&&(e=this.points[0].substitution.domain());-1!==E(e,d.format_variable(this.session.rename));)this.session.rename++;
if("_"===a.id)return new A(d.format_variable(this.session.rename));this.session.renamed_variables[a.id]=d.format_variable(this.session.rename)}return new A(this.session.renamed_variables[a.id])};C.prototype.next_free_variable=function(){return this.thread.next_free_variable()};D.prototype.next_free_variable=function(){this.session.rename++;var a=[];for(0<this.points.length&&(a=this.points[0].substitution.domain());-1!==E(a,d.format_variable(this.session.rename));)this.session.rename++;return new A(d.format_variable(this.session.rename))};
C.prototype.is_public_predicate=function(a){return!this.public_predicates.hasOwnProperty(a)||!0===this.public_predicates[a]};D.prototype.is_public_predicate=function(a){return this.session.is_public_predicate(a)};C.prototype.prepend=function(a){return this.thread.prepend(a)};D.prototype.prepend=function(a){this.points=a.concat(this.points)};C.prototype.success=function(a,c){return this.thread.success(a,c)};D.prototype.success=function(a,c){c="undefined"===typeof c?a:c;this.prepend([new q(a.goal.replace(null),
a.substitution,c)])};C.prototype.throwError=function(a){return this.thread.throwError(a)};D.prototype.throwError=function(a){this.prepend([new q(new g("throw",[a]),new B,null,null)])};C.prototype.stepRule=function(a,c){return this.thread.stepRule(a,c)};D.prototype.stepRule=function(a,c){c=c.indicator;if(null===a&&this.session.rules.hasOwnProperty(c))return this.session.rules[c];a=null===a?this.session.modules:[a];for(var e=0;e<a.length;e++){var t=d.module[a[e]];if(t.rules.hasOwnProperty(c)&&(t.rules.hasOwnProperty(this.level)||
t.exports_predicate(c)))return d.module[a[e]].rules[c]}return null};C.prototype.step=function(){return this.thread.step()};D.prototype.step=function(){if(0!==this.points.length){var a=!1,c=this.points.shift();if(d.type.is_term(c.goal)||d.type.is_function(c.goal)){var b=c.goal.select(),t=null,g=[];if(null!==b){this.total_steps++;for(var h=c;null!==h.parent&&h.parent.goal.search(b);)h=h.parent;this.level=null===h.parent?"top_level/0":h.parent.goal.select().indicator;d.type.is_term(b)&&":/2"===b.indicator&&
(t=b.args[0].id,b=b.args[1]);if(d.type.is_function(b))b.fn(this,c);else if(null===t&&d.type.is_builtin(b))this.__call_indicator=b.indicator,a=d.predicate[b.indicator](this,c,b);else if(t=this.stepRule(t,b),null===t)this.session.rules.hasOwnProperty(b.indicator)||("error"===this.getFlag("unknown").id?this.throwError(d.error.existence("procedure",b.indicator,this.level)):"warning"===this.getFlag("unknown").id&&this.throw_warning("unknown procedure "+b.indicator+" (from "+this.level+")"));else if(t instanceof
Function)a=t(this,c,b);else{for(var f in t)if(t.hasOwnProperty(f)){h=t[f];this.session.renamed_variables={};h=h.rename(this);var p=d.unify(b,h.head);null!==p&&(p.goal=c.goal.replace(h.body),null!==p.goal&&(p.goal=p.goal.apply(p.substitution)),p.substitution=c.substitution.apply(p.substitution),p.parent=c,g.push(p))}this.prepend(g)}}}else d.type.is_variable(c.goal)?this.throwError(d.error.instantiation(this.level)):this.throwError(d.error.type("callable",c.goal,this.level));return a}};C.prototype.answer=
function(a){return this.thread.answer(a)};D.prototype.answer=function(a){a=a||function(a){};this.__calls.push(a);1<this.__calls.length||this.again()};C.prototype.answers=function(a,c){return this.thread.answers(a,c)};D.prototype.answers=function(a,c){answers=c||1E3;var e=this;0>=c||this.answer(function(b){a(b);!1!==b&&e.answers(a,c-1)})};C.prototype.again=function(){return this.thread.again()};D.prototype.again=function(){for(var a,c=Date.now();0<this.__calls.length;){this.warnings=[];for(this.current_limit=
this.session.limit;0<this.current_limit&&0<this.points.length&&null!==this.points[0].goal&&!d.type.is_error(this.points[0].goal);)if(this.current_limit--,!0===this.step())return;this.cpu_time_last=Date.now()-c;this.cpu_time+=this.cpu_time_last;var b=this.__calls.shift();0>=this.current_limit?b(null):0===this.points.length?b(!1):(d.type.is_error(this.points[0].goal)?(a=this.points.shift().goal,this.points=[]):a=this.points.shift().substitution,b(a))}};A.prototype.interpret=function(a){return d.error.instantiation(a.level)};
v.prototype.interpret=function(a){return this};g.prototype.interpret=function(a){return d.type.is_unitary_list(this)?this.args[0].interpret(a):d.operate(a,this)};A.prototype.compare=function(a){return this.id<a.id?-1:this.id>a.id?1:0};v.prototype.compare=function(a){if(this.value===a.value&&this.is_float===a.is_float)return 0;if(this.value<a.value||this.value===a.value&&this.is_float&&!a.is_float)return-1;if(this.value>a.value)return 1};g.prototype.compare=function(a){if(this.args.length<a.args.length||
this.args.length===a.args.length&&this.id<a.id)return-1;if(this.args.length>a.args.length||this.args.length===a.args.length&&this.id>a.id)return 1;for(var e=0;e<this.args.length;e++){var b=d.compare(this.args[e],a.args[e]);if(0!==b)return b}return 0};B.prototype.lookup=function(a){return this.links[a]?this.links[a]:null};B.prototype.filter=function(a){var e={},b;for(b in this.links)if(this.links.hasOwnProperty(b)){var d=this.links[b];a(b,d)&&(e[b]=d)}return new B(e)};B.prototype.exclude=function(a){var e=
{},b;for(b in this.links)this.links.hasOwnProperty(b)&&-1===E(a,b)&&(e[b]=this.links[b]);return new B(e)};B.prototype.add=function(a,c){var e=new B;e.links[a]=c;return e};B.prototype.domain=function(a){a=!0===a?function(a){return a}:function(a){return new A(a)};var e=[],b;for(b in this.links)e.push(a(b));return e};A.prototype.compile=function(){return'new pl.type.Var("'+this.id.toString()+'")'};v.prototype.compile=function(){return"new pl.type.Num("+this.value.toString()+", "+this.is_float.toString()+
")"};g.prototype.compile=function(){return'new pl.type.Term("'+this.id.replace(/"/g,'\\"')+'", ['+K(this.args,function(a){return a.compile()})+"])"};F.prototype.compile=function(){return"new pl.type.Rule("+this.head.compile()+", "+(null===this.body?"null":this.body.compile())+")"};C.prototype.compile=function(){var a=[],c;for(c in this.rules)if(this.rules.hasOwnProperty(c)){var b=this.rules[c];var d=[];var g='"'+c+'": [';for(var h=0;h<b.length;h++)d.push(b[h].compile());g+=d.join();g+="]";a.push(g)}return"{"+
a.join()+"};"};A.prototype.toJavaScript=function(){};v.prototype.toJavaScript=function(){return this.value};g.prototype.toJavaScript=function(){if(0===this.args.length&&"[]/0"!==this.indicator)return this.id;if(d.type.is_list(this)){for(var a=[],c=this,b;"./2"===c.indicator;){b=c.args[0].toJavaScript();if(void 0===b)return;a.push(b);c=c.args[1]}if("[]/0"===c.indicator)return a}};var d={__env:"undefined"!==typeof module&&module.exports?global:window,module:{},version:J,parser:{tokenizer:l,expression:f},
utils:{str_indicator:I},statistics:{getCountTerms:function(){return N}},fromJavaScript:{test:{boolean:function(a){return!0===a||!1===a},number:function(a){return"number"===typeof a},string:function(a){return"string"===typeof a},list:function(a){return a instanceof Array},variable:function(a){return void 0===a},any:function(a){return!0}},conversion:{boolean:function(a){return new g(a?"true":"false",[])},number:function(a){return new v(a,0!==a%1)},string:function(a){return new g(a,[])},list:function(a){for(var e=
[],b,t=0;t<a.length;t++){b=d.fromJavaScript.apply(a[t]);if(void 0===b)return;e.push(b)}return L(e)},variable:function(a){return new A("_")},any:function(a){}},apply:function(a){for(var e in d.fromJavaScript.test)if("any"!==e&&d.fromJavaScript.test[e](a))return d.fromJavaScript.conversion[e](a);return d.fromJavaScript.conversion.any(a)}},type:{Var:A,Num:v,Term:g,Rule:F,State:q,Module:O,Thread:D,Session:C,Substitution:B,order:[A,v,g],compare:function(a,c){a=E(d.type.order,a.constructor);c=E(d.type.order,
c.constructor);return a<c?-1:a>c?1:0},is_function:function(a){return a instanceof G},is_substitution:function(a){return a instanceof B},is_state:function(a){return a instanceof q},is_rule:function(a){return a instanceof F},is_variable:function(a){return a instanceof A},is_anonymous_var:function(a){return a instanceof A&&"_"===a.id},is_callable:function(a){return a instanceof g},is_number:function(a){return a instanceof v},is_integer:function(a){return a instanceof v&&!a.is_float},is_float:function(a){return a instanceof
v&&a.is_float},is_term:function(a){return a instanceof g},is_atom:function(a){return a instanceof g&&0===a.args.length},is_ground:function(a){if(a instanceof A)return!1;if(a instanceof g)for(var e=0;e<a.args.length;e++)if(!d.type.is_ground(a.args[e]))return!1;return!0},is_atomic:function(a){return a instanceof g&&0===a.args.length||a instanceof v},is_compound:function(a){return a instanceof g&&0<a.args.length},is_list:function(a){return a instanceof g&&("[]/0"===a.indicator||"./2"===a.indicator)},
is_empty_list:function(a){return a instanceof g&&"[]/0"===a.indicator},is_non_empty_list:function(a){return a instanceof g&&"./2"===a.indicator},is_fully_list:function(a){for(;a instanceof g&&"./2"===a.indicator;)a=a.args[1];return a instanceof A||a instanceof g&&"[]/0"===a.indicator},is_instantiated_list:function(a){for(;a instanceof g&&"./2"===a.indicator;)a=a.args[1];return a instanceof g&&"[]/0"===a.indicator},is_unitary_list:function(a){return a instanceof g&&"./2"===a.indicator&&a.args[1]instanceof
g&&"[]/0"===a.args[1].indicator},is_character:function(a){return a instanceof g&&1===a.id.length},is_character_code:function(a){return a instanceof v&&!a.is_float},is_operator:function(a){return a instanceof g&&d.arithmetic.evaluation[a.indicator]},is_directive:function(a){return a instanceof g&&void 0!==d.directive[a.indicator]},is_builtin:function(a){return a instanceof g&&void 0!==d.predicate[a.indicator]},is_error:function(a){return a instanceof g&&"throw/1"===a.indicator},is_predicate_indicator:function(a){return a instanceof
g&&"//2"===a.indicator&&a.args[0]instanceof g&&0===a.args[0].args.length&&a.args[1]instanceof v&&!1===a.args[1].is_float},is_flag:function(a){return a instanceof g&&0===a.args.length&&void 0!==d.flag[a.id]},is_value_flag:function(a,c){if(!d.type.is_flag(a))return!1;for(var b in d.flag[a.id].allowed)if(d.flag[a.id].allowed.hasOwnProperty(b)&&d.flag[a.id].allowed[b].equals(c))return!0;return!1},is_modifiable_flag:function(a){return d.type.is_flag(a)&&d.flag[a.id].changeable},is_module:function(a){return a instanceof
g&&"library/1"===a.indicator&&a.args[0]instanceof g&&0===a.args[0].args.length&&void 0!==d.module[a.args[0].id]}},arithmetic:{evaluation:{"e/0":{type_args:null,type_result:!0,fn:function(a){return Math.E}},"pi/0":{type_args:null,type_result:!0,fn:function(a){return Math.PI}},"tau/0":{type_args:null,type_result:!0,fn:function(a){return 2*Math.PI}},"epsilon/0":{type_args:null,type_result:!0,fn:function(a){return Number.EPSILON}},"+/1":{type_args:null,type_result:null,fn:function(a,c){return a}},"-/1":{type_args:null,
type_result:null,fn:function(a,c){return-a}},"\\/1":{type_args:!1,type_result:!1,fn:function(a,c){return~a}},"abs/1":{type_args:null,type_result:null,fn:function(a,c){return Math.abs(a)}},"sign/1":{type_args:null,type_result:null,fn:function(a,c){return Math.sign(a)}},"float_integer_part/1":{type_args:!0,type_result:!1,fn:function(a,c){return parseInt(a)}},"float_fractional_part/1":{type_args:!0,type_result:!0,fn:function(a,c){return a-parseInt(a)}},"float/1":{type_args:null,type_result:!0,fn:function(a,
c){return parseFloat(a)}},"floor/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.floor(a)}},"truncate/1":{type_args:!0,type_result:!1,fn:function(a,c){return parseInt(a)}},"round/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.round(a)}},"ceiling/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.ceil(a)}},"sin/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.sin(a)}},"cos/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.cos(a)}},"tan/1":{type_args:null,
type_result:!0,fn:function(a,c){return Math.tan(a)}},"asin/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.asin(a)}},"acos/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.acos(a)}},"atan/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.atan(a)}},"atan2/2":{type_args:null,type_result:!0,fn:function(a,c,b){return Math.atan2(a,c)}},"exp/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.exp(a)}},"sqrt/1":{type_args:null,type_result:!0,fn:function(a,
c){return Math.sqrt(a)}},"log/1":{type_args:null,type_result:!0,fn:function(a,c){return 0<a?Math.log(a):d.error.evaluation("undefined",c.__call_indicator)}},"+/2":{type_args:null,type_result:null,fn:function(a,c,b){return a+c}},"-/2":{type_args:null,type_result:null,fn:function(a,c,b){return a-c}},"*/2":{type_args:null,type_result:null,fn:function(a,c,b){return a*c}},"//2":{type_args:null,type_result:!0,fn:function(a,c,b){return c?a/c:d.error.evaluation("zero_division",b.__call_indicator)}},"///2":{type_args:!1,
type_result:!1,fn:function(a,c,b){return c?parseInt(a/c):d.error.evaluation("zero_division",b.__call_indicator)}},"**/2":{type_args:null,type_result:!0,fn:function(a,c,b){return Math.pow(a,c)}},"^/2":{type_args:null,type_result:null,fn:function(a,c,b){return Math.pow(a,c)}},"<</2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a<<c}},">>/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a>>c}},"/\\/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a&c}},"\\//2":{type_args:!1,
type_result:!1,fn:function(a,c,b){return a|c}},"xor/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a^c}},"rem/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?a%c:d.error.evaluation("zero_division",b.__call_indicator)}},"mod/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?a-parseInt(a/c)*c:d.error.evaluation("zero_division",b.__call_indicator)}},"max/2":{type_args:null,type_result:null,fn:function(a,c,b){return Math.max(a,c)}},"min/2":{type_args:null,type_result:null,
fn:function(a,c,b){return Math.min(a,c)}}}},directive:{"dynamic/1":function(a,c){var b=c.args[0];d.type.is_variable(b)?a.throwError(d.error.instantiation(c.indicator)):d.type.is_compound(b)&&"//2"===b.indicator?d.type.is_variable(b.args[0])||d.type.is_variable(b.args[1])?a.throwError(d.error.instantiation(c.indicator)):d.type.is_atom(b.args[0])?d.type.is_integer(b.args[1])?a.session.public_predicates[c.args[0].args[0].id+"/"+c.args[0].args[1].value]=!0:a.throwError(d.error.type("integer",b.args[1],
c.indicator)):a.throwError(d.error.type("atom",b.args[0],c.indicator)):a.throwError(d.error.type("predicate_indicator",b,c.indicator))},"set_prolog_flag/2":function(a,c){var b=c.args[0],e=c.args[1];d.type.is_variable(b)||d.type.is_variable(e)?a.throwError(d.error.instantiation(c.indicator)):d.type.is_atom(b)?d.type.is_flag(b)?d.type.is_value_flag(b,e)?d.type.is_modifiable_flag(b)?a.session.flag[b.id]=e:a.throwError(d.error.permission("modify","flag",b)):a.throwError(d.error.domain("flag_value",new g("+",
[b,e]),c.indicator)):a.throwError(d.error.domain("prolog_flag",b,c.indicator)):a.throwError(d.error.type("atom",b,c.indicator))},"use_module/1":function(a,c){var b=c.args[0];d.type.is_variable(b)?a.throwError(d.error.instantiation(c.indicator)):d.type.is_term(b)?d.type.is_module(b)&&a.session.modules.push(b.args[0].id):a.throwError(d.error.type("term",b,c.indicator))},"char_conversion/2":function(a,c){var b=c.args[0],e=c.args[1];d.type.is_variable(b)||d.type.is_variable(e)?a.throwError(d.error.instantiation(c.indicator)):
d.type.is_character(b)?d.type.is_character(e)?b.id===e.id?delete a.session.__char_conversion[b.id]:a.session.__char_conversion[b.id]=e.id:a.throwError(d.error.type("character",e,c.indicator)):a.throwError(d.error.type("character",b,c.indicator))},"op/3":function(a,c){var b=c.args[0],e=c.args[1],g=c.args[2];if(d.type.is_variable(b)||d.type.is_variable(e)||d.type.is_variable(g))a.throwError(d.error.instantiation(c.indicator));else if(d.type.is_integer(b))if(d.type.is_atom(e))if(d.type.is_atom(g))if(0>
b.value||1200<b.value)a.throwError(d.error.domain("operator_priority",b,c.indicator));else if(","===g.id)a.throwError(d.error.permission("modify","operator",g,c.indicator));else if(-1==="fy fx yf xf xfx yfx xfy".split(" ").indexOf(e.id))a.throwError(d.error.domain("operator_specifier",e,c.indicator));else{var h={prefix:null,infix:null,postfix:null};for(p in a.session.__operators)if(a.session.__operators.hasOwnProperty(p)){var f=a.session.__operators[p][g.id];f&&(-1!==E(f,"fx")&&(h.prefix={priority:p,
type:"fx"}),-1!==E(f,"fy")&&(h.prefix={priority:p,type:"fy"}),-1!==E(f,"xf")&&(h.postfix={priority:p,type:"xf"}),-1!==E(f,"yf")&&(h.postfix={priority:p,type:"yf"}),-1!==E(f,"xfx")&&(h.infix={priority:p,type:"xfx"}),-1!==E(f,"xfy")&&(h.infix={priority:p,type:"xfy"}),-1!==E(f,"yfx")&&(h.infix={priority:p,type:"yfx"}))}switch(e.id){case "fy":case "fx":var p="prefix";break;case "yf":case "xf":p="postfix";break;default:p="infix"}if(((h.prefix&&"prefix"===p||h.postfix&&"postfix"===p||h.infix&&"infix"===
p)&&h[p].type!==e.id||h.infix&&"postfix"===p||h.postfix&&"infix"===p)&&0!==b.value)a.throwError(d.error.permission("create","operator",g,c.indicator));else{if(h[p]){c=a.session.__operators[h[p].priority][g.id];f=e.id;for(var l=c.length-1;0<=l;l--)c[l]===f&&c.splice(l,1);0===a.session.__operators[h[p].priority][g.id].length&&delete a.session.__operators[h[p].priority][g.id]}0<b.value&&(a.session.__operators[b.value]||(a.session.__operators[b.value.toString()]={}),a.session.__operators[b.value][g.id]||
(a.session.__operators[b.value][g.id]=[]),a.session.__operators[b.value][g.id].push(e.id))}}else a.throwError(d.error.type("atom",g,c.indicator));else a.throwError(d.error.type("atom",e,c.indicator));else a.throwError(d.error.type("integer",b,c.indicator))}},predicate:{";/2":function(a,c,b){if(d.type.is_term(b.args[0])&&"->/2"===b.args[0].indicator){var e=a.points;a.points=[new q(b.args[0].args[0],c.substitution,c.parent)];a.__calls.unshift(function(t){a.points=e;!1===t?a.points=[new q(c.goal.replace(b.args[1]),
c.substitution,c.parent)].concat(e):d.type.is_error(t)?a.throwError(t.args[0]):null===t?(a.points=[c].concat(e),a.__calls.shift()(null)):a.points=[new q(c.goal.replace(b.args[0].args[1]),c.substitution,c.parent)].concat(e)})}else{var g=new q(c.goal.replace(b.args[0]),c.substitution,c.parent),h=new q(c.goal.replace(b.args[1]),c.substitution,c.parent);a.prepend([g,h])}},"!/0":function(a,c,b){var e,d=[];for(e=c;null!==e.parent&&e.parent.goal.search(b);)e=e.parent;for(b=0;b<a.points.length;b++){for(var g=
a.points[b],f=g.parent;null!==f&&f!==e.parent;)f=f.parent;null===f&&f!==e.parent&&d.push(g)}a.points=[new q(c.goal.replace(null),c.substitution,c)].concat(d)},"\\+/1":function(a,c,b){var e=b.args[0];if(d.type.is_variable(e))a.throwError(d.error.instantiation(a.level));else if(d.type.is_callable(e)){var g=a.points;a.points=[new q(b.args[0],c.substitution,c)];a.__calls.unshift(function(b){a.points=g;!1===b?a.success(c):d.type.is_error(b)?a.throwError(b.args[0]):null===b?(a.points=[c].concat(g),a.__calls.shift()(null)):
a.points=g})}else a.throwError(d.error.type("callable",e,a.level))},"->/2":function(a,c,b){b=c.goal.replace(new g(",",[b.args[0],new g(",",[new g("!"),b.args[1]])]));a.prepend([new q(b,c.substitution,c.parent)])},"fail/0":function(a,c,b){},"false/0":function(a,c,b){},"true/0":function(a,c,b){a.success(c)},"call/1":H(1),"call/2":H(2),"call/3":H(3),"call/4":H(4),"call/5":H(5),"call/6":H(6),"call/7":H(7),"call/8":H(8),"once/1":function(a,c,b){a.prepend([new q(c.goal.replace(new g(",",[new g("call",[b.args[0]]),
new g("!",[])])),c.substitution,c)])},"forall/2":function(a,c,b){var e=b.args[1];a.prepend([new q(c.goal.replace(new g("\\+",[new g(",",[new g("call",[b.args[0]]),new g("\\+",[new g("call",[e])])])])),c.substitution,c)])},"repeat/0":function(a,c,b){a.prepend([new q(c.goal.replace(null),c.substitution,c),c])},"throw/1":function(a,c,b){d.type.is_variable(b.args[0])?a.throwError(d.error.instantiation(a.level)):a.throwError(b.args[0])},"catch/3":function(a,c,b){var e=a.points;a.points=[];a.prepend([new q(b.args[0],
c.substitution,c)]);a.__calls.unshift(function(t){var h=a.points;a.points=e;if(d.type.is_error(t)){var f=[];for(h=0;h<a.points.length;h++){for(var w=a.points[h],l=w.parent;null!==l&&l!==c.parent;)l=l.parent;null===l&&l!==c.parent&&f.push(w)}a.points=f;w=d.unify(t.args[0],b.args[1],!1);null!==w?(w.substitution=c.substitution.apply(w.substitution),w.goal=c.goal.replace(b.args[2]).apply(w.substitution),a.prepend([w])):a.throwError(t.args[0])}else!1!==t&&(f=null===t?[]:[new q(c.goal.apply(t).replace(null),
c.substitution.apply(t),c)],h=K(h,function(a){null===a.goal&&(a.goal=new g("true",[]));a=new q(c.goal.replace(new g("catch",[a.goal,b.args[1],b.args[2]])),c.substitution.apply(a.substitution),a.parent);a.exclude=b.args[0].variables();return a}),a.prepend(f.concat(h)),null===t&&(this.current_limit=0,a.__calls.shift()(null)))})},"=/2":function(a,c,b){b=d.unify(b.args[0],b.args[1],!1);null!==b&&(b.goal=c.goal.apply(b.substitution).replace(null),b.substitution=c.substitution.apply(b.substitution),b.parent=
c,a.prepend([b]))},"unify_with_occurs_check/2":function(a,c,b){b=d.unify(b.args[0],b.args[1],!0);null!==b&&(b.goal=c.goal.apply(b.substitution).replace(null),b.substitution=c.substitution.apply(b.substitution),b.parent=c,a.prepend([b]))},"\\=/2":function(a,c,b){null===d.unify(b.args[0],b.args[1])&&a.success(c)},"subsumes_term/2":function(a,c,b){var e=d.unify(b.args[1],b.args[0]);null!==e&&b.args[1].apply(e.substitution).equals(b.args[1])&&a.success(c)},"findall/3":function(a,c,b){var e=b.args[0],
f=b.args[1],h=b.args[2];if(d.type.is_variable(f))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(f))if(d.type.is_variable(h)||d.type.is_list(h)){var l=a.next_free_variable();b=new g(",",[f,new g("=",[l,e])]);var k=a.points,m=a.session.limit;a.add_goal(b,!0);var n=[],r=function(b){if(!1===b||null===b||d.type.is_error(b))if(a.points=k,a.session.limit=m,d.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){b=new g("[]");for(var e=n.length-1;0<=e;e--)b=new g(".",
[n[e],b]);a.prepend([new q(c.goal.replace(new g("=",[h,b])),c.substitution,c)])}}else a.__calls.unshift(r),n.push(b.links[l.id]),a.session.limit=a.current_limit};a.__calls.unshift(r)}else a.throwError(d.error.type("list",h,b.indicator));else a.throwError(d.error.type("callable",f,b.indicator))},"bagof/3":function(a,c,b){var e=b.args[0],f=b.args[1],h=b.args[2];if(d.type.is_variable(f))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(f))if(d.type.is_variable(h)||d.type.is_list(h)){var l=
a.next_free_variable();if("^/2"===f.indicator){var k=f.args[0].variables();f=f.args[1]}else k=[];k=k.concat(e.variables());b=f.variables().filter(function(a){return-1===E(k,a)});for(var n=new g("[]"),m=b.length-1;0<=m;m--)n=new g(".",[new A(b[m]),n]);e=new g(",",[f,new g("=",[l,new g(",",[n,e])])]);var r=a.points,u=a.session.limit;a.add_goal(e,!0);var v=[],x=function(b){if(!1===b||null===b||d.type.is_error(b))if(a.points=r,a.session.limit=u,d.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){for(var e=
[],t=0;t<v.length;t++){b=v[t].answers;for(var f=new g("[]"),w=b.length-1;0<=w;w--)f=new g(".",[b[w],f]);e.push(new q(c.goal.replace(new g(",",[new g("=",[n,v[t].variables]),new g("=",[h,f])])),c.substitution,c))}a.prepend(e)}}else{a.__calls.unshift(x);e=!1;t=b.links[l.id].args[0];b=b.links[l.id].args[1];for(f in v)if(v.hasOwnProperty(f)&&(w=v[f],w.variables.equals(t))){w.answers.push(b);e=!0;break}e||v.push({variables:t,answers:[b]});a.session.limit=a.current_limit}};a.__calls.unshift(x)}else a.throwError(d.error.type("list",
h,b.indicator));else a.throwError(d.error.type("callable",f,b.indicator))},"setof/3":function(a,c,b){var e=b.args[0],f=b.args[1],h=b.args[2];if(d.type.is_variable(f))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(f))if(d.type.is_variable(h)||d.type.is_list(h)){var l=a.next_free_variable();if("^/2"===f.indicator){var k=f.args[0].variables();f=f.args[1]}else k=[];k=k.concat(e.variables());b=f.variables().filter(function(a){return-1===E(k,a)});for(var n=new g("[]"),m=b.length-
1;0<=m;m--)n=new g(".",[new A(b[m]),n]);e=new g(",",[f,new g("=",[l,new g(",",[n,e])])]);var r=a.points,u=a.session.limit;a.add_goal(e,!0);var v=[],x=function(b){if(!1===b||null===b||d.type.is_error(b))if(a.points=r,a.session.limit=u,d.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){for(var e=[],t=0;t<v.length;t++){b=v[t].answers.sort(d.compare);for(var f=new g("[]"),w=b.length-1;0<=w;w--)f=new g(".",[b[w],f]);e.push(new q(c.goal.replace(new g(",",[new g("=",[n,v[t].variables]),
new g("=",[h,f])])),c.substitution,c))}a.prepend(e)}}else{a.__calls.unshift(x);e=!1;t=b.links[l.id].args[0];b=b.links[l.id].args[1];for(f in v)if(v.hasOwnProperty(f)&&(w=v[f],w.variables.equals(t))){w.answers.push(b);e=!0;break}e||v.push({variables:t,answers:[b]});a.session.limit=a.current_limit}};a.__calls.unshift(x)}else a.throwError(d.error.type("list",h,b.indicator));else a.throwError(d.error.type("callable",f,b.indicator))},"functor/3":function(a,c,b){var e=b.args[0],f=b.args[1],h=b.args[2];
if(d.type.is_variable(e)&&(d.type.is_variable(f)||d.type.is_variable(h)))a.throwError(d.error.instantiation("functor/3"));else if(d.type.is_variable(h)||d.type.is_integer(h))if(d.type.is_variable(f)||d.type.is_atomic(f))if(d.type.is_integer(f)&&d.type.is_integer(h)&&0!==h.value)a.throwError(d.error.type("atom",b.args[1],"functor/3"));else if(d.type.is_variable(e)){if(0<=b.args[2].value){b=[];for(var l=0;l<h.value;l++)b.push(a.next_free_variable());f=d.type.is_integer(f)?f:new g(f.id,b);a.prepend([new q(c.goal.replace(new g("=",
[e,f])),c.substitution,c.parent)])}}else b=d.type.is_integer(e)?e:new g(e.id,[]),e=d.type.is_integer(e)?new v(0,!1):new v(e.args.length,!1),e=new g(",",[new g("=",[b,f]),new g("=",[e,h])]),a.prepend([new q(c.goal.replace(e),c.substitution,c.parent)]);else a.throwError(d.error.type("atomic",b.args[1],"functor/3"));else a.throwError(d.error.type("integer",b.args[2],"functor/3"))},"arg/3":function(a,c,b){if(d.type.is_variable(b.args[0])||d.type.is_variable(b.args[1]))a.throwError(d.error.instantiation(b.indicator));
else if(0>b.args[0].value)a.throwError(d.error.domain("not_less_than_zero",b.args[0],b.indicator));else if(d.type.is_compound(b.args[1])){var e=b.args[0].value;0<e&&e<=b.args[1].args.length&&(b=new g("=",[b.args[1].args[e-1],b.args[2]]),a.prepend([new q(c.goal.replace(b),c.substitution,c)]))}else a.throwError(d.error.type("compound",b.args[1],b.indicator))},"=../2":function(a,c,b){if(d.type.is_variable(b.args[0])&&(d.type.is_variable(b.args[1])||d.type.is_non_empty_list(b.args[1])&&d.type.is_variable(b.args[1].args[0])))a.throwError(d.error.instantiation(b.indicator));
else if(!d.type.is_fully_list(b.args[1]))a.throwError(d.error.type("list",b.args[1],b.indicator));else if(!d.type.is_variable(b.args[0])){if(d.type.is_atomic(b.args[0]))var e=new g(".",[b.args[0],new g("[]")]);else{e=new g("[]");for(var f=b.args[0].args.length-1;0<=f;f--)e=new g(".",[b.args[0].args[f],e]);e=new g(".",[new g(b.args[0].id),e])}a.prepend([new q(c.goal.replace(new g("=",[e,b.args[1]])),c.substitution,c)])}else if(!d.type.is_variable(b.args[1])){f=[];for(e=b.args[1].args[1];"./2"===e.indicator;)f.push(e.args[0]),
e=e.args[1];d.type.is_variable(b.args[0])&&d.type.is_variable(e)?a.throwError(d.error.instantiation(b.indicator)):0===f.length&&d.type.is_compound(b.args[1].args[0])?a.throwError(d.error.type("atomic",b.args[1].args[0],b.indicator)):0<f.length&&(d.type.is_compound(b.args[1].args[0])||d.type.is_number(b.args[1].args[0]))?a.throwError(d.error.type("atom",b.args[1].args[0],b.indicator)):0===f.length?a.prepend([new q(c.goal.replace(new g("=",[b.args[1].args[0],b.args[0]],c)),c.substitution,c)]):a.prepend([new q(c.goal.replace(new g("=",
[new g(b.args[1].args[0].id,f),b.args[0]])),c.substitution,c)])}},"copy_term/2":function(a,c,b){var e=b.args[0].rename(a);a.prepend([new q(c.goal.replace(new g("=",[e,b.args[1]])),c.substitution,c.parent)])},"term_variables/2":function(a,c,b){var e=b.args[0],f=b.args[1];d.type.is_fully_list(f)?(b=L(K(R(e.variables()),function(a){return new A(a)})),a.prepend([new q(c.goal.replace(new g("=",[f,b])),c.substitution,c)])):a.throwError(d.error.type("list",f,b.indicator))},"clause/2":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));
else if(!d.type.is_callable(b.args[0]))a.throwError(d.error.type("callable",b.args[0],b.indicator));else if(!d.type.is_variable(b.args[1])&&!d.type.is_callable(b.args[1]))a.throwError(d.error.type("callable",b.args[1],b.indicator));else if(void 0!==a.session.rules[b.args[0].indicator])if(a.is_public_predicate(b.args[0].indicator)){var e=[],f;for(f in a.session.rules[b.args[0].indicator])if(a.session.rules[b.args[0].indicator].hasOwnProperty(f)){var h=a.session.rules[b.args[0].indicator][f];a.session.renamed_variables=
{};h=h.rename(a);null===h.body&&(h.body=new g("true"));h=new g(",",[new g("=",[h.head,b.args[0]]),new g("=",[h.body,b.args[1]])]);e.push(new q(c.goal.replace(h),c.substitution,c))}a.prepend(e)}else a.throwError(d.error.permission("access","private_procedure",b.args[0].indicator,b.indicator))},"current_predicate/1":function(a,c,b){var e=b.args[0];if(d.type.is_variable(e)||d.type.is_compound(e)&&"//2"===e.indicator)if(d.type.is_variable(e)||d.type.is_variable(e.args[0])||d.type.is_atom(e.args[0]))if(d.type.is_variable(e)||
d.type.is_variable(e.args[1])||d.type.is_integer(e.args[1])){b=[];for(var f in a.session.rules)if(a.session.rules.hasOwnProperty(f)){var h=f.lastIndexOf("/"),l=f.substr(0,h);h=parseInt(f.substr(h+1,f.length-(h+1)));l=new g("/",[new g(l),new v(h,!1)]);l=new g("=",[l,e]);b.push(new q(c.goal.replace(l),c.substitution,c))}a.prepend(b)}else a.throwError(d.error.type("integer",e.args[1],b.indicator));else a.throwError(d.error.type("atom",e.args[0],b.indicator));else a.throwError(d.error.type("predicate_indicator",
e,b.indicator))},"asserta/1":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var e=b.args[0].args[0];var f=x(b.args[0].args[1])}else e=b.args[0],f=null;d.type.is_callable(e)?null===f||d.type.is_callable(f)?a.is_public_predicate(e.indicator)?(void 0===a.session.rules[e.indicator]&&(a.session.rules[e.indicator]=[]),a.session.public_predicates[e.indicator]=!0,a.session.rules[e.indicator]=
[new F(e,f)].concat(a.session.rules[e.indicator]),a.success(c)):a.throwError(d.error.permission("modify","static_procedure",e.indicator,b.indicator)):a.throwError(d.error.type("callable",f,b.indicator)):a.throwError(d.error.type("callable",e,b.indicator))}else a.throwError(d.error.type("callable",b.args[0],b.indicator))},"assertz/1":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var e=
b.args[0].args[0];var f=x(b.args[0].args[1])}else e=b.args[0],f=null;d.type.is_callable(e)?null===f||d.type.is_callable(f)?a.is_public_predicate(e.indicator)?(void 0===a.session.rules[e.indicator]&&(a.session.rules[e.indicator]=[]),a.session.public_predicates[e.indicator]=!0,a.session.rules[e.indicator].push(new F(e,f)),a.success(c)):a.throwError(d.error.permission("modify","static_procedure",e.indicator,b.indicator)):a.throwError(d.error.type("callable",f,b.indicator)):a.throwError(d.error.type("callable",
e,b.indicator))}else a.throwError(d.error.type("callable",b.args[0],b.indicator))},"retract/1":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var e=b.args[0].args[0];var f=b.args[0].args[1]}else e=b.args[0],f=new g("true");if(a.is_public_predicate(e.indicator)){if(void 0!==a.session.rules[e.indicator]){b=[];for(var h=0;h<a.session.rules[e.indicator].length;h++){a.session.renamed_variables=
{};var l=a.session.rules[e.indicator][h],k=l.rename(a);null===k.body&&(k.body=new g("true",[]));l=new q(c.goal.replace(new g(",",[new g("=",[e,k.head]),new g(",",[new g("=",[f,k.body]),new G(function(a){return function(b,c){var d=e.indicator;if(null!==b.session.rules[d])for(var f=0;f<b.session.rules[d].length;f++)if(b.session.rules[d][f]===a){b.session.rules[d].splice(f,1);b.success(c);break}}}(l))])])),c.substitution,c);b.push(l)}a.prepend(b)}}else a.throwError(d.error.permission("modify","static_procedure",
e.indicator,b.indicator))}else a.throwError(d.error.type("callable",b.args[0],b.indicator))},"retractall/1":function(a,c,b){var e=b.args[0];d.type.is_variable(e)?a.throwError(d.error.instantiation(b.indicator)):d.type.is_callable(e)?a.prepend([new q(c.goal.replace(new g(",",[new g("retract",[new d.type.Term(":-",[e,new A("_")])]),new g("fail",[])])),c.substitution,c),new q(c.goal.replace(null),c.substitution,c)]):a.throwError(d.error.type("callable",e,b.indicator))},"abolish/1":function(a,c,b){if(d.type.is_variable(b.args[0])||
d.type.is_term(b.args[0])&&"//2"===b.args[0].indicator&&(d.type.is_variable(b.args[0].args[0])||d.type.is_variable(b.args[0].args[1])))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_term(b.args[0])&&"//2"===b.args[0].indicator)if(d.type.is_atom(b.args[0].args[0]))if(d.type.is_integer(b.args[0].args[1]))if(0>b.args[0].args[1].value)a.throwError(d.error.domain("not_less_than_zero",b.args[0].args[1],b.indicator));else if(d.type.is_number(a.getFlag("max_arity"))&&b.args[0].args[1].value>
a.getFlag("max_arity").value)a.throwError(d.error.representation("max_arity",b.indicator));else{var e=b.args[0].args[0].id+"/"+b.args[0].args[1].value;a.is_public_predicate(e)?(delete a.session.rules[e],a.success(c)):a.throwError(d.error.permission("modify","static_procedure",e,b.indicator))}else a.throwError(d.error.type("integer",b.args[0].args[1],b.indicator));else a.throwError(d.error.type("atom",b.args[0].args[0],b.indicator));else a.throwError(d.error.type("predicate_indicator",b.args[0],b.indicator))},
"atom_length/2":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_atom(b.args[0]))if(d.type.is_variable(b.args[1])||d.type.is_integer(b.args[1]))if(d.type.is_integer(b.args[1])&&0>b.args[1].value)a.throwError(d.error.domain("not_less_than_zero",b.args[1],b.indicator));else{var e=new v(b.args[0].id.length,!1);a.prepend([new q(c.goal.replace(new g("=",[e,b.args[1]])),c.substitution,c)])}else a.throwError(d.error.type("integer",b.args[1],
b.indicator));else a.throwError(d.error.type("atom",b.args[0],b.indicator))},"atom_concat/3":function(a,c,b){var e=b.args[0],f=b.args[1],h=b.args[2];if(d.type.is_variable(h)&&(d.type.is_variable(e)||d.type.is_variable(f)))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(f)||d.type.is_atom(f))if(d.type.is_variable(h)||d.type.is_atom(h)){b=d.type.is_variable(e);var l=d.type.is_variable(f);if(b||l)if(b&&!l){if(b=h.id.substr(0,h.id.length-
f.id.length),b+f.id===h.id){var k=new g("=",[e,new g(b)]);a.prepend([new q(c.goal.replace(k),c.substitution,c)])}}else if(l&&!b)b=h.id.substr(e.id.length),e.id+b===h.id&&(k=new g("=",[f,new g(b)]),a.prepend([new q(c.goal.replace(k),c.substitution,c)]));else{b=[];for(l=0;l<=h.id.length;l++){k=new g(h.id.substr(0,l));var n=new g(h.id.substr(l));k=new g(",",[new g("=",[k,e]),new g("=",[n,f])]);b.push(new q(c.goal.replace(k),c.substitution,c))}a.prepend(b)}else k=new g("=",[h,new g(e.id+f.id)]),a.prepend([new q(c.goal.replace(k),
c.substitution,c)])}else a.throwError(d.error.type("atom",h,b.indicator));else a.throwError(d.error.type("atom",f,b.indicator));else a.throwError(d.error.type("atom",e,b.indicator))},"sub_atom/5":function(a,c,b){var e=b.args[0],f=b.args[1],h=b.args[2],l=b.args[3],k=b.args[4];if(d.type.is_variable(e))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(f)||d.type.is_integer(f))if(d.type.is_variable(h)||d.type.is_integer(h))if(d.type.is_variable(l)||d.type.is_integer(l))if(d.type.is_integer(f)&&
0>f.value)a.throwError(d.error.domain("not_less_than_zero",f,b.indicator));else if(d.type.is_integer(h)&&0>h.value)a.throwError(d.error.domain("not_less_than_zero",h,b.indicator));else if(d.type.is_integer(l)&&0>l.value)a.throwError(d.error.domain("not_less_than_zero",l,b.indicator));else{var n=[],m=[],r=[];if(d.type.is_variable(f))for(b=0;b<=e.id.length;b++)n.push(b);else n.push(f.value);if(d.type.is_variable(h))for(b=0;b<=e.id.length;b++)m.push(b);else m.push(h.value);if(d.type.is_variable(l))for(b=
0;b<=e.id.length;b++)r.push(b);else r.push(l.value);var u=[],x;for(x in n)if(n.hasOwnProperty(x)){b=n[x];for(var A in m)if(m.hasOwnProperty(A)){var y=m[A],z=e.id.length-b-y;if(-1!==E(r,z)&&b+y+z===e.id.length){var B=e.id.substr(b,y);if(e.id===e.id.substr(0,b)+B+e.id.substr(b+y,z)){B=new g("=",[new g(B),k]);var C=new g("=",[f,new v(b)]);y=new g("=",[h,new v(y)]);z=new g("=",[l,new v(z)]);z=new g(",",[new g(",",[new g(",",[C,y]),z]),B]);u.push(new q(c.goal.replace(z),c.substitution,c))}}}}a.prepend(u)}else a.throwError(d.error.type("integer",
l,b.indicator));else a.throwError(d.error.type("integer",h,b.indicator));else a.throwError(d.error.type("integer",f,b.indicator))},"atom_chars/2":function(a,c,b){var e=b.args[0],f=b.args[1];if(d.type.is_variable(e)&&d.type.is_variable(f))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(e)){for(var h=f,l=d.type.is_variable(e),k="";"./2"===h.indicator;){if(d.type.is_character(h.args[0]))k+=h.args[0].id;else{if(d.type.is_variable(h.args[0])&&
l){a.throwError(d.error.instantiation(b.indicator));return}if(!d.type.is_variable(h.args[0])){a.throwError(d.error.type("character",h.args[0],b.indicator));return}}h=h.args[1]}d.type.is_variable(h)&&l?a.throwError(d.error.instantiation(b.indicator)):d.type.is_empty_list(h)||d.type.is_variable(h)?a.prepend([new q(c.goal.replace(new g("=",[new g(k),e])),c.substitution,c)]):a.throwError(d.error.type("list",f,b.indicator))}else{b=new g("[]");for(h=e.id.length-1;0<=h;h--)b=new g(".",[new g(e.id.charAt(h)),
b]);a.prepend([new q(c.goal.replace(new g("=",[f,b])),c.substitution,c)])}else a.throwError(d.error.type("atom",e,b.indicator))},"atom_codes/2":function(a,c,b){var e=b.args[0],f=b.args[1];if(d.type.is_variable(e)&&d.type.is_variable(f))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(e)){for(var h=f,l=d.type.is_variable(e),k="";"./2"===h.indicator;){if(d.type.is_character_code(h.args[0]))k+=String.fromCharCode(h.args[0].value);
else{if(d.type.is_variable(h.args[0])&&l){a.throwError(d.error.instantiation(b.indicator));return}if(!d.type.is_variable(h.args[0])){a.throwError(d.error.representation("character_code",b.indicator));return}}h=h.args[1]}d.type.is_variable(h)&&l?a.throwError(d.error.instantiation(b.indicator)):d.type.is_empty_list(h)||d.type.is_variable(h)?a.prepend([new q(c.goal.replace(new g("=",[new g(k),e])),c.substitution,c)]):a.throwError(d.error.type("list",f,b.indicator))}else{b=new g("[]");for(h=e.id.length-
1;0<=h;h--)b=new g(".",[new v(e.id.charCodeAt(h),!1),b]);a.prepend([new q(c.goal.replace(new g("=",[f,b])),c.substitution,c)])}else a.throwError(d.error.type("atom",e,b.indicator))},"char_code/2":function(a,c,b){var e=b.args[0],f=b.args[1];d.type.is_variable(e)&&d.type.is_variable(f)?a.throwError(d.error.instantiation(b.indicator)):d.type.is_variable(e)||d.type.is_character(e)?d.type.is_variable(f)||d.type.is_integer(f)?d.type.is_variable(f)||d.type.is_character_code(f)?d.type.is_variable(f)?(e=new v(e.id.charCodeAt(0),
!1),a.prepend([new q(c.goal.replace(new g("=",[e,f])),c.substitution,c)])):(f=new g(String.fromCharCode(f.value)),a.prepend([new q(c.goal.replace(new g("=",[f,e])),c.substitution,c)])):a.throwError(d.error.representation("character_code",b.indicator)):a.throwError(d.error.type("integer",f,b.indicator)):a.throwError(d.error.type("character",e,b.indicator))},"number_chars/2":function(a,c,b){var e,f=b.args[0],h=b.args[1];if(d.type.is_variable(f)&&d.type.is_variable(h))a.throwError(d.error.instantiation(b.indicator));
else if(d.type.is_variable(f)||d.type.is_number(f))if(d.type.is_variable(h)||d.type.is_list(h)){var l=d.type.is_variable(f);if(!d.type.is_variable(h)){var k=h,n=!0;for(e="";"./2"===k.indicator;){if(d.type.is_character(k.args[0]))e+=k.args[0].id;else if(d.type.is_variable(k.args[0]))n=!1;else if(!d.type.is_variable(k.args[0])){a.throwError(d.error.type("character",k.args[0],b.indicator));return}k=k.args[1]}n=n&&d.type.is_empty_list(k);if(!d.type.is_empty_list(k)&&!d.type.is_variable(k)){a.throwError(d.error.type("list",
h,b.indicator));return}if(!n&&l){a.throwError(d.error.instantiation(b.indicator));return}if(n){d.type.is_variable(k)&&l?a.throwError(d.error.instantiation(b.indicator)):(e=a.parse(e),h=e.value,!d.type.is_number(h)||e.tokens[e.tokens.length-1].space?a.throwError(d.error.syntax_by_predicate("parseable_number",b.indicator)):a.prepend([new q(c.goal.replace(new g("=",[f,h])),c.substitution,c)]));return}}if(!l){e=f.toString();b=new g("[]");for(f=e.length-1;0<=f;f--)b=new g(".",[new g(e.charAt(f)),b]);a.prepend([new q(c.goal.replace(new g("=",
[h,b])),c.substitution,c)])}}else a.throwError(d.error.type("list",h,b.indicator));else a.throwError(d.error.type("number",f,b.indicator))},"number_codes/2":function(a,c,b){var e,f=b.args[0],h=b.args[1];if(d.type.is_variable(f)&&d.type.is_variable(h))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(f)||d.type.is_number(f))if(d.type.is_variable(h)||d.type.is_list(h)){var l=d.type.is_variable(f);if(!d.type.is_variable(h)){var k=h,n=!0;for(e="";"./2"===k.indicator;){if(d.type.is_character_code(k.args[0]))e+=
String.fromCharCode(k.args[0].value);else if(d.type.is_variable(k.args[0]))n=!1;else if(!d.type.is_variable(k.args[0])){a.throwError(d.error.type("character_code",k.args[0],b.indicator));return}k=k.args[1]}n=n&&d.type.is_empty_list(k);if(!d.type.is_empty_list(k)&&!d.type.is_variable(k)){a.throwError(d.error.type("list",h,b.indicator));return}if(!n&&l){a.throwError(d.error.instantiation(b.indicator));return}if(n){d.type.is_variable(k)&&l?a.throwError(d.error.instantiation(b.indicator)):(e=a.parse(e),
h=e.value,!d.type.is_number(h)||e.tokens[e.tokens.length-1].space?a.throwError(d.error.syntax_by_predicate("parseable_number",b.indicator)):a.prepend([new q(c.goal.replace(new g("=",[f,h])),c.substitution,c)]));return}}if(!l){e=f.toString();b=new g("[]");for(f=e.length-1;0<=f;f--)b=new g(".",[new v(e.charCodeAt(f),!1),b]);a.prepend([new q(c.goal.replace(new g("=",[h,b])),c.substitution,c)])}}else a.throwError(d.error.type("list",h,b.indicator));else a.throwError(d.error.type("number",f,b.indicator))},
"@=</2":function(a,c,b){0>=d.compare(b.args[0],b.args[1])&&a.success(c)},"==/2":function(a,c,b){0===d.compare(b.args[0],b.args[1])&&a.success(c)},"\\==/2":function(a,c,b){0!==d.compare(b.args[0],b.args[1])&&a.success(c)},"@</2":function(a,c,b){0>d.compare(b.args[0],b.args[1])&&a.success(c)},"@>/2":function(a,c,b){0<d.compare(b.args[0],b.args[1])&&a.success(c)},"@>=/2":function(a,c,b){0<=d.compare(b.args[0],b.args[1])&&a.success(c)},"compare/3":function(a,c,b){var e=b.args[0],f=b.args[1],h=b.args[2];
d.type.is_variable(e)||d.type.is_atom(e)?d.type.is_atom(e)&&-1===["<",">","="].indexOf(e.id)?a.throwError(d.type.domain("order",e,b.indicator)):(b=d.compare(f,h),a.prepend([new q(c.goal.replace(new g("=",[e,new g(0===b?"=":-1===b?"<":">",[])])),c.substitution,c)])):a.throwError(d.error.type("atom",e,b.indicator))},"is/2":function(a,c,b){var e=b.args[1].interpret(a);d.type.is_number(e)?a.prepend([new q(c.goal.replace(new g("=",[b.args[0],e],a.level)),c.substitution,c)]):a.throwError(e)},"between/3":function(a,
c,b){var e=b.args[0],f=b.args[1],h=b.args[2];d.type.is_variable(e)||d.type.is_variable(f)?a.throwError(d.error.instantiation(b.indicator)):d.type.is_integer(e)?d.type.is_integer(f)?d.type.is_variable(h)||d.type.is_integer(h)?d.type.is_variable(h)?(b=[new q(c.goal.replace(new g("=",[h,e])),c.substitution,c)],e.value<f.value&&b.push(new q(c.goal.replace(new g("between",[new v(e.value+1,!1),f,h])),c.substitution,c)),a.prepend(b)):e.value<=h.value&&f.value>=h.value&&a.success(c):a.throwError(d.error.type("integer",
h,b.indicator)):a.throwError(d.error.type("integer",f,b.indicator)):a.throwError(d.error.type("integer",e,b.indicator))},"succ/2":function(a,c,b){var e=b.args[0],f=b.args[1];if(d.type.is_variable(e)&&d.type.is_variable(f))a.throwError(d.error.instantiation(b.indicator));else if(!d.type.is_variable(e)&&!d.type.is_integer(e))a.throwError(d.error.type("integer",e,b.indicator));else if(!d.type.is_variable(f)&&!d.type.is_integer(f))a.throwError(d.error.type("integer",f,b.indicator));else if(!d.type.is_variable(e)&&
0>e.value)a.throwError(d.error.domain("not_less_than_zero",e,b.indicator));else if(!d.type.is_variable(f)&&0>f.value)a.throwError(d.error.domain("not_less_than_zero",f,b.indicator));else if(d.type.is_variable(f)||0<f.value)d.type.is_variable(e)?a.prepend([new q(c.goal.replace(new g("=",[e,new v(f.value-1,!1)])),c.substitution,c)]):a.prepend([new q(c.goal.replace(new g("=",[f,new v(e.value+1,!1)])),c.substitution,c)])},"=:=/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?
a.throwError(b):0===b&&a.success(c)},"=\\=/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0!==b&&a.success(c)},"</2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0>b&&a.success(c)},"=</2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0>=b&&a.success(c)},">/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):
0<b&&a.success(c)},">=/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0<=b&&a.success(c)},"var/1":function(a,c,b){d.type.is_variable(b.args[0])&&a.success(c)},"atom/1":function(a,c,b){d.type.is_atom(b.args[0])&&a.success(c)},"atomic/1":function(a,c,b){d.type.is_atomic(b.args[0])&&a.success(c)},"compound/1":function(a,c,b){d.type.is_compound(b.args[0])&&a.success(c)},"integer/1":function(a,c,b){d.type.is_integer(b.args[0])&&a.success(c)},"float/1":function(a,
c,b){d.type.is_float(b.args[0])&&a.success(c)},"number/1":function(a,c,b){d.type.is_number(b.args[0])&&a.success(c)},"nonvar/1":function(a,c,b){d.type.is_variable(b.args[0])||a.success(c)},"ground/1":function(a,c,b){0===b.variables().length&&a.success(c)},"acyclic_term/1":function(a,c,b){var e=c.substitution.apply(c.substitution);b=b.args[0].variables();for(var d=0;d<b.length;d++)if(!c.substitution.links[b[d]].equals(e.links[b[d]]))return;a.success(c)},"callable/1":function(a,c,b){d.type.is_callable(b.args[0])&&
a.success(c)},"halt/0":function(a,c,b){a.points=[]},"halt/1":function(a,c,b){c=b.args[0];d.type.is_variable(c)?a.throwError(d.error.instantiation(b.indicator)):d.type.is_integer(c)?a.points=[]:a.throwError(d.error.type("integer",c,b.indicator))},"current_prolog_flag/2":function(a,c,b){var e=b.args[0],f=b.args[1];if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(e)||d.type.is_flag(e)){b=[];for(var h in d.flag)if(d.flag.hasOwnProperty(h)){var l=new g(",",[new g("=",[new g(h),e]),new g("=",
[a.getFlag(h),f])]);b.push(new q(c.goal.replace(l),c.substitution,c))}a.prepend(b)}else a.throwError(d.error.domain("prolog_flag",e,b.indicator));else a.throwError(d.error.type("atom",e,b.indicator))},"set_prolog_flag/2":function(a,c,b){var e=b.args[0],f=b.args[1];d.type.is_variable(e)||d.type.is_variable(f)?a.throwError(d.error.instantiation(b.indicator)):d.type.is_atom(e)?d.type.is_flag(e)?d.type.is_value_flag(e,f)?d.type.is_modifiable_flag(e)?(a.session.flag[e.id]=f,a.success(c)):a.throwError(d.error.permission("modify",
"flag",e)):a.throwError(d.error.domain("flag_value",new g("+",[e,f]),b.indicator)):a.throwError(d.error.domain("prolog_flag",e,b.indicator)):a.throwError(d.error.type("atom",e,b.indicator))}},flag:{bounded:{allowed:[new g("true"),new g("false")],value:new g("true"),changeable:!1},max_integer:{allowed:[new v(Number.MAX_SAFE_INTEGER)],value:new v(Number.MAX_SAFE_INTEGER),changeable:!1},min_integer:{allowed:[new v(Number.MIN_SAFE_INTEGER)],value:new v(Number.MIN_SAFE_INTEGER),changeable:!1},integer_rounding_function:{allowed:[new g("down"),
new g("toward_zero")],value:new g("toward_zero"),changeable:!1},char_conversion:{allowed:[new g("on"),new g("off")],value:new g("on"),changeable:!0},debug:{allowed:[new g("on"),new g("off")],value:new g("off"),changeable:!0},max_arity:{allowed:[new g("unbounded")],value:new g("unbounded"),changeable:!1},unknown:{allowed:[new g("error"),new g("fail"),new g("warning")],value:new g("error"),changeable:!0},double_quotes:{allowed:[new g("chars"),new g("codes"),new g("atom")],value:new g("codes"),changeable:!0},
dialect:{allowed:[new g("tau")],value:new g("tau"),changeable:!1},version_data:{allowed:[new g("tau",[new v(J.major,!1),new v(J.minor,!1),new v(J.patch,!1),new g(J.status)])],value:new g("tau",[new v(J.major,!1),new v(J.minor,!1),new v(J.patch,!1),new g(J.status)]),changeable:!1},nodejs:{allowed:[new g("yes"),new g("no")],value:new g("undefined"!==typeof module&&module.exports?"yes":"no"),changeable:!1}},unify:function(a,c,b){b=void 0===b?!1:b;if(this.type.is_anonymous_var(a))return new q(c,new B);
if(this.type.is_anonymous_var(c))return new q(a,new B);if(this.type.is_variable(c)){var e={};if(b&&-1!==E(a.variables(),c.id)&&!d.type.is_variable(a))return null;e[c.id]=a;return new q(a,new B(e))}return a.unify(c,b)},compare:function(a,c){var b=d.type.compare(a,c);return 0!==b?b:a.compare(c)},arithmetic_compare:function(a,c,b){c=c.interpret(a);return d.type.is_number(c)?(a=b.interpret(a),d.type.is_number(a)?c.value<a.value?-1:c.value>a.value?1:0:a):c},operate:function(a,c){if(d.type.is_operator(c)){for(var b=
d.type.is_operator(c),e=[],f,g=!1,l=0;l<c.args.length;l++){f=c.args[l].interpret(a);if(d.type.is_number(f)){if(null!==b.type_args&&f.is_float!==b.type_args)return d.error.type(b.type_args?"float":"integer",f,a.__call_indicator);e.push(f.value)}else return f;g=g||f.is_float}e.push(a);f=d.arithmetic.evaluation[c.indicator].fn.apply(this,e);g=null===b.type_result?g:b.type_result;return d.type.is_term(f)?f:f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY?d.error.evaluation("overflow",a.__call_indicator):
!1===g&&"true"===a.getFlag("bounded").id&&(f>a.getFlag("max_integer").value||f<a.getFlag("min_integer").value)?d.error.evaluation("int_overflow",a.__call_indicator):new v(f,g)}return d.error.type("evaluable",c.indicator,a.__call_indicator)},error:{existence:function(a,c,b){return new g("error",[new g("existence_error",[new g(a),I(c)]),I(b)])},type:function(a,c,b){return new g("error",[new g("type_error",[new g(a),c]),I(b)])},instantiation:function(a){return new g("error",[new g("instantiation_error"),
I(a)])},domain:function(a,c,b){return new g("error",[new g("domain_error",[new g(a),c]),I(b)])},representation:function(a,c){return new g("error",[new g("representation_error",[new g(a)]),I(c)])},permission:function(a,c,b,d){return new g("error",[new g("permission_error",[new g(a),new g(c),b]),I(d)])},evaluation:function(a,c){return new g("error",[new g("evaluation_error",[new g(a)]),I(c)])},syntax:function(a,c,b){a=a||{value:"",line:0,column:0,matches:[""],start:0};var d=b&&0<a.matches.length?a.start+
a.matches[0].length:a.start;b=b?new g("token_not_found"):new g("found",[new g(a.value.toString())]);a=new g(".",[new g("line",[new v(a.line+1)]),new g(".",[new g("column",[new v(d+1)]),new g(".",[b,new g("[]",[])])])]);return new g("error",[new g("syntax_error",[new g(c)]),a])},syntax_by_predicate:function(a,c){return new g("error",[new g("syntax_error",[new g(a)]),I(c)])}},format_variable:function(a){return"_"+a},format_answer:function(a,c){c instanceof C&&(c=c.thread);if(d.type.is_error(a))return"uncaught exception: "+
a.args[0].toString();if(!1===a)return"false.";if(null===a)return"limit exceeded ;";var b=0,e="";if(d.type.is_substitution(a)){var f=a.domain(!0);a=a.filter(function(a,b){return!d.type.is_variable(b)||-1!==f.indexOf(b.id)&&a!==b.id})}for(var g in a.links)a.links.hasOwnProperty(g)&&(b++,""!==e&&(e+=", "),e+=g.toString()+" = "+a.links[g].toString());a="undefined"===typeof c||0<c.points.length?" ;":".";return 0===b?"true"+a:e+a},flatten_error:function(a){if(!d.type.is_error(a))return null;a=a.args[0];
var c={};c.type=a.args[0].id;c.thrown="syntax_error"==c.type?null:a.args[1].id;c.expected=null;c.found=null;c.representation=null;c.existence=null;c.existence_type=null;c.line=null;c.column=null;c.permission_operation=null;c.permission_type=null;c.evaluation_type=null;"type_error"==c.type||"domain_error"==c.type?(c.expected=a.args[0].args[0].id,c.found=a.args[0].args[1].toString()):"syntax_error"==c.type?"./2"===a.args[1].indicator?(c.expected=a.args[0].args[0].id,c.found=a.args[1].args[1].args[1].args[0],
c.found="token_not_found"===c.found.id?c.found.id:c.found.args[0].id,c.line=a.args[1].args[0].args[0].value,c.column=a.args[1].args[1].args[0].args[0].value):c.thrown=a.args[1].id:"permission_error"==c.type?(c.found=a.args[0].args[2].toString(),c.permission_operation=a.args[0].args[0].id,c.permission_type=a.args[0].args[1].id):"evaluation_error"==c.type?c.evaluation_type=a.args[0].args[0].id:"representation_error"==c.type?c.representation=a.args[0].args[0].id:"existence_error"==c.type&&(c.existence=
a.args[0].args[1].toString(),c.existence_type=a.args[0].args[0].id);return c},create:function(a){return new d.type.Session(a)}};"undefined"!==typeof module?module.exports=d:window.pl=d})();var pl;
(function(a){var y=function(){return{"append/3":[new a.type.Rule(new a.type.Term("append",[new a.type.Term("[]",[]),new a.type.Var("X"),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("append",[new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("X"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("S")])]),new a.type.Term("append",[new a.type.Var("T"),new a.type.Var("X"),new a.type.Var("S")]))],"member/2":[new a.type.Rule(new a.type.Term("member",[new a.type.Var("X"),
new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("_")])]),null),new a.type.Rule(new a.type.Term("member",[new a.type.Var("X"),new a.type.Term(".",[new a.type.Var("_"),new a.type.Var("Xs")])]),new a.type.Term("member",[new a.type.Var("X"),new a.type.Var("Xs")]))],"permutation/2":[new a.type.Rule(new a.type.Term("permutation",[new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("permutation",[new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),
new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("permutation",[new a.type.Var("T"),new a.type.Var("P")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("P")]),new a.type.Term("append",[new a.type.Var("X"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("Y")]),new a.type.Var("S")])])]))],"maplist/2":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",
[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("X")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("Xs")])]))],"maplist/3":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),
new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs")])]))],"maplist/4":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",
[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs")])]))],"maplist/5":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",
[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),
new a.type.Var("C"),new a.type.Var("D")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs"),new a.type.Var("Ds")])]))],"maplist/6":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),
new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")]),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Es")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C"),new a.type.Var("D"),new a.type.Var("E")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),
new a.type.Var("Cs"),new a.type.Var("Ds"),new a.type.Var("Es")])]))],"maplist/7":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",
[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")]),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Es")]),new a.type.Term(".",[new a.type.Var("F"),new a.type.Var("Fs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C"),new a.type.Var("D"),new a.type.Var("E"),new a.type.Var("F")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),
new a.type.Var("Cs"),new a.type.Var("Ds"),new a.type.Var("Es"),new a.type.Var("Fs")])]))],"maplist/8":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),
new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")]),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Es")]),new a.type.Term(".",[new a.type.Var("F"),new a.type.Var("Fs")]),new a.type.Term(".",[new a.type.Var("G"),new a.type.Var("Gs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C"),new a.type.Var("D"),new a.type.Var("E"),
new a.type.Var("F"),new a.type.Var("G")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs"),new a.type.Var("Ds"),new a.type.Var("Es"),new a.type.Var("Fs"),new a.type.Var("Gs")])]))],"include/3":[new a.type.Rule(new a.type.Term("include",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("include",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),
new a.type.Var("L")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P"),new a.type.Var("A")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("A"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Term("[]",[])]),new a.type.Var("B")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("F"),new a.type.Var("B")]),new a.type.Term(",",[new a.type.Term(";",[new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("F")]),new a.type.Term(",",[new a.type.Term("=",
[new a.type.Var("L"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("S")])]),new a.type.Term("!",[])])]),new a.type.Term("=",[new a.type.Var("L"),new a.type.Var("S")])]),new a.type.Term("include",[new a.type.Var("P"),new a.type.Var("T"),new a.type.Var("S")])])])])]))],"exclude/3":[new a.type.Rule(new a.type.Term("exclude",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("exclude",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("H"),
new a.type.Var("T")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("exclude",[new a.type.Var("P"),new a.type.Var("T"),new a.type.Var("E")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P"),new a.type.Var("L")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("L"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Term("[]",[])]),new a.type.Var("Q")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("R"),new a.type.Var("Q")]),new a.type.Term(";",
[new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("R")]),new a.type.Term(",",[new a.type.Term("!",[]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("E")])])]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("E")])])])])])])]))],"foldl/4":[new a.type.Rule(new a.type.Term("foldl",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Var("I"),new a.type.Var("I")]),null),new a.type.Rule(new a.type.Term("foldl",[new a.type.Var("P"),
new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("I"),new a.type.Var("R")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P"),new a.type.Var("L")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("L"),new a.type.Term(".",[new a.type.Var("I"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])])])]),new a.type.Var("L2")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P2"),new a.type.Var("L2")]),
new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P2")]),new a.type.Term("foldl",[new a.type.Var("P"),new a.type.Var("T"),new a.type.Var("X"),new a.type.Var("R")])])])])]))],"select/3":[new a.type.Rule(new a.type.Term("select",[new a.type.Var("E"),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Xs")]),new a.type.Var("Xs")]),null),new a.type.Rule(new a.type.Term("select",[new a.type.Var("E"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Term(".",[new a.type.Var("X"),
new a.type.Var("Ys")])]),new a.type.Term("select",[new a.type.Var("E"),new a.type.Var("Xs"),new a.type.Var("Ys")]))],"sum_list/2":[new a.type.Rule(new a.type.Term("sum_list",[new a.type.Term("[]",[]),new a.type.Num(0,!1)]),null),new a.type.Rule(new a.type.Term("sum_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("sum_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term("is",[new a.type.Var("S"),new a.type.Term("+",
[new a.type.Var("X"),new a.type.Var("Y")])])]))],"max_list/2":[new a.type.Rule(new a.type.Term("max_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])]),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("max_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("max_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term(";",[new a.type.Term(",",[new a.type.Term(">=",[new a.type.Var("X"),
new a.type.Var("Y")]),new a.type.Term(",",[new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("X")]),new a.type.Term("!",[])])]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("Y")])])]))],"min_list/2":[new a.type.Rule(new a.type.Term("min_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])]),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("min_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),new a.type.Term(",",
[new a.type.Term("min_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term(";",[new a.type.Term(",",[new a.type.Term("=<",[new a.type.Var("X"),new a.type.Var("Y")]),new a.type.Term(",",[new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("X")]),new a.type.Term("!",[])])]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("Y")])])]))],"prod_list/2":[new a.type.Rule(new a.type.Term("prod_list",[new a.type.Term("[]",[]),new a.type.Num(1,!1)]),null),new a.type.Rule(new a.type.Term("prod_list",
[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("prod_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term("is",[new a.type.Var("S"),new a.type.Term("*",[new a.type.Var("X"),new a.type.Var("Y")])])]))],"last/2":[new a.type.Rule(new a.type.Term("last",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])]),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("last",[new a.type.Term(".",[new a.type.Var("_"),
new a.type.Var("Xs")]),new a.type.Var("X")]),new a.type.Term("last",[new a.type.Var("Xs"),new a.type.Var("X")]))],"nth0/3":[new a.type.Rule(new a.type.Term("nth0",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")])]),new a.type.Term(",",[new a.type.Term(">=",[new a.type.Var("X"),
new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")]),new a.type.Term("!",[])])])]))],"nth1/3":[new a.type.Rule(new a.type.Term("nth1",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),
new a.type.Var("_")])]),new a.type.Term(",",[new a.type.Term(">",[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")]),new a.type.Term("!",[])])])]))],"nth0/4":[new a.type.Rule(new a.type.Term("nth0",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),
new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")])]),new a.type.Term(",",[new a.type.Term(">=",[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term("!",[])])])]))],"nth1/4":[new a.type.Rule(new a.type.Term("nth1",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),
new a.type.Var("W")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")])]),new a.type.Term(",",[new a.type.Term(">",[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term("!",[])])])]))],
"nth/5":[new a.type.Rule(new a.type.Term("nth",[new a.type.Var("N"),new a.type.Var("N"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("X"),new a.type.Var("Xs")]),null),new a.type.Rule(new a.type.Term("nth",[new a.type.Var("N"),new a.type.Var("O"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("Y"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Ys")])]),new a.type.Term(",",[new a.type.Term("is",[new a.type.Var("M"),new a.type.Term("+",
[new a.type.Var("N"),new a.type.Num(1,!1)])]),new a.type.Term("nth",[new a.type.Var("M"),new a.type.Var("O"),new a.type.Var("Xs"),new a.type.Var("Y"),new a.type.Var("Ys")])]))],"length/2":function(k,l,f){var n=f.args[0],m=f.args[1];a.type.is_variable(m)||a.type.is_integer(m)?a.type.is_integer(m)&&0>m.value?k.throwError(a.error.domain("not_less_than_zero",m,f.indicator)):(f=new a.type.Term("length",[n,new a.type.Num(0,!1),m]),a.type.is_integer(m)&&(f=new a.type.Term(",",[f,new a.type.Term("!",[])])),
k.prepend([new a.type.State(l.goal.replace(f),l.substitution,l)])):k.throwError(a.error.type("integer",m,f.indicator))},"length/3":[new a.type.Rule(new a.type.Term("length",[new a.type.Term("[]",[]),new a.type.Var("N"),new a.type.Var("N")]),null),new a.type.Rule(new a.type.Term("length",[new a.type.Term(".",[new a.type.Var("_"),new a.type.Var("X")]),new a.type.Var("A"),new a.type.Var("N")]),new a.type.Term(",",[new a.type.Term("is",[new a.type.Var("B"),new a.type.Term("+",[new a.type.Var("A"),new a.type.Num(1,
!1)])]),new a.type.Term("length",[new a.type.Var("X"),new a.type.Var("B"),new a.type.Var("N")])]))],"replicate/3":function(k,l,f){var n=f.args[0],m=f.args[1],r=f.args[2];if(a.type.is_variable(m))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_integer(m))if(0>m.value)k.throwError(a.error.domain("not_less_than_zero",m,f.indicator));else if(a.type.is_variable(r)||a.type.is_list(r)){f=new a.type.Term("[]");for(var u=0;u<m.value;u++)f=new a.type.Term(".",[n,f]);k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",
[f,r])),l.substitution,l.parent)])}else k.throwError(a.error.type("list",r,f.indicator));else k.throwError(a.error.type("integer",m,f.indicator))},"sort/2":function(k,l,f){var n=f.args[0],m=f.args[1];if(a.type.is_variable(n))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_variable(m)||a.type.is_fully_list(m)){for(var r=[],u=n;"./2"===u.indicator;)r.push(u.args[0]),u=u.args[1];if(a.type.is_variable(u))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_empty_list(u)){f=
r.sort(a.compare);n=new a.type.Term("[]");for(r=f.length-1;0<=r;r--)n=new a.type.Term(".",[f[r],n]);k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[n,m])),l.substitution,l.parent)])}else k.throwError(a.error.type("list",n,f.indicator))}else k.throwError(a.error.type("list",m,f.indicator))},"keysort/2":function(k,l,f){var n=f.args[0],m=f.args[1];if(a.type.is_variable(n))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_variable(m)||a.type.is_fully_list(m)){for(var r=
[],u,x=n;"./2"===x.indicator;){u=x.args[0];if(a.type.is_variable(u)){k.throwError(a.error.instantiation(f.indicator));return}if(!a.type.is_term(u)||"-/2"!==u.indicator){k.throwError(a.error.type("pair",u,f.indicator));return}u.args[0].pair=u.args[1];r.push(u.args[0]);x=x.args[1]}if(a.type.is_variable(x))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_empty_list(x)){f=r.sort(a.compare);n=new a.type.Term("[]");for(r=f.length-1;0<=r;r--)n=new a.type.Term(".",[new a.type.Term("-",[f[r],
f[r].pair]),n]),delete f[r].pair;k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[n,m])),l.substitution,l.parent)])}else k.throwError(a.error.type("list",n,f.indicator))}else k.throwError(a.error.type("list",m,f.indicator))},"take/3":function(k,l,f){var n=f.args[0],m=f.args[1],r=f.args[2];if(a.type.is_variable(m)||a.type.is_variable(n))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_list(m))if(a.type.is_integer(n))if(a.type.is_variable(r)||a.type.is_list(r)){f=n.value;
for(n=[];0<f&&"./2"===m.indicator;)n.push(m.args[0]),m=m.args[1],f--;if(0===f){m=new a.type.Term("[]");for(f=n.length-1;0<=f;f--)m=new a.type.Term(".",[n[f],m]);k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[m,r])),l.substitution,l.parent)])}}else k.throwError(a.error.type("list",r,f.indicator));else k.throwError(a.error.type("integer",n,f.indicator));else k.throwError(a.error.type("list",m,f.indicator))},"drop/3":function(k,l,f){var n=f.args[0],m=f.args[1],r=f.args[2];if(a.type.is_variable(m)||
a.type.is_variable(n))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_list(m))if(a.type.is_integer(n))if(a.type.is_variable(r)||a.type.is_list(r)){f=n.value;for(n=[];0<f&&"./2"===m.indicator;)n.push(m.args[0]),m=m.args[1],f--;0===f&&k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[m,r])),l.substitution,l.parent)])}else k.throwError(a.error.type("list",r,f.indicator));else k.throwError(a.error.type("integer",n,f.indicator));else k.throwError(a.error.type("list",m,
f.indicator))},"reverse/2":function(k,l,f){var n=f.args[0],m=f.args[1],r=a.type.is_instantiated_list(n),u=a.type.is_instantiated_list(m);if(a.type.is_variable(n)&&a.type.is_variable(m))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_variable(n)||a.type.is_fully_list(n))if(a.type.is_variable(m)||a.type.is_fully_list(m))if(r||u){f=r?n:m;for(u=new a.type.Term("[]",[]);"./2"===f.indicator;)u=new a.type.Term(".",[f.args[0],u]),f=f.args[1];k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",
[u,r?m:n])),l.substitution,l.parent)])}else k.throwError(a.error.instantiation(f.indicator));else k.throwError(a.error.type("list",m,f.indicator));else k.throwError(a.error.type("list",n,f.indicator))}}},z="append/3 member/2 permutation/2 maplist/2 maplist/3 maplist/4 maplist/5 maplist/6 maplist/7 maplist/8 include/3 exclude/3 fold/4 sum_list/2 max_list/2 min_list/2 prod_list/2 last/2 nth0/3 nth1/3 nth0/4 nth1/4 length/2 replicate/3 select/3 sort/2 keysort/2 take/3 drop/3 reverse/2".split(" ");"undefined"!==
typeof module?module.exports=function(k){a=k;new a.type.Module("lists",y(),z)}:new a.type.Module("lists",y(),z)})(pl);
(function(a){var y=function(){return{"maybe/0":function(a,l,f){.5>Math.random()&&a.success(l)},"maybe/1":function(a,l,f){Math.random()<f.args[0].value&&a.success(l)},"random/1":function(k,l,f){var n=f.args[0];a.type.is_variable(n)||a.type.is_number(n)?k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[n,new a.type.Num(Math.random(),!0)])),l.substitution,l)]):k.throwError(a.error.type("number",n,f.indicator))},"random/3":function(k,l,f){var n=f.args[0],m=f.args[1],r=f.args[2];a.type.is_variable(n)||
a.type.is_variable(m)?k.throwError(a.error.instantiation(f.indicator)):a.type.is_number(n)?a.type.is_number(m)?a.type.is_variable(r)||a.type.is_number(r)?n.value<m.value&&(f=n.is_float||m.is_float,n=n.value+Math.random()*(m.value-n.value),f||(n=Math.floor(n)),k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[r,new a.type.Num(n,f)])),l.substitution,l)])):k.throwError(a.error.type("number",r,f.indicator)):k.throwError(a.error.type("number",m,f.indicator)):k.throwError(a.error.type("number",
n,f.indicator))},"random_between/3":function(k,l,f){var n=f.args[0],m=f.args[1],r=f.args[2];a.type.is_variable(n)||a.type.is_variable(m)?k.throwError(a.error.instantiation(f.indicator)):a.type.is_integer(n)?a.type.is_integer(m)?a.type.is_variable(r)||a.type.is_integer(r)?n.value<m.value&&k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[r,new a.type.Num(Math.floor(n.value+Math.random()*(m.value-n.value+1)),!1)])),l.substitution,l)]):k.throwError(a.error.type("integer",r,f.indicator)):
k.throwError(a.error.type("integer",m,f.indicator)):k.throwError(a.error.type("integer",n,f.indicator))},"random_member/2":function(k,l,f){var n=f.args[0],m=f.args[1];if(a.type.is_variable(m))k.throwError(a.error.instantiation(f.indicator));else{for(f=[];"./2"==m.indicator;)f.push(m.args[0]),m=m.args[1];0<f.length&&k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[n,f[Math.floor(Math.random()*f.length)]])),l.substitution,l)])}},"random_permutation/2":function(k,l,f){var n=f.args[0],
m=f.args[1],r=a.type.is_instantiated_list(n);var u=a.type.is_instantiated_list(m);if(a.type.is_variable(n)&&a.type.is_variable(m)||!r&&!u)k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_variable(n)||a.type.is_fully_list(n))if(a.type.is_variable(m)||a.type.is_fully_list(m)){u=r?n:m;for(f=[];"./2"===u.indicator;)f.push(u.args[0]),u=u.args[1];for(u=0;u<f.length;u++){var x=Math.floor(Math.random()*f.length),y=f[u];f[u]=f[x];f[x]=y}x=new a.type.Term("[]",[]);for(u=f.length-1;0<=u;u--)x=
new a.type.Term(".",[f[u],x]);k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[x,r?m:n])),l.substitution,l)])}else k.throwError(a.error.type("list",m,f.indicator));else k.throwError(a.error.type("list",n,f.indicator))}}},z="maybe/0 maybe/1 random/1 random/3 random_between/3 random_member/2 random_permutation/2".split(" ");"undefined"!==typeof module?module.exports=function(k){a=k;new a.type.Module("random",y(),z)}:new a.type.Module("random",y(),z)})(pl);
(function(a){var y=function(){return{"time/1":function(l,f,k){k=k.args[0];if(a.type.is_variable(k))l.throwError(a.error.instantiation(l.level));else if(a.type.is_callable(k)){var n=l.points;l.points=[new a.type.State(k,f.substitution,f)];var r=Date.now(),u=a.statistics.getCountTerms(),x=l.total_steps;l.__calls.unshift(function(k){var m=Date.now(),y=a.statistics.getCountTerms(),z=l.total_steps,A=l.points;l.points=n;if(a.type.is_error(k))l.throwError(k.args[0]);else if(null===k)l.points=[f].concat(n),
l.__calls.shift()(null);else if(console.log("% Tau Prolog: executed in "+(m-r)+" milliseconds, "+(y-u)+" atoms created, "+(z-x)+" resolution steps performed."),!1!==k){for(m=0;m<A.length;m++)null===A[m].goal&&(A[m].goal=new a.type.Term("true",[])),A[m].substitution=A[m].substitution.apply(k),A[m].goal=f.goal.replace(new a.type.Term("time",[A[m].goal.apply(k)]));l.points=[new a.type.State(f.goal.apply(k).replace(null),k,f)].concat(A.concat(n))}})}else l.throwError(a.error.type("callable",k,l.level))},
"statistics/0":function(a,f,n){console.log("% Tau Prolog statistics");for(var l in k)console.log("%%% "+l+": "+k[l](a).toString());a.success(f)},"statistics/2":function(l,f,n){var m=n.args[0],r=n.args[1];if(a.type.is_variable(m)||a.type.is_atom(m))if(a.type.is_variable(m)||void 0!==k[m.id])if(a.type.is_variable(m)){n=[];for(var u in k)x=k[u](l),n.push(new a.type.State(f.goal.replace(new a.type.Term(",",[new a.type.Term("=",[m,new a.type.Term(u,[])]),new a.type.Term("=",[r,x])])),f.substitution,f));
l.prepend(n)}else{var x=k[m.id](l);l.prepend([new a.type.State(f.goal.replace(new a.type.Term("=",[r,x])),f.substitution,f)])}else l.throwError(a.error.domain("statistics_key",m,n.indicator));else l.throwError(a.error.type("atom",m,n.indicator))}}},z=["time/1","statistics/0","statistics/2"],k={atoms:function(l){return new a.type.Num(a.statistics.getCountTerms(),!1)},clauses:function(l){var f=0,k;for(k in l.session.rules)l.session.rules[k]instanceof Array&&(f+=l.session.rules[k].length);for(k=0;k<
l.session.modules.length;k++)for(var m=a.module[l.session.modules[k]],r=0;r<m.exports.length;r++){var u=m.rules[m.exports[r]];u instanceof Array&&(f+=u.length)}return new a.type.Num(f,!1)},cputime:function(l){return new a.type.Num(l.cpu_time,!1)},epoch:function(l){return new a.type.Num(l.epoch,!1)},inferences:function(l){return new a.type.Num(l.total_steps,!1)},modules:function(l){return new a.type.Num(l.session.modules.length,!1)},predicates:function(l){for(var f=Object.keys(l.session.rules).length,
k=0;k<l.session.modules.length;k++)f+=a.module[l.session.modules[k]].exports.length;return new a.type.Num(f,!1)},runtime:function(k){return new a.type.Term(".",[new a.type.Num(k.cpu_time,!1),new a.type.Term(".",[new a.type.Num(k.cpu_time_last,!1),new a.type.Term("[]",[])])])},threads:function(k){return new a.type.Num(k.session.total_threads,!1)}};"undefined"!==typeof module?module.exports=function(k){a=k;new a.type.Module("statistics",y(),z)}:new a.type.Module("statistics",y(),z)})(pl);
(function(a){var y=function(){return{"global/1":function(k,l,f){k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[f.args[0],new a.type.JSValue(a.__env)])),l.substitution,l)])},"apply/3":[new a.type.Rule(new a.type.Term("apply",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")]),new a.type.Term(",",[new a.type.Term("global",[new a.type.Var("G")]),new a.type.Term("apply",[new a.type.Var("G"),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")])]))],"apply/4":function(k,
l,f){var n=f.args[0],m=f.args[1],r=f.args[2],u=f.args[3];a.type.is_variable(n)||a.type.is_variable(m)||a.type.is_variable(r)?k.throwError(a.error.instantiation(f.indicator)):a.type.is_atom(m)||a.type.is_js_object(m)&&"function"===typeof m.value?a.type.is_list(r)||k.throwError(a.error.type("list",r,f.indicator)):k.throwError(a.error.type("atom_or_JSValueFUNCTION",m,f.indicator));n=n.toJavaScript();m=a.type.is_atom(m)?n[m.id]:m.toJavaScript();if("function"===typeof m){for(var x=r,y,z=[];"./2"===x.indicator;){y=
x.args[0].toJavaScript();if(void 0===y){k.throwError(a.error.domain("javascript_object",x.args[0],f.indicator));return}z.push(y);x=x.args[1]}if(a.type.is_variable(x))k.throwError(a.error.instantiation(f.indicator));else if("[]/0"!==x.indicator)k.throwError(a.error.type("list",r,f.indicator));else{try{var H=m.apply(n,z)}catch(I){k.throwError(a.error.javascript(I.toString(),f.indicator));return}H=a.fromJavaScript.apply(H);k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[H,u])),l.substitution,
l)])}}},"prop/2":[new a.type.Rule(new a.type.Term("prop",[new a.type.Var("X"),new a.type.Var("Y")]),new a.type.Term(",",[new a.type.Term("global",[new a.type.Var("G")]),new a.type.Term("prop",[new a.type.Var("G"),new a.type.Var("X"),new a.type.Var("Y")])]))],"prop/3":function(k,l,f){var n=f.args[0],m=f.args[1],r=f.args[2];if(a.type.is_variable(n))k.throwError(a.error.instantiation(f.indicator));else if(a.type.is_variable(m)||a.type.is_atom(m))if(a.type.is_atom(m))f=n.toJavaScript()[m.id],void 0!==
f&&(f=a.fromJavaScript.apply(f),k.prepend([new a.type.State(l.goal.replace(new a.type.Term("=",[f,r])),l.substitution,l)]));else{f=n.toJavaScript();n=[];for(var u in f)if(f.hasOwnProperty(u)){var x=a.fromJavaScript.apply(f[u]);n.push(new a.type.State(l.goal.replace(new a.type.Term(",",[new a.type.Term("=",[x,r]),new a.type.Term("=",[new a.type.Term(u,[]),m])])),l.substitution,l))}k.prepend(n)}else k.throwError(a.error.type("atom",m,f.indicator))}}},z=["global/1","apply/3","apply/4","prop/2","prop/3"];
a.type.is_js_object=function(k){return k instanceof a.type.JSValue};a.type.order.push(a.type.JSValue);a.type.JSValue=function(a){this.value=a};a.type.JSValue.prototype.toString=function(){return"JSValue"+(typeof this.value).toUpperCase()};a.type.JSValue.prototype.clone=function(){return new a.type.JSValue(this.value)};a.type.JSValue.prototype.equals=function(k){return a.type.is_js_object(k)&&this.value===k.value};a.type.JSValue.prototype.rename=function(a){return this};a.type.JSValue.prototype.variables=
function(){return[]};a.type.JSValue.prototype.apply=function(a){return this};a.type.JSValue.prototype.unify=function(k,l){return a.type.is_js_object(k)&&this.value===k.value?new a.type.State(k,new a.type.Substitution):null};a.type.JSValue.prototype.interpret=function(k){return a.error.instantiation(k)};a.type.JSValue.prototype.compare=function(a){if(this.value===a.value)return 0;if(this.value<a.value)return-1;if(this.value>a.value)return 1};a.type.JSValue.prototype.toJavaScript=function(){return this.value};
a.fromJavaScript.conversion.any=function(k){return new a.type.JSValue(k)};a.error.javascript=function(k,l){return new a.type.Term("error",[new a.type.Term("javascript_error",[new a.type.Term(k)]),a.utils.str_indicator(l)])};"undefined"!==typeof module?module.exports=function(k){a=k;new a.type.Module("js",y(),z)}:new a.type.Module("js",y(),z)})(pl);
