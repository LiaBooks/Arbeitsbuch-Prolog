var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,q,g){h!=Array.prototype&&h!=Object.prototype&&(h[q]=g.value)};$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(h,q,g,l){if(q){g=$jscomp.global;h=h.split(".");for(l=0;l<h.length-1;l++){var m=h[l];m in g||(g[m]={});g=g[m]}h=h[h.length-1];l=g[h];q=q(l);q!=l&&null!=q&&$jscomp.defineProperty(g,h,{configurable:!0,writable:!0,value:q})}};$jscomp.polyfill("Math.sign",function(h){return h?h:function(h){h=Number(h);return 0===h||isNaN(h)?h:0<h?1:-1}},"es6","es3");$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");
$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6","es3");
(function(){function h(a){var c=[];a.replace(E,function(a,d,k,f,r,g,l,h,m,p,q,t,u,F,v,x){switch(!0){case void 0!==m:return c.push(parseInt(m,16)),"";case void 0!==p:return c.push(parseInt(p,8)),"";case void 0!==q:case void 0!==t:case void 0!==u:case void 0!==F:return c.push(a.substr(1).charCodeAt(0)),"";case void 0!==x:return c.push(x.charCodeAt(0)),"";case void 0!==v:throw"escape";default:return c.push(G[a]),""}});return c}function q(a){return C(h(a),function(a){return String.fromCharCode(a)}).join("")}
function g(a){var c=a.substr(2);switch(a.substr(0,2).toLowerCase()){case "0x":return parseInt(c,16);case "0b":return parseInt(c,2);case "0o":return parseInt(c,8);case "0'":return h(c)[0];default:return parseFloat(a)}}function l(a,c,b,e){if("0"==e)return m(a,c,b);if(!c[b])return{type:0,value:d.error.syntax(c[b-1],"expression expected")};var k=a.__get_max_priority(),n=a.__get_next_priority(e);var r=b;if(c[b]&&"atom"==c[b].name&&a.__lookup_operator_classes(e,c[b].value)){var g=c[b];b++;var h=a.__lookup_operator_classes(e,
g.value);if(-1<x(h,"fy")||-1<x(h,"fx")){var p=c[b];if("-"==g.value&&p&&"number"==p.name&&!p.blank)return{value:new t(-p.value,p.float),len:++b,type:1}}if(-1<x(h,"fy"))return r=l(a,c,b,e),0!=r.type?{value:new f(g.value,[r.value]),len:r.len,type:1}:r;if(-1<x(h,"fx"))return r=l(a,c,b,n),0!=r.type?{value:new f(g.value,[r.value]),len:r.len,type:1}:r}r=l(a,c,r,n);if(0!==r.type){b=r.len;g=c[b];if(!g)return r;if(("atom"==g.name||"compound"==g.name)&&a.__lookup_operator_classes(e,g.value)){n=(p="compound"==
g.name)?k:n;k=p?k:e;p&&a.__push_comma_state(!1);h=a.__lookup_operator_classes(e,g.value);if(-1<x(h,"xf"))return p&&a.__pop_comma_state(),{value:new f(g.value,[r.value]),len:++r.len};if(-1<x(h,"xfx"))return h=l(a,c,b+1,n),p&&a.__pop_comma_state(),0!=h.type?{value:new f(g.value,[r.value,h.value]),len:h.len,type:1}:h;if(-1<x(h,"xfy"))return h=l(a,c,b+1,k),p&&a.__pop_comma_state(),0!=h.type?{value:new f(g.value,[r.value,h.value]),len:h.len,type:1}:h;for(p&&a.__pop_comma_state();;)if(b=r.len,(g=c[b])&&
("atom"==g.name||"compound"==g.name)&&a.__lookup_operator_classes(e,g.value))if(h=a.__lookup_operator_classes(e,g.value),-1<x(h,"yf"))r={value:new f(g.value,[r.value]),len:++b,type:1};else if(-1<x(h,"yfx")){h=l(a,c,++b,n);if(0==h.type){r=h;break}b=h.len;r={value:new f(g.value,[r.value,h.value]),len:b,type:1}}else break;else break}}return r}function m(a,c,b){if(!c[b])return{type:0,value:d.error.syntax(c[b],"expression expected")};var e=c[b++];switch(e.name){case "variable":return{value:new y(e.value),
len:b,type:1};case "cut":return{value:new f(e.value),len:b,type:1};case "string":switch(a.flag.double_quotes.id){case "codes":var k=new f("[]");for(a=e.value.length-1;0<=a;a--)k=new f(".",[new t(e.value[a],!1),k]);break;case "chars":k=new f("[]");for(a=e.value.length-1;0<=a;a--)k=new f(".",[new f(String.fromCharCode(e.value[a])),k]);break;case "atom":k="";for(a=0;a<e.value.length;a++)k+=String.fromCharCode(e.value[a]);k=new f(k)}return{value:k,len:b,type:1};case "number":return{value:new t(e.value,
e.float),len:b,type:1};case "l_bracket":a.__push_comma_state(!0);k=[];var n=l(a,c,b,a.__get_max_priority());a.__pop_comma_state();0!=n.type&&(k=[n.value],b=n.len);if(c[b]&&"r_bracket"==c[b].name)return{value:new f("{}",k),len:++b,type:1};e=c[b];return{type:0,value:d.error.syntax(e?e:c[b-1],"} expected",!e)};case "l_paren":a.__push_comma_state(!0);n=l(a,c,b,a.__get_max_priority());a.__pop_comma_state();if(0!=n.type){b=n.len;if(c[b]&&"r_paren"==c[b].name)return n.len=++b,n;e=c[b];return{type:0,value:d.error.syntax(e?
e:c[b-1],", or ) expected",!e)}}return n;case "l_brace":var r=a.__get_max_priority();a.__push_comma_state(!1);n=l(a,c,b,r);k=[];e=new f("[]");if(0!=n.type){k.push(n.value);for(b=n.len;c[b]&&"atom"==c[b].name&&","==c[b].value;)if(n=l(a,c,++b,r),0!=n.type)k.push(n.value),b=n.len;else return a.__pop_comma_state(),{type:0,value:d.error.syntax(c[b],", or ] expected")};if(c[b]&&"bar"==c[b].name)if(b++,n=l(a,c,b,r),0!=n.type)e=n.value,b=n.len;else return a.__pop_comma_state(),e=c[b],{type:0,value:d.error.syntax(e?
e:c[b-1],"expression expected",!e)}}a.__pop_comma_state();if(c[b]&&"r_brace"==c[b].name){b++;for(a=k.length-1;0<=a;a--)e=new f(".",[k[a],e]);return{value:e,len:b,type:1}}e=c[b];return{type:0,value:d.error.syntax(e?e:c[b-1],k.length?"|, ] or , expected":"] expected",!e)};case "atom":return"-"===e.value&&c[b]&&"number"===c[b].name&&!c[b].blank?{value:new t(-c[b].value,c[b].float),len:++b,type:1}:{value:new f(e.value),len:b,type:1};case "compound":b++;r=a.__get_max_priority();a.__push_comma_state(!1);
n=l(a,c,b,r);if(0!=n.type){k=[n.value];for(b=n.len;c[b]&&"atom"==c[b].name&&","==c[b].value;)if(n=l(a,c,++b,r),0!=n.type)k.push(n.value),b=n.len;else return a.__pop_comma_state(),n;a.__pop_comma_state();if(c[b]&&"r_paren"==c[b].name)return b++,{value:new f(e.value,k),len:b,type:1};e=c[b];return{type:0,value:d.error.syntax(e?e:c[b-1],", or ) expected",!e)}}a.__pop_comma_state();return n}return{type:0,value:d.error.syntax(e,"unexpected token")}}function u(a,c,b){var e=l(a,c,b,a.__get_max_priority());
if(0!=e.type){b=e.len;if(c[b]&&"point"==c[b].name)return b++,d.type.is_term(e.value)?":-/2"==e.value.indicator?{value:new A(e.value.args[0],e.value.args[1]),len:b,type:1}:"--\x3e/2"==e.value.indicator?(c=new A(e.value.args[0],e.value.args[1]),c=c.rename(a),e=a.next_free_variable(),a=v(c.body,e,a),a.error?a=a.value:(c.body=a.value,c.head.args=c.head.args.concat([e,a.variable]),c.head=new f(c.head.id,c.head.args),a=c),{value:a,len:b,type:d.type.is_rule(a)?1:0}):{value:new A(e.value,null),len:b,type:1}:
{type:0,value:d.error.syntax(c[b],"callable expected")};a=c[b];return{type:0,value:d.error.syntax(a?a:c[b-1],". or expression expected",!a)}}return e}function v(a,c,b){if(d.type.is_term(a)&&",/2"===a.indicator){c=v(a.args[0],c,b);if(c.error)return c;a=v(a.args[1],c.variable,b);return a.error?a:{value:new f(",",[c.value,a.value]),variable:a.variable,error:!1}}if(d.type.is_term(a)&&"{}/1"===a.indicator)return{value:a.args[0],variable:c,error:!1};if(d.type.is_empty_list(a))return{value:new f("true",
[]),variable:c,error:!1};if(d.type.is_list(a)){b=b.next_free_variable();for(var e=a,k;"./2"==e.indicator;)k=e,e=e.args[1];return d.type.is_variable(e)?{value:d.error.instantiation("DCG"),variable:c,error:!0}:d.type.is_empty_list(e)?(k.args[1]=b,{value:new f("\x3d",[c,a]),variable:b,error:!1}):{value:d.error.type("list",a,"DCG"),variable:c,error:!0}}return d.type.is_callable(a)?(b=b.next_free_variable(),a.args=a.args.concat([c,b]),{value:a,variable:b,error:!1}):{value:d.error.type("callable",a,"DCG"),
variable:c,error:!0}}function B(a){if(!/^(([0-9]+)|([0-9]+\.[0-9]+)|(0b[01]+)|(0x[0-9a-f]+)|(0o[0-7]+))$/i.test(a))return!1;if("0"===a.charAt(0)&&2<a.length){var c=a.substr(2);switch(a.charAt(1).toLowerCase()){case "b":return new t(parseInt(c,2),!1);case "o":return new t(parseInt(c,8),!1);case "x":return new t(parseInt(c,16),!1)}}return-1!==x(a,".")?new t(parseFloat(a),!0):new t(parseInt(a),!1)}function y(a){this.id=a}function t(a,c){this.value=(this.is_float=void 0!==c?c:parseInt(a)!==a)?a:parseInt(a)}
function f(a,c){this.id=a;this.args=c||[];this.indicator=a+"/"+this.args.length}function z(a){this.links=a=a||{}}function p(a,c,b){c=c||new z;this.goal=a;this.substitution=c;this.parent=b||null}function A(a,c){this.head=a;this.body=c}function w(a){a=void 0===a||0>=a?1E3:a;this.rules={};this.rename=0;this.level="top_level/0";this.points=[];this.variables=[];this.renamed_variables={};this.public=[];this.current_limit=this.limit=a;this.flag={bounded:d.flag.bounded.value,max_integer:d.flag.max_integer.value,
min_integer:d.flag.min_integer.value,integer_rounding_function:d.flag.integer_rounding_function.value,char_conversion:d.flag.char_conversion.value,debug:d.flag.debug.value,max_arity:d.flag.max_arity.value,unknown:d.flag.unknown.value,double_quotes:d.flag.double_quotes.value};this.warnings=[];this.__loaded_modules=[];this.__char_conversion={};this.__operators={1200:{":-":["fx","xfx"],"--\x3e":["xfx"],"?-":["fx"]},1100:{";":["xfy"]},1050:{"-\x3e":["xfy"]},1E3:{",":["xfy"]},900:{"\\+":["fy"]},700:{"\x3d":["xfx"],
"\\\x3d":["xfx"],"\x3d\x3d":["xfx"],"\\\x3d\x3d":["xfx"],"@\x3c":["xfx"],"@\x3d\x3c":["xfx"],"@\x3e":["xfx"],"@\x3e\x3d":["xfx"],"\x3d..":["xfx"],is:["xfx"],"\x3d:\x3d":["xfx"],"\x3d\\\x3d":["xfx"],"\x3c":["xfx"],"\x3d\x3c":["xfx"],"\x3e":["xfx"],"\x3e\x3d":["xfx"]},500:{"+":["yfx"],"-":["yfx"],"/\\":["yfx"],"\\/":["yfx"]},400:{"*":["yfx"],"/":["yfx"],"//":["yfx"],rem:["yfx"],mod:["yfx"],"\x3c\x3c":["yfx"],"\x3e\x3e":["yfx"]},200:{"**":["xfx"],"^":["xfy"],"-":["fy"],"\\":["fy"]}};this.__stack_comma=
[!0];this.__minus_operator=!0;this.__calls=[]}var x=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var b=a.length,d=0;d<b;d++)if(c===a[d])return d;return-1};var H=function(a,c){if(0!==a.length){for(var b=a[0],d=a.length,k=1;k<d;k++)b=c(b,a[k]);return b}};var C=Array.prototype.map?function(a,c){return a.map(c)}:function(a,c){for(var b=[],d=a.length,k=0;k<d;k++)b.push(c(a[k]));return b};var E=/(\\a)|(\\b)|(\\f)|(\\n)|(\\r)|(\\t)|(\\v)|\\x([0-9a-fA-F]+)\\|\\([0-7]+)\\|(\\\\)|(\\')|(\\")|(\\`)|(\\.)|(.)/g,
G={"\\a":7,"\\b":8,"\\f":12,"\\n":10,"\\r":13,"\\t":9,"\\v":11},D=function(){function a(a,c){return"on"===a.flag.char_conversion.id?c.replace(/./g,function(b){return a.__char_conversion[b]||b}):c}var c={whitespace:/^\s*(?:(?:%.*)|(?:\/\*(?:\n|\r|.)*?\*\/)|(?:\s+))\s*/,variable:/^(?:[A-Z_][a-zA-Z0-9_]*)/,point:/^\./,compound:/^(([a-z][0-9a-zA-Z_]*|[#\$&\*\+\-\.\/:<=>\?@\^~\\]+|'(?:[^']*?(?:\\(?:x?\d+)?\\)*(?:'')*(?:\\')*)*')\()/,atom:/^(,|;|[a-z][0-9a-zA-Z_]*|[#\$&\*\+\-\.\/:<=>\?@\^~\\]+|'(?:[^']*?(?:\\(?:x?\d+)?\\)*(?:'')*(?:\\')*)*')/,
number:/^(?:0o[0-7]+|0x[0-9a-f]+|0b[01]+|0'(?:''|\\[abfnrtv\\'"`]|\\x?\d+\\|.)|\d+(?:\.\d+(?:e[+-]?\d+)?)?)/i,string:/^(?:"([^"]|""|\\")*"|`([^`]|``|\\`)*`)/,l_brace:/^(?:\[)/,r_brace:/^(?:\])/,l_bracket:/^(?:\{)/,r_bracket:/^(?:\})/,bar:/^(?:\|)/,l_paren:/^(?:\()/,r_paren:/^(?:\))/,cut:/^(?:!)/,error:/^./};return function(b,d,k,f,r){var e=[],n=k,l=!1;for(d=a(b,d.substr(k));""!==d;){b=[];for(var p in c)c.hasOwnProperty(p)&&(k=c[p].exec(d),b.push({value:k?k[0]:"",name:p,matches:k}));b=H(b,function(a,
b){return a.value.length>=b.value.length?a:b});b.start=f;b.line=r;d=d.replace(b.value,"");f+=b.value.length;n+=b.value.length;k=!1;switch(b.name){case "compound":b.value=b.value.substr(0,b.value.length-1).replace(/^'(.*)'$/,function(a,b){return b});k=!0;break;case "atom":"'"==b.value.charAt(0)&&(b.value=q(b.value.substr(1,b.value.length-2).replace(/''/g,"'").replace(/\\\n/g,"")));break;case "number":b.float=null!==b.value.match(/[.eE]/);b.value=g(b.value);b.blank=l;break;case "string":"`"==b.value.charAt(0)?
b.value=b.value.replace(/``/g,"`"):'"'==b.value.charAt(0)&&(b.value=b.value.replace(/""/g,'"'));b.value=h(b.value.substr(1,b.value.length-2));break;case "point":return e.push(b),{tokens:e,len:n,start:f,line:r};case "whitespace":l=!0;if(b=b.value.match(/\n/g))r+=b.length,f=0;continue}e.push(b);k&&e.push({start:f-1,line:r,value:"(",name:"l_paren"});l=!1}return{tokens:e,len:n,start:f,line:r}}}();y.prototype.toString=function(){return this.id};t.prototype.toString=function(){return this.is_float&&-1===
x(this.value.toString(),".")?this.value+".0":this.value.toString()};f.prototype.toString=function(){if(d.type.is_operator(this))return 0===this.args.length?this.id:1===this.args.length?this.id+"("+this.args[0]+")":"("+this.args[0]+this.id+this.args[1]+")";switch(this.indicator){case "[]/0":case "!/0":return this.id;case "./2":for(var a="["+this.args[0].toString(),c=this.args[1];"./2"===c.indicator;)a+=", "+c.args[0].toString(),c=c.args[1];"[]/0"!==c.indicator&&(a+="|"+c.toString());return a+"]";case ",/2":case ";/2":return"("+
this.args[0]+this.id+this.args[1]+")";default:a=this.id;c=a.charAt(0);if(c!==c.toLowerCase()||c===c.toUpperCase())a="'"+a+"'";return a+(this.args.length?"("+this.args.join(", ")+")":"")}};z.prototype.toString=function(){var a="{",c;for(c in this.links)this.links.hasOwnProperty(c)&&("{"!=a&&(a+=", "),a+=c+"/"+this.links[c].toString());return a+"}"};p.prototype.toString=function(){return null===this.goal?"\x3c"+this.substitution.toString()+"\x3e":"\x3c"+this.goal.toString()+", "+this.substitution.toString()+
"\x3e"};A.prototype.toString=function(){return this.body?this.head+" :- "+this.body+".":this.head+"."};y.prototype.clone=function(){return new y(this.id)};t.prototype.clone=function(){return new t(this.value,this.is_float)};f.prototype.clone=function(){return 0===this.args.length?this:new f(this.id,C(this.args,function(a){return a.clone()}))};z.prototype.clone=function(){var a={},c;for(c in this.links)this.links.hasOwnProperty(c)&&(a[c]=this.links[c].clone());return new z(a)};p.prototype.clone=function(){return new p(this.goal.clone(),
this.substitution.clone(),this.parent)};A.prototype.clone=function(){return new A(this.head.clone(),null!==this.body?this.body.clone():null)};y.prototype.equals=function(a){return d.type.is_variable(a)&&this.id===a.id};t.prototype.equals=function(a){return d.type.is_number(a)&&this.value===a.value&&this.is_float===a.is_float};f.prototype.equals=function(a){if(!d.type.is_term(a)||this.indicator!==a.indicator)return!1;for(var c=0;c<this.args.length;c++)if(!this.args[c].equals(a.args[c]))return!1;return!0};
z.prototype.equals=function(a){var c;if(!d.type.is_substitution(a))return!1;for(c in this.links)if(this.links.hasOwnProperty(c)&&(!a.links[c]||!this.links[c].equals(a.links[c])))return!1;for(c in a.links)if(a.links.hasOwnProperty(c)&&!this.links[c])return!1;return!0};p.prototype.equals=function(a){return d.type.is_state(a)&&this.goal.equals(a.goal)&&this.substitution.equals(a.substitution)&&this.parent==a.parent};A.prototype.equals=function(a){return d.type.is_rule(a)&&this.head.equals(a.head)&&(null===
this.body&&null===a.body||null!==this.body&&this.body.equals(a.body))};y.prototype.rename=function(a){return a.get_free_variable(this)};t.prototype.rename=function(a){return this};f.prototype.rename=function(a){return 0===this.args.length?this:new f(this.id,C(this.args,function(c){return c.rename(a)}))};A.prototype.rename=function(a){return new A(this.head.rename(a),null!==this.body?this.body.rename(a):null)};y.prototype.variables=function(){return[this.id]};t.prototype.variables=function(){return[]};
f.prototype.variables=function(){return[].concat.apply([],C(this.args,function(a){return a.variables()}))};A.prototype.variables=function(){return null===this.body?this.head.variables():this.head.variables().concat(this.body.variables())};y.prototype.apply=function(a){return a.lookup(this.id)?a.lookup(this.id):this};t.prototype.apply=function(a){return this};f.prototype.apply=function(a){return 0===this.args.length?this:new f(this.id,C(this.args,function(c){return c.apply(a)}))};A.prototype.apply=
function(a){return new A(this.head.apply(a),null!==this.body?this.body.apply(a):null)};z.prototype.apply=function(a){var c,b={};for(c in this.links)this.links.hasOwnProperty(c)&&(b[c]=this.links[c].apply(a));for(c in a.links)a.links.hasOwnProperty(c)&&(b[c]=a.links[c]);return new z(b)};y.prototype.unify=function(a,c){if(c&&-1!==x(a.variables(),this.id)&&!d.type.is_variable(a))return null;c={};c[this.id]=a;return new p(a,new z(c))};t.prototype.unify=function(a,c){return d.type.is_number(a)&&this.value==
a.value&&this.is_float==a.is_float?new p(a,new z):null};f.prototype.unify=function(a,c){if(d.type.is_term(a)&&this.indicator==a.indicator){for(var b=new z,e=0;e<this.args.length;e++){var k=d.unify(this.args[e].apply(b),a.args[e].apply(b),c);if(null===k)return null;b=b.apply(k.substitution)}return new p(this.apply(b),b)}return null};f.prototype.select=function(){return",/2"===this.indicator?this.args[0].select():this};f.prototype.replace=function(a){return",/2"===this.indicator?",/2"===this.args[0].indicator?
new f(",",[this.args[0].replace(a),this.args[1]]):null===a?this.args[1]:new f(",",[a,this.args[1]]):a};f.prototype.search=function(a){return",/2"===this.indicator?this.args[0].search(a)||this.args[1].search(a):this===a};w.prototype.add_rule=function(a){this.rules[a.head.indicator]||(this.rules[a.head.indicator]=[]);this.rules[a.head.indicator].push(a);return!0};w.prototype.run_directive=function(a){return d.type.is_directive(a)?(d.directive[a.indicator](this,a),!0):!1};w.prototype.__push_comma_state=
function(a){this.__stack_comma.push(a);a?this.__operators[1E3][","]=["xfy"]:delete this.__operators[1E3][","]};w.prototype.__pop_comma_state=function(){this.__stack_comma.pop();this.__stack_comma[this.__stack_comma.length-1]?this.__operators[1E3][","]=["xfy"]:delete this.__operators[1E3][","]};w.prototype.__get_max_priority=function(){var a=0,c;for(c in this.__operators)if(this.__operators.hasOwnProperty(c)){var b=parseInt(c);b>a&&(a=b)}return a.toString()};w.prototype.__get_next_priority=function(a){var c=
0;a=parseInt(a);for(var b in this.__operators)if(this.__operators.hasOwnProperty(b)){var d=parseInt(b);d>c&&d<a&&(c=d)}return c.toString()};w.prototype.__lookup_operator_classes=function(a,c){return this.__operators[a]?this.__operators[a][c]||!1:!1};w.prototype.throw_warning=function(a){this.warnings.push(a)};w.prototype.add_goal=function(a){this.points.push(new p(a,new z,null,null));this.variables=a.variables()};w.prototype.consult=function(a){this.__stack_comma=[!0];if("string"===typeof a){var c=
a.length;if(".pl"===a.substring(c-3,c)&&document.getElementById(a)){c=document.getElementById(a);var b=c.getAttribute("type");null!==b&&"text/prolog"===b.replace(/ /g,"").toLowerCase()&&(a=c.text)}}else if(a.nodeName)switch(a.nodeName.toLowerCase()){case "input":case "textarea":a=a.value;break;default:a=a.innerHTML}else return!1;a:{this.__stack_comma=[!0];c=1;var d=b=0;do{d=D(this,a,d,b,c);var k=d.tokens;c=d.line;b=d.start;d=d.len;if(0===k.length)break;k=u(this,k,0);if(0!==k.type){if(k=null===k.value.body&&
":-/1"===k.value.head.indicator?this.run_directive(k.value.head.args[0]):this.add_rule(k.value),!k){a=new f("throw",[k.value]);break a}}else{a=new f("throw",[k.value]);break a}}while(a.length!=d);a=!0}return a};w.prototype.query=function(a){this.__stack_comma=[!0];a:{this.__stack_comma=[!0];var c=1,b=0,e=0;do{var k=D(this,a,e,b,c);var n=k.tokens;c=k.line;b=k.start;e=k.len;if(0===n.length)break;var r=l(this,n,0,this.__get_max_priority());if(0!==r.type)if(k=r.len,n[k]&&"point"===n[k].name)this.add_goal(r.value);
else{a=n[k];n=new f("throw",[d.error.syntax(a?a:n[k-1],". or expression expected",!a)]);break a}else{n=new f("throw",[r.value]);break a}}while(a.length!=e);n=!0}return n};w.prototype.get_free_variable=function(a){if("_"===a.id||void 0===this.renamed_variables[a.id]){for(this.rename++;-1!==x(this.variables,d.format_variable(this.rename));)this.rename++;if("_"===a.id)return new y(d.format_variable(this.rename));this.renamed_variables[a.id]=d.format_variable(this.rename)}return new y(this.renamed_variables[a.id])};
w.prototype.next_free_variable=function(){for(this.rename++;-1!==x(this.variables,d.format_variable(this.rename));)this.rename++;return new y(d.format_variable(this.rename))};w.prototype.is_public_predicate=function(a){return-1!==x(this.public,a)};w.prototype.copy_context=function(a){this.rules=a.rules;this.rename=a.rename;this.level=a.level;this.points=a.points;this.variables=a.variables;this.renamed_variables=a.renamed_variables;this.public=a.public;this.current_limit=this.limit=a.limit;this.flag=
a.flag;this.warnings=a.warnings;this.__loaded_modules=a.__loaded_modules;this.__char_conversion=a.__char_conversion;this.__operators=a.__operators;this.__stack_comma=a.__stack_comma;this.__minus_operator=a.__minus_operator};w.prototype.prepend=function(a){this.points=a.concat(this.points)};w.prototype.success=function(a){this.prepend([new p(a.goal.replace(null),a.substitution,a)])};w.prototype.throwError=function(a){this.prepend([new p(new f("throw",[a]),new z,null,null)])};w.prototype.step=function(){if(0!==
this.points.length){var a=!1,c=this.points.shift();if(d.type.is_term(c.goal)){var b=c.goal.select(),e=[];if(null!==b)if(d.type.is_builtin(b))this.__call_indicator=b.indicator,a=d.predicate[b.indicator](this,c,b);else if(this.rules[b.indicator]instanceof Function)a=this.rules[b.indicator](this,c,b);else if(this.rules[b.indicator]){var k=new f("$tau:level",[new f(b.indicator,[])]),n=new f("$tau:level",[new f(this.level,[])]),r;for(r in this.rules[b.indicator])if(this.rules[b.indicator].hasOwnProperty(r)){var g=
this.rules[b.indicator][r];this.renamed_variables={};g=g.rename(this);null!==g.body&&(g.body=new f(",",[k,new f(",",[g.body,n])]));var h=d.unify(b,g.head);null!==h&&(h.goal=c.goal.replace(g.body),null!==h.goal&&(h.goal=h.goal.apply(h.substitution)),h.substitution=c.substitution.apply(h.substitution),h.parent=c,e.push(h))}this.prepend(e)}else this.is_public_predicate(b.indicator)||("error"===this.flag.unknown.id?this.throwError(d.error.existence("procedure",b.indicator,this.level)):"warning"===this.flag.unknown.id&&
this.throw_warning("unknown procedure "+b.indicator+" (from "+this.level+")"))}else d.type.is_variable(c.goal)?this.throwError(d.error.instantiation(this.level)):this.throwError(d.error.type("callable",c.goal,this.level));return a}};w.prototype.answer=function(a){a=a||function(a){};this.__calls.push(a);1<this.__calls.length||this.again()};w.prototype.answers=function(a,c){answers=c||1E3;var b=this;0>=c||this.answer(function(d){a(d);!1!==d&&b.answers(a,c-1)})};w.prototype.again=function(){for(var a;0<
this.__calls.length;){this.warnings=[];for(this.current_limit=this.limit;0<this.current_limit&&0<this.points.length&&null!==this.points[0].goal&&!d.type.is_error(this.points[0].goal);)if(this.current_limit--,!0===this.step())return;var c=this.__calls.shift();0>=this.current_limit?c(null):0===this.points.length?c(!1):(d.type.is_error(this.points[0].goal)?(a=this.points.shift().goal,this.points=[]):(a=this.points.shift().substitution,d.type.is_substitution(a)&&(a=a.filter(this.variables))),c(a))}};
y.prototype.interpret=function(a){return d.error.instantiation(a.level)};t.prototype.interpret=function(a){return this};f.prototype.interpret=function(a){return d.type.is_unitary_list(this)?this.args[0].interpret(a):d.operate(a,this)};y.prototype.compose=function(a,c){return this.id!==c&&a.lookup(this.id)?a.lookup(this.id).compose(a,this.id):this};t.prototype.compose=function(a,c){return this};f.prototype.compose=function(a,c){return new f(this.id,C(this.args,function(b){return b.compose(a,c)}))};
z.prototype.compose=function(a){var c={},b;for(b in this.links)this.links.hasOwnProperty(b)&&(c[b]=this.links[b].compose(a,b));return new z(c)};y.prototype.compare=function(a){return this.id<a.id?-1:this.id>a.id?1:0};t.prototype.compare=function(a){if(this.value===a.value&&this.is_float===a.is_float)return 0;if(this.value<a.value||this.value===a.value&&this.is_float&&!a.is_float)return-1;if(this.value>a.value)return 1};f.prototype.compare=function(a){if(this.args.length<a.args.length||this.args.length===
a.args.length&&this.id<a.id)return-1;if(this.args.length>a.args.length||this.args.length===a.args.length&&this.id>a.id)return 1;for(var c=0;c<this.args.length;c++){var b=d.compare(this.args[c],a.args[c]);if(0!==b)return b}return 0};z.prototype.lookup=function(a){return this.links[a]?this.links[a]:null};z.prototype.filter=function(a){var c={},b;for(b in a)if(a.hasOwnProperty(b)){var d=a[b];this.links[d]&&(c[d]=this.links[d])}return new z(c)};z.prototype.exclude=function(a){var c={},b;for(b in this.links)this.links.hasOwnProperty(b)&&
-1===x(a,b)&&(c[b]=this.links[b]);return new z(c)};z.prototype.add=function(a,c){var b=new z;b.links[a]=c;return this.apply(b)};y.prototype.compile=function(){return'new pl.type.Var("'+this.id.toString()+'")'};t.prototype.compile=function(){return"new pl.type.Num("+this.value.toString()+", "+this.is_float.toString()+")"};f.prototype.compile=function(){return'new pl.type.Term("'+this.id.replace(/"/g,'\\"')+'", ['+C(this.args,function(a){return a.compile()})+"])"};A.prototype.compile=function(){return"new pl.type.Rule("+
this.head.compile()+", "+(null===this.body?"null":this.body.compile())+")"};w.prototype.compile=function(){var a=[],c;for(c in this.rules)if(this.rules.hasOwnProperty(c)){var b=this.rules[c];var d=[];var k='"'+c+'": [';for(var f=0;f<b.length;f++)d.push(b[f].compile());k+=d.join();k+="]";a.push(k)}return"{"+a.join()+"};"};var d={module:{},type:{Var:y,Num:t,Term:f,Rule:A,State:p,Module:function(a,c){this.id=a;this.rules=c;d.module[a]=this},Session:w,Substitution:z,order:[y,t,f],compare:function(a,c){a=
x(d.type.order,a.constructor);c=x(d.type.order,c.constructor);return a<c?-1:a>c?1:0},is_substitution:function(a){return a instanceof z},is_state:function(a){return a instanceof p},is_rule:function(a){return a instanceof A},is_variable:function(a){return a instanceof y},is_anonymous_var:function(a){return a instanceof y&&"_"===a.id},is_callable:function(a){return a instanceof f},is_number:function(a){return a instanceof t},is_integer:function(a){return a instanceof t&&!a.is_float},is_float:function(a){return a instanceof
t&&a.is_float},is_term:function(a){return a instanceof f},is_atom:function(a){return a instanceof f&&0===a.args.length},is_atomic:function(a){return a instanceof f&&0===a.args.length||a instanceof t},is_compound:function(a){return a instanceof f&&0<a.args.length},is_list:function(a){return a instanceof f&&("[]/0"===a.indicator||"./2"===a.indicator)},is_empty_list:function(a){return a instanceof f&&"[]/0"===a.indicator},is_non_empty_list:function(a){return a instanceof f&&"./2"===a.indicator},is_fully_list:function(a){for(;a instanceof
f&&"./2"===a.indicator;)a=a.args[1];return a instanceof y||a instanceof f&&"[]/0"===a.indicator},is_instantiated_list:function(a){for(;a instanceof f&&"./2"===a.indicator;)a=a.args[1];return a instanceof f&&"[]/0"===a.indicator},is_unitary_list:function(a){return a instanceof f&&"./2"===a.indicator&&a.args[1]instanceof f&&"[]/0"===a.args[1].indicator},is_character:function(a){return a instanceof f&&1===a.id.length},is_character_code:function(a){return a instanceof t&&!a.is_float},is_operator:function(a){return a instanceof
f&&d.arithmetic.evaluation[a.indicator]},is_directive:function(a){return a instanceof f&&void 0!==d.directive[a.indicator]},is_builtin:function(a){return a instanceof f&&void 0!==d.predicate[a.indicator]},is_error:function(a){return a instanceof f&&"throw/1"===a.indicator},is_predicate_indicator:function(a){return a instanceof f&&"//2"===a.indicator&&a.args[0]instanceof f&&0===a.args[0].args.length&&a.args[1]instanceof t&&!1===a.args[1].is_float},is_flag:function(a){return a instanceof f&&0===a.args.length&&
void 0!==d.flag[a.id]},is_value_flag:function(a,c){if(!d.type.is_flag(a))return!1;for(var b in d.flag[a.id].allowed)if(d.flag[a.id].allowed.hasOwnProperty(b)&&d.flag[a.id].allowed[b].equals(c))return!0;return!1},is_modifiable_flag:function(a){return d.type.is_flag(a)&&d.flag[a.id].changeable},is_module:function(a){return a instanceof f&&"library/1"===a.indicator&&a.args[0]instanceof f&&0===a.args[0].args.length&&void 0!==d.module[a.args[0].id]}},arithmetic:{evaluation:{"e/0":{type_args:null,type_result:!0,
fn:function(a){return Math.E}},"pi/0":{type_args:null,type_result:!0,fn:function(a){return Math.PI}},"+/1":{type_args:null,type_result:null,fn:function(a,c){return a}},"-/1":{type_args:null,type_result:null,fn:function(a,c){return-a}},"\\/1":{type_args:!1,type_result:!1,fn:function(a,c){return~a}},"abs/1":{type_args:null,type_result:null,fn:function(a,c){return Math.abs(a)}},"sign/1":{type_args:null,type_result:null,fn:function(a,c){return Math.sign(a)}},"float_integer_part/1":{type_args:!0,type_result:!1,
fn:function(a,c){return parseInt(a)}},"float_fractional_part/1":{type_args:!0,type_result:!0,fn:function(a,c){return a-parseInt(a)}},"float/1":{type_args:null,type_result:!0,fn:function(a,c){return parseFloat(a)}},"floor/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.floor(a)}},"truncate/1":{type_args:!0,type_result:!1,fn:function(a,c){return parseInt(a)}},"round/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.round(a)}},"ceiling/1":{type_args:!0,type_result:!1,fn:function(a,
c){return Math.ceil(a)}},"sin/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.sin(a)}},"cos/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.cos(a)}},"tan/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.tan(a)}},"asin/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.asin(a)}},"acos/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.acos(a)}},"atan/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.atan(a)}},"exp/1":{type_args:null,
type_result:!0,fn:function(a,c){return Math.exp(a)}},"sqrt/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.sqrt(a)}},"log/1":{type_args:null,type_result:!0,fn:function(a,c){return 0<a?Math.log(a):d.error.evaluation("undefined",c.__call_indicator)}},"+/2":{type_args:null,type_result:null,fn:function(a,c,b){return a+c}},"-/2":{type_args:null,type_result:null,fn:function(a,c,b){return a-c}},"*/2":{type_args:null,type_result:null,fn:function(a,c,b){return a*c}},"//2":{type_args:null,type_result:!0,
fn:function(a,c,b){return c?a/c:d.error.evaluation("zero_division",b.__call_indicator)}},"///2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?parseInt(a/c):d.error.evaluation("zero_division",b.__call_indicator)}},"**/2":{type_args:null,type_result:!0,fn:function(a,c,b){return Math.pow(a,c)}},"\x3c\x3c/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a<<c}},"\x3e\x3e/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a>>c}},"/\\/2":{type_args:!1,type_result:!1,fn:function(a,
c,b){return a&c}},"\\//2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a|c}},"rem/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?a%c:d.error.evaluation("zero_division",b.__call_indicator)}},"mod/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?a-parseInt(a/c)*c:d.error.evaluation("zero_division",b.__call_indicator)}}}},directive:{"dynamic/1":function(a,c){var b=c.args[0];d.type.is_variable(b)?a.throwError(d.error.instantiation(c.indicator)):d.type.is_compound(b)&&
"//2"===b.indicator?d.type.is_variable(b.args[0])||d.type.is_variable(b.args[1])?a.throwError(d.error.instantiation(c.indicator)):d.type.is_atom(b.args[0])?d.type.is_integer(b.args[1])?a.public.push(c.args[0].args[0].id+"/"+c.args[0].args[1].value):a.throwError(d.error.type("integer",b.args[1],c.indicator)):a.throwError(d.error.type("atom",b.args[0],c.indicator)):a.throwError(d.error.type("predicate_indicator",b,c.indicator))},"use_module/1":function(a,c){var b=c.args[0];if(d.type.is_variable(b))a.throwError(d.error.instantiation(c.indicator));
else if(!d.type.is_term(b))a.throwError(d.error.type("term",b,c.indicator));else if(d.type.is_module(b)&&(c=b.args[0].id,-1===x(a.__loaded_modules,c))){a.__loaded_modules.push(c);c=d.module[c].rules;for(var e in c)c.hasOwnProperty(e)&&(a.rules[e]=c[e])}},"char_conversion/2":function(a,c){var b=c.args[0],e=c.args[1];d.type.is_variable(b)||d.type.is_variable(e)?a.throwError(d.error.instantiation(c.indicator)):d.type.is_character(b)?d.type.is_character(e)?b.id===e.id?delete a.__char_conversion[b.id]:
a.__char_conversion[b.id]=e.id:a.throwError(d.error.type("character",e,c.indicator)):a.throwError(d.error.type("character",b,c.indicator))},"op/3":function(a,c){var b=c.args[0],e=c.args[1],k=c.args[2];if(d.type.is_variable(b)||d.type.is_variable(e)||d.type.is_variable(k))a.throwError(d.error.instantiation(c.indicator));else if(d.type.is_integer(b))if(d.type.is_atom(e))if(d.type.is_atom(k))if(0>b.value||1200<b.value)a.throwError(d.error.domain("operator_priority",b,c.indicator));else if(","===k.id)a.throwError(d.error.permission("modify",
"operator",k,c.indicator));else if(-1==="fy fx yf xf xfx yfx xfy".split(" ").indexOf(e.id))a.throwError(d.error.domain("operator_specifier",e,c.indicator));else{var f={prefix:null,infix:null,postfix:null};for(h in a.__operators)if(a.__operators.hasOwnProperty(h)){var g=a.__operators[h][k.id];g&&(-1!==x(g,"fx")&&(f.prefix={priority:h,type:"fx"}),-1!==x(g,"fy")&&(f.prefix={priority:h,type:"fy"}),-1!==x(g,"xf")&&(f.postfix={priority:h,type:"xf"}),-1!==x(g,"yf")&&(f.postfix={priority:h,type:"yf"}),-1!==
x(g,"xfx")&&(f.infix={priority:h,type:"xfx"}),-1!==x(g,"xfy")&&(f.infix={priority:h,type:"xfy"}),-1!==x(g,"yfx")&&(f.infix={priority:h,type:"yfx"}))}switch(e.id){case "fy":case "fx":var h="prefix";break;case "yf":case "xf":h="postfix";break;default:h="infix"}if(((f.prefix&&"prefix"===h||f.postfix&&"postfix"===h||f.infix&&"infix"===h)&&f[h].type!==e.id||f.infix&&"postfix"===h||f.postfix&&"infix"===h)&&0!==b.value)a.throwError(d.error.permission("create","operator",k,c.indicator));else{if(f[h]){c=a.__operators[f[h].priority][k.id];
g=e.id;for(var l=c.length-1;0<=l;l--)c[l]===g&&c.splice(l,1);0===a.__operators[f[h].priority][k.id].length&&delete a.__operators[f[h].priority][k.id]}0<b.value&&(a.__operators[b.value]||(a.__operators[b.value.toString()]={}),a.__operators[b.value][k.id]||(a.__operators[b.value][k.id]=[]),a.__operators[b.value][k.id].push(e.id))}}else a.throwError(d.error.type("atom",k,c.indicator));else a.throwError(d.error.type("atom",e,c.indicator));else a.throwError(d.error.type("integer",b,c.indicator))}},predicate:{"$tau:level/1":function(a,
c,b){a.level=b.args[0].id;a.success(c)},";/2":function(a,c,b){var d=new p(c.goal.replace(b.args[0]),c.substitution,c);c=new p(c.goal.replace(b.args[1]),c.substitution,c);a.prepend([d,c])},"!/0":function(a,c,b){var d,f=[];for(d=c;null!==d.parent&&d.parent.goal.search(b);)d=d.parent;for(b=0;b<a.points.length;b++){for(var n=a.points[b],g=n.parent;null!==g&&g!==d.parent;)g=g.parent;null===g&&g!==d.parent&&f.push(n)}a.points=[new p(c.goal.replace(null),c.substitution,c)].concat(f)},"\\+/1":function(a,
c,b){var e=b.args[0];if(d.type.is_variable(e))a.throwError(d.error.instantiation(a.level));else if(d.type.is_callable(e)){var f=a.points;a.points=[new p(b.args[0],c.substitution,c)];a.__calls.unshift(function(b){a.points=f;!1===b?a.success(c):d.type.is_error(b)?a.throwError(b.args[0]):null===b?(a.points=[c].concat(f),a.__calls.shift()(null)):a.points=f})}else a.throwError(d.error.type("callable",e,a.level))},"-\x3e/2":function(a,c,b){b=c.goal.replace(new f(",",[b.args[0],new f(",",[new f("!"),b.args[1]])]));
a.prepend([new p(b,c.substitution,c)])},"fail/0":function(a,c,b){},"true/0":function(a,c,b){a.success(c)},"call/1":function(a,c,b){b=b.args[0];d.type.is_variable(b)?a.throwError(d.error.instantiation(a.level)):d.type.is_callable(b)?a.prepend([new p(c.goal.replace(b),c.substitution,c)]):a.throwError(d.error.type("callable",b,a.level))},"once/1":function(a,c,b){b=b.args[0];if(d.type.is_variable(b))a.throwError(d.error.instantiation(a.level));else if(d.type.is_callable(b)){b=a.program.session(b,a.limit);
b.copy_context(a);var e=b.answer();d.type.is_error(e)?a.throwError(e.args[0]):d.type.is_substitution(e)&&a.prepend([new p(c.goal.apply(e).replace(null),c.substitution.apply(e),c)]);a.copy_context(b)}else a.throwError(d.error.type("callable",b,a.level))},"repeat/0":function(a,c,b){a.prepend([new p(c.goal.replace(null),c.substitution,c),c])},"throw/1":function(a,c,b){d.type.is_variable(b.args[0])?a.throwError(d.error.instantiation(a.level)):a.throwError(b.args[0])},"catch/3":function(a,c,b){var e=a.points;
a.points=[];a.prepend([new p(b.args[0],c.substitution,c)]);a.__calls.unshift(function(k){var n=a.points;a.points=e;if(d.type.is_error(k)){var g=[];for(n=0;n<a.points.length;n++){for(var h=a.points[n],l=h.parent;null!==l&&l!==c.parent;)l=l.parent;null===l&&l!==c.parent&&g.push(h)}a.points=g;h=d.unify(k.args[0],b.args[1],!1);null!==h?(h.substitution=h.substitution.apply(c.substitution.exclude(c.exclude?c.exclude:[])),h.goal=c.goal.replace(b.args[2]).apply(h.substitution),a.prepend([h])):a.throwError(k.args[0])}else!1!==
k&&(g=null===k?[]:[new p(c.goal.apply(k).replace(null),c.substitution.apply(k),c)],n=C(n,function(a){null===a.goal&&(a.goal=new f("true",[]));a=new p(c.goal.replace(new f("catch",[a.goal,b.args[1],b.args[2]])),c.substitution.apply(a.substitution),a.parent);a.exclude=b.args[0].variables();return a}),a.prepend(g.concat(n)),null===k&&(this.current_limit=0,a.__calls.shift()(null)))})},"\x3d/2":function(a,c,b){b=d.unify(b.args[0],b.args[1],!1);null!==b&&(b.goal=c.goal.apply(b.substitution).replace(null),
b.substitution=c.substitution.apply(b.substitution),b.parent=c,a.prepend([b]))},"unify_with_occurs_check/2":function(a,c,b){b=d.unify(b.args[0],b.args[1],!0);null!==b&&(b.goal=c.goal.apply(b.substitution).replace(null),b.substitution=c.substitution.apply(b.substitution),b.parent=c,a.prepend([b]))},"\\\x3d/2":function(a,c,b){b=d.unify(b.args[0],b.args[1]);b.parent=c;null===b&&a.success(c)},"findall/3":function(a,c,b){var e=b.args[0],k=b.args[1],n=b.args[2];if(d.type.is_variable(k))a.throwError(d.error.instantiation(b.indicator));
else if(d.type.is_callable(k))if(d.type.is_variable(n)||d.type.is_list(n)){var g=a.next_free_variable();b=new f(",",[k,new f("\x3d",[g,e])]);var h=a.points,l=a.variables,m=a.limit;a.points=[new p(b,new z,c)];a.variables=[g.id];var q=[],t=function(b){if(!1===b||null===b||d.type.is_error(b))if(a.points=h,a.variables=l,a.limit=m,d.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){b=new f("[]");for(var e=q.length-1;0<=e;e--)b=new f(".",[q[e],b]);a.prepend([new p(c.goal.replace(new f("\x3d",
[n,b])),c.substitution,c)])}}else a.__calls.unshift(t),q.push(b.links[g.id]),a.limit=a.current_limit};a.__calls.unshift(t)}else a.throwError(d.error.type("list",n,b.indicator));else a.throwError(d.error.type("callable",k,b.indicator))},"bagof/3":function(a,c,b){var e=b.args[0],k=b.args[1],n=b.args[2];if(d.type.is_variable(k))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(k))if(d.type.is_variable(n)||d.type.is_list(n)){var g=a.next_free_variable();if("^/2"===k.indicator){var h=
k.args[0].variables();k=k.args[1]}else h=[];h=h.concat(e.variables());b=k.variables().filter(function(a){return-1===x(h,a)});for(var l=new f("[]"),m=b.length-1;0<=m;m--)l=new f(".",[new y(b[m]),l]);e=new f(",",[k,new f("\x3d",[g,new f(",",[l,e])])]);var q=a.points,t=a.variables,u=a.limit;a.points=[new p(e,new z,c)];a.variables=[g.id];var v=[],w=function(b){if(!1===b||null===b||d.type.is_error(b))if(a.points=q,a.variables=t,a.limit=u,d.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){for(var e=
[],k=0;k<v.length;k++){b=v[k].answers;for(var h=new f("[]"),r=b.length-1;0<=r;r--)h=new f(".",[b[r],h]);e.push(new p(c.goal.replace(new f(",",[new f("\x3d",[l,v[k].variables]),new f("\x3d",[n,h])])),c.substitution,c))}a.prepend(e)}}else{a.__calls.unshift(w);e=!1;k=b.links[g.id].args[0];b=b.links[g.id].args[1];for(h in v)if(v.hasOwnProperty(h)&&(r=v[h],r.variables.equals(k))){r.answers.push(b);e=!0;break}e||v.push({variables:k,answers:[b]});a.limit=a.current_limit}};a.__calls.unshift(w)}else a.throwError(d.error.type("list",
n,b.indicator));else a.throwError(d.error.type("callable",k,b.indicator))},"setof/3":function(a,c,b){var e=b.args[0],k=b.args[1],g=b.args[2];if(d.type.is_variable(k))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(k))if(d.type.is_variable(g)||d.type.is_list(g)){var h=a.next_free_variable();if("^/2"===k.indicator){var l=k.args[0].variables();k=k.args[1]}else l=[];l=l.concat(e.variables());b=k.variables().filter(function(a){return-1===x(l,a)});for(var m=new f("[]"),q=b.length-
1;0<=q;q--)m=new f(".",[new y(b[q]),m]);e=new f(",",[k,new f("\x3d",[h,new f(",",[m,e])])]);var t=a.points,u=a.variables,v=a.limit;a.points=[new p(e,new z,c)];a.variables=[h.id];var w=[],A=function(b){if(!1===b||null===b||d.type.is_error(b))if(a.points=t,a.variables=u,a.limit=v,d.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){for(var e=[],k=0;k<w.length;k++){b=w[k].answers.sort(d.compare);for(var n=new f("[]"),r=b.length-1;0<=r;r--)n=new f(".",[b[r],n]);e.push(new p(c.goal.replace(new f(",",
[new f("\x3d",[m,w[k].variables]),new f("\x3d",[g,n])])),c.substitution,c))}a.prepend(e)}}else{a.__calls.unshift(A);e=!1;k=b.links[h.id].args[0];b=b.links[h.id].args[1];for(n in w)if(w.hasOwnProperty(n)&&(r=w[n],r.variables.equals(k))){r.answers.push(b);e=!0;break}e||w.push({variables:k,answers:[b]});a.limit=a.current_limit}};a.__calls.unshift(A)}else a.throwError(d.error.type("list",g,b.indicator));else a.throwError(d.error.type("callable",k,b.indicator))},"functor/3":function(a,c,b){if(d.type.is_variable(b.args[0])&&
(d.type.is_variable(b.args[1])||d.type.is_variable(b.args[2])))a.throwError(d.error.instantiation("functor/3"));else if(d.type.is_variable(b.args[2])||d.type.is_integer(b.args[2]))if(d.type.is_variable(b.args[1])||d.type.is_atomic(b.args[1]))if(d.type.is_variable(b.args[0])){if(0<=b.args[2].value){new z;for(var e=[],k=0;k<b.args[2].value;k++){for(a.rename++;-1!==x(a.variables,d.format_variable(a.rename));)a.rename++;e.push(new y(d.format_variable(a.rename)))}b=(new z).add(b.args[0].id,new f(b.args[1].id,
e));a.prepend([new p(c.goal.apply(b).replace(null),c.substitution.apply(b),c)])}}else e=new f(b.args[0].id,[]),k=new t(b.args[0].args.length,!1),b=new f(",",[new f("\x3d",[e,b.args[1]]),new f("\x3d",[k,b.args[2]])]),a.prepend([new p(c.goal.replace(b),c.substitution,c)]);else a.throwError(d.error.type("atomic",b.args[1],"functor/3"));else a.throwError(d.error.type("integer",b.args[2],"functor/3"))},"arg/3":function(a,c,b){if(d.type.is_variable(b.args[0])||d.type.is_variable(b.args[1]))a.throwError(d.error.instantiation(b.indicator));
else if(0>b.args[0].value)a.throwError(d.error.domain("not_less_than_zero",b.args[0],b.indicator));else if(d.type.is_compound(b.args[1])){var e=b.args[0].value;0<e&&e<=b.args[1].args.length&&(b=new f("\x3d",[b.args[1].args[e-1],b.args[2]]),a.prepend([new p(c.goal.replace(b),c.substitution,c)]))}else a.throwError(d.error.type("compound",b.args[1],b.indicator))},"\x3d../2":function(a,c,b){if(d.type.is_variable(b.args[0])&&(d.type.is_variable(b.args[1])||d.type.is_non_empty_list(b.args[1])&&d.type.is_variable(b.args[1].args[0])))a.throwError(d.error.instantiation(b.indicator));
else if(!d.type.is_fully_list(b.args[1]))a.throwError(d.error.type("list",b.args[1],b.indicator));else if(!d.type.is_variable(b.args[0])){if(d.type.is_atomic(b.args[0]))var e=new f(".",[b.args[0],new f("[]")]);else{e=new f("[]");for(var k=b.args[0].args.length-1;0<=k;k--)e=new f(".",[b.args[0].args[k],e]);e=new f(".",[new f(b.args[0].id),e])}a.prepend([new p(c.goal.replace(new f("\x3d",[e,b.args[1]])),c.substitution,c)])}else if(!d.type.is_variable(b.args[1])){k=[];for(e=b.args[1].args[1];"./2"===
e.indicator;)k.push(e.args[0]),e=e.args[1];d.type.is_variable(b.args[0])&&d.type.is_variable(e)?a.throwError(d.error.instantiation(b.indicator)):0===k.length&&d.type.is_compound(b.args[1].args[0])?a.throwError(d.error.type("atomic",b.args[1].args[0],b.indicator)):0<k.length&&(d.type.is_compound(b.args[1].args[0])||d.type.is_number(b.args[1].args[0]))?a.throwError(d.error.type("atom",b.args[1].args[0],b.indicator)):0===k.length?a.prepend([new p(c.goal.replace(new f("\x3d",[b.args[1].args[0],b.args[0]],
c)),c.substitution,c)]):a.prepend([new p(c.goal.replace(new f("\x3d",[new f(b.args[1].args[0].id,k),b.args[0]])),c.substitution,c)])}},"copy_term/2":function(a,c,b){var e=d.unify(b.args[0],b.args[1],!1);if(null!==e){b=e.substitution.filter(b.args[1].variables());for(var f in b.links)b.links.hasOwnProperty(f)&&d.type.is_variable(b.links[f])&&delete b.links[f];e.goal=c.goal.apply(b).replace(null);e.substitution=c.substitution.apply(b);a.prepend([e])}},"clause/2":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));
else if(!d.type.is_callable(b.args[0]))a.throwError(d.error.type("callable",b.args[0],b.indicator));else if(!d.type.is_variable(b.args[1])&&!d.type.is_callable(b.args[1]))a.throwError(d.error.type("callable",b.args[1],b.indicator));else if(void 0!==a.rules[b.args[0].indicator])if(a.is_public_predicate(b.args[0].indicator)){var e=[],k;for(k in a.rules[b.args[0].indicator])if(a.rules[b.args[0].indicator].hasOwnProperty(k)){var g=a.rules[b.args[0].indicator][k];a.renamed_variables={};g=g.rename(a);null===
g.body&&(g.body=new f("true"));g=new f(",",[new f("\x3d",[g.head,b.args[0]]),new f("\x3d",[g.body,b.args[1]])]);e.push(new p(c.goal.replace(g),c.substitution,c))}a.prepend(e)}else a.throwError(d.error.permission("access","private_procedure",b.args[0].indicator,b.indicator))},"current_predicate/1":function(a,c,b){var e=b.args[0];if(d.type.is_variable(e)||d.type.is_compound(e)&&"//2"===e.indicator)if(d.type.is_variable(e)||d.type.is_variable(e.args[0])||d.type.is_atom(e.args[0]))if(d.type.is_variable(e)||
d.type.is_variable(e.args[1])||d.type.is_integer(e.args[1])){b=[];for(var k in a.rules)if(a.rules.hasOwnProperty(k)){var g=k.lastIndexOf("/"),h=k.substr(0,g);g=parseInt(k.substr(g+1,k.length-(g+1)));h=new f("/",[new f(h),new t(g,!1)]);h=new f("\x3d",[h,e]);b.push(new p(c.goal.replace(h),c.substitution,c))}a.prepend(b)}else a.throwError(d.error.type("integer",e.args[1],b.indicator));else a.throwError(d.error.type("atom",e.args[0],b.indicator));else a.throwError(d.error.type("predicate_indicator",e,
b.indicator))},"asserta/1":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var e=b.args[0].args[0];var f=b.args[0].args[1]}else e=b.args[0],f=null;d.type.is_callable(e)?null===f||d.type.is_callable(f)?a.is_public_predicate(e.indicator)?(void 0===a.rules[e.indicator]&&(a.rules[e.indicator]=[]),a.rules[e.indicator]=[new A(e,f)].concat(a.rules[e.indicator]),a.success(c)):a.throwError(d.error.permission("modify",
"static_procedure",e.indicator,b.indicator)):a.throwError(d.error.type("callable",f,b.indicator)):a.throwError(d.error.type("callable",e,b.indicator))}else a.throwError(d.error.type("callable",b.args[0],b.indicator))},"assertz/1":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var e=b.args[0].args[0];var f=b.args[0].args[1]}else e=b.args[0],f=null;d.type.is_callable(e)?null===
f||d.type.is_callable(f)?a.is_public_predicate(e.indicator)?(void 0===a.rules[e.indicator]&&(a.rules[e.indicator]=[]),a.rules[e.indicator].push(new A(e,f)),a.success(c)):a.throwError(d.error.permission("modify","static_procedure",e.indicator,b.indicator)):a.throwError(d.error.type("callable",f,b.indicator)):a.throwError(d.error.type("callable",e,b.indicator))}else a.throwError(d.error.type("callable",b.args[0],b.indicator))},"retract/1":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));
else if(d.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var e=b.args[0].args[0];var k=b.args[0].args[1]}else e=b.args[0],k=null;if(a.is_public_predicate(e.indicator)){if(void 0!==a.rules[e.indicator])for(var g=0;g<a.rules[b.args[0].indicator].length;g++){a.renamed_variables={};var h=a.rules[b.args[0].indicator][g].rename(a),l=d.unify(e,h.head);if(null!==l&&(null===k&&(k=new f("true")),null===h.body&&(h.body=new f("true")),l=l.substitution,null!==d.unify(h.body.apply(l),k.apply(l)))){a.rules[b.args[0].indicator].splice(g,
1);a.success(c);break}}}else a.throwError(d.error.permission("modify","static_procedure",e.indicator,b.indicator))}else a.throwError(d.error.type("callable",b.args[0],b.indicator))},"abolish/1":function(a,c,b){if(d.type.is_variable(b.args[0])||d.type.is_term(b.args[0])&&"//2"===b.args[0].indicator&&(d.type.is_variable(b.args[0].args[0])||d.type.is_variable(b.args[0].args[1])))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_term(b.args[0])&&"//2"===b.args[0].indicator)if(d.type.is_atom(b.args[0].args[0]))if(d.type.is_integer(b.args[0].args[1]))if(0>
b.args[0].args[1].value)a.throwError(d.error.domain("not_less_than_zero",b.args[0].args[1],b.indicator));else if(d.type.is_number(a.flag.max_arity)&&b.args[0].args[1].value>a.flag.max_arity.value)a.throwError(d.error.representation("max_arity",b.indicator));else{var e=b.args[0].args[0].id+"/"+b.args[0].args[1].value;a.is_public_predicate(e)?(delete a.rules[e],a.success(c)):a.throwError(d.error.permission("modify","static_procedure",e,b.indicator))}else a.throwError(d.error.type("integer",b.args[0].args[1],
b.indicator));else a.throwError(d.error.type("atom",b.args[0].args[0],b.indicator));else a.throwError(d.error.type("predicate_indicator",b.args[0],b.indicator))},"atom_length/2":function(a,c,b){if(d.type.is_variable(b.args[0]))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_atom(b.args[0]))if(d.type.is_variable(b.args[1])||d.type.is_integer(b.args[1]))if(d.type.is_integer(b.args[1])&&0>b.args[1].value)a.throwError(d.error.domain("not_less_than_zero",b.args[1],b.indicator));else{var e=
new t(b.args[0].id.length,!1);a.prepend([new p(c.goal.replace(new f("\x3d",[e,b.args[1]])),c.substitution,c)])}else a.throwError(d.error.type("integer",b.args[1],b.indicator));else a.throwError(d.error.type("atom",b.args[0],b.indicator))},"atom_concat/3":function(a,c,b){var e=b.args[0],k=b.args[1],g=b.args[2];if(d.type.is_variable(g)&&(d.type.is_variable(e)||d.type.is_variable(k)))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(k)||
d.type.is_atom(k))if(d.type.is_variable(g)||d.type.is_atom(g)){b=d.type.is_variable(e);var h=d.type.is_variable(k);if(b||h)if(b&&!h){if(b=g.id.substr(0,g.id.length-k.id.length),b+k.id===g.id){var l=new f("\x3d",[e,new f(b)]);a.prepend([new p(c.goal.replace(l),c.substitution,c)])}}else if(h&&!b)b=g.id.substr(e.id.length),e.id+b===g.id&&(l=new f("\x3d",[k,new f(b)]),a.prepend([new p(c.goal.replace(l),c.substitution,c)]));else{b=[];for(h=0;h<=g.id.length;h++){l=new f(g.id.substr(0,h));var m=new f(g.id.substr(h));
l=new f(",",[new f("\x3d",[l,e]),new f("\x3d",[m,k])]);b.push(new p(c.goal.replace(l),c.substitution,c))}a.prepend(b)}else l=new f("\x3d",[g,new f(e.id+k.id)]),a.prepend([new p(c.goal.replace(l),c.substitution,c)])}else a.throwError(d.error.type("atom",g,b.indicator));else a.throwError(d.error.type("atom",k,b.indicator));else a.throwError(d.error.type("atom",e,b.indicator))},"sub_atom/5":function(a,c,b){var e=b.args[0],k=b.args[1],g=b.args[2],h=b.args[3],l=b.args[4];if(d.type.is_variable(e))a.throwError(d.error.instantiation(b.indicator));
else if(d.type.is_variable(k)||d.type.is_integer(k))if(d.type.is_variable(g)||d.type.is_integer(g))if(d.type.is_variable(h)||d.type.is_integer(h))if(d.type.is_integer(k)&&0>k.value)a.throwError(d.error.domain("not_less_than_zero",k,b.indicator));else if(d.type.is_integer(g)&&0>g.value)a.throwError(d.error.domain("not_less_than_zero",g,b.indicator));else if(d.type.is_integer(h)&&0>h.value)a.throwError(d.error.domain("not_less_than_zero",h,b.indicator));else{var m=[],q=[],u=[];if(d.type.is_variable(k))for(b=
0;b<=e.id.length;b++)m.push(b);else m.push(k.value);if(d.type.is_variable(g))for(b=0;b<=e.id.length;b++)q.push(b);else q.push(g.value);if(d.type.is_variable(h))for(b=0;b<=e.id.length;b++)u.push(b);else u.push(h.value);var v=[],w;for(w in m)if(m.hasOwnProperty(w)){b=m[w];for(var z in q)if(q.hasOwnProperty(z)){var y=q[z],A=e.id.length-b-y;if(-1!==x(u,A)&&b+y+A===e.id.length){var B=e.id.substr(b,y);if(e.id===e.id.substr(0,b)+B+e.id.substr(b+y,A)){B=new f("\x3d",[new f(B),l]);var C=new f("\x3d",[k,new t(b)]);
y=new f("\x3d",[g,new t(y)]);A=new f("\x3d",[h,new t(A)]);A=new f(",",[new f(",",[new f(",",[C,y]),A]),B]);v.push(new p(c.goal.replace(A),c.substitution,c))}}}}a.prepend(v)}else a.throwError(d.error.type("integer",h,b.indicator));else a.throwError(d.error.type("integer",g,b.indicator));else a.throwError(d.error.type("integer",k,b.indicator))},"atom_chars/2":function(a,c,b){var e=b.args[0],k=b.args[1];if(d.type.is_variable(e)&&d.type.is_variable(k))a.throwError(d.error.instantiation(b.indicator));
else if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(e)){for(var g=k,h=d.type.is_variable(e),l="";"./2"===g.indicator;){if(d.type.is_character(g.args[0]))l+=g.args[0].id;else{if(d.type.is_variable(g.args[0])&&h){a.throwError(d.error.instantiation(b.indicator));return}if(!d.type.is_variable(g.args[0])){a.throwError(d.error.type("character",g.args[0],b.indicator));return}}g=g.args[1]}d.type.is_variable(g)&&h?a.throwError(d.error.instantiation(b.indicator)):d.type.is_empty_list(g)||
d.type.is_variable(g)?a.prepend([new p(c.goal.replace(new f("\x3d",[new f(l),e])),c.substitution,c)]):a.throwError(d.error.type("list",k,b.indicator))}else{b=new f("[]");for(g=e.id.length-1;0<=g;g--)b=new f(".",[new f(e.id.charAt(g)),b]);a.prepend([new p(c.goal.replace(new f("\x3d",[k,b])),c.substitution,c)])}else a.throwError(d.error.type("atom",e,b.indicator))},"atom_codes/2":function(a,c,b){var e=b.args[0],k=b.args[1];if(d.type.is_variable(e)&&d.type.is_variable(k))a.throwError(d.error.instantiation(b.indicator));
else if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(e)){for(var g=k,h=d.type.is_variable(e),l="";"./2"===g.indicator;){if(d.type.is_character_code(g.args[0]))l+=String.fromCharCode(g.args[0].value);else{if(d.type.is_variable(g.args[0])&&h){a.throwError(d.error.instantiation(b.indicator));return}if(!d.type.is_variable(g.args[0])){a.throwError(d.error.representation("character_code",b.indicator));return}}g=g.args[1]}d.type.is_variable(g)&&h?a.throwError(d.error.instantiation(b.indicator)):
d.type.is_empty_list(g)||d.type.is_variable(g)?a.prepend([new p(c.goal.replace(new f("\x3d",[new f(l),e])),c.substitution,c)]):a.throwError(d.error.type("list",k,b.indicator))}else{b=new f("[]");for(g=e.id.length-1;0<=g;g--)b=new f(".",[new t(e.id.charCodeAt(g),!1),b]);a.prepend([new p(c.goal.replace(new f("\x3d",[k,b])),c.substitution,c)])}else a.throwError(d.error.type("atom",e,b.indicator))},"char_code/2":function(a,c,b){var e=b.args[0],k=b.args[1];d.type.is_variable(e)&&d.type.is_variable(k)?
a.throwError(d.error.instantiation(b.indicator)):d.type.is_variable(e)||d.type.is_character(e)?d.type.is_variable(k)||d.type.is_integer(k)?d.type.is_variable(k)||d.type.is_character_code(k)?d.type.is_variable(k)?(e=new t(e.id.charCodeAt(0),!1),a.prepend([new p(c.goal.replace(new f("\x3d",[e,k])),c.substitution,c)])):(k=new f(String.fromCharCode(k.value)),a.prepend([new p(c.goal.replace(new f("\x3d",[k,e])),c.substitution,c)])):a.throwError(d.error.representation("character_code",b.indicator)):a.throwError(d.error.type("integer",
k,b.indicator)):a.throwError(d.error.type("character",e,b.indicator))},"number_chars/2":function(a,c,b){var e,k=b.args[0],g=b.args[1];if(d.type.is_variable(k)&&d.type.is_variable(g))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(k)||d.type.is_number(k)){if(!d.type.is_variable(g)){var h=g,l=d.type.is_variable(k);for(e="";"./2"===h.indicator;){if(d.type.is_character(h.args[0]))e+=h.args[0].id;else{if(d.type.is_variable(h.args[0])&&l){a.throwError(d.error.instantiation(b.indicator));
return}if(d.type.is_variable(h.args[0])){e=!1;break}else if(!d.type.is_variable(h.args[0])){a.throwError(d.error.type("character",h.args[0],b.indicator));return}}h=h.args[1]}if(e)if(d.type.is_variable(h)&&l)a.throwError(d.error.instantiation(b.indicator));else{if(d.type.is_empty_list(h)||d.type.is_variable(h)){e=B(e);!1===e?a.throwError(d.error.syntax_by_predicate("parseable_number",g,b.indicator)):a.prepend([new p(c.goal.replace(new f("\x3d",[k,e])),c.substitution,c)]);return}a.throwError(d.error.type("list",
g,b.indicator))}}if(!d.type.is_variable(k)){e=k.toString();b=new f("[]");for(k=e.length-1;0<=k;k--)b=new f(".",[new f(e.charAt(k)),b]);a.prepend([new p(c.goal.replace(new f("\x3d",[g,b])),c.substitution,c)])}}else a.throwError(d.error.type("number",k,b.indicator))},"number_codes/2":function(a,c,b){var e,g=b.args[0],h=b.args[1];if(d.type.is_variable(g)&&d.type.is_variable(h))a.throwError(d.error.instantiation(b.indicator));else if(d.type.is_variable(g)||d.type.is_number(g)){if(!d.type.is_variable(h)){var l=
h,m=d.type.is_variable(g);for(e="";"./2"===l.indicator;){if(d.type.is_character_code(l.args[0]))e+=String.fromCharCode(l.args[0].value);else{if(d.type.is_variable(l.args[0])&&m){a.throwError(d.error.instantiation(b.indicator));return}if(d.type.is_variable(l.args[0])){e=!1;break}else if(!d.type.is_variable(l.args[0])){a.throwError(d.error.representation("character_code",b.indicator));return}}l=l.args[1]}if(e)if(d.type.is_variable(l)&&m)a.throwError(d.error.instantiation(b.indicator));else{if(d.type.is_empty_list(l)||
d.type.is_variable(l)){e=B(e);!1===e?a.throwError(d.error.syntax_by_predicate("parseable_number",h,b.indicator)):a.prepend([new p(c.goal.replace(new f("\x3d",[g,e])),c.substitution,c)]);return}a.throwError(d.error.type("list",h,b.indicator))}}if(!d.type.is_variable(g)){e=g.toString();b=new f("[]");for(g=e.length-1;0<=g;g--)b=new f(".",[new t(e.charCodeAt(g),!1),b]);a.prepend([new p(c.goal.replace(new f("\x3d",[h,b])),c.substitution,c)])}}else a.throwError(d.error.type("number",g,b.indicator))},"@\x3d\x3c/2":function(a,
c,b){0>=d.compare(b.args[0],b.args[1])&&a.success(c)},"\x3d\x3d/2":function(a,c,b){0===d.compare(b.args[0],b.args[1])&&a.success(c)},"\\\x3d\x3d/2":function(a,c,b){0!==d.compare(b.args[0],b.args[1])&&a.success(c)},"@\x3c/2":function(a,c,b){0>d.compare(b.args[0],b.args[1])&&a.success(c)},"@\x3e/2":function(a,c,b){0<d.compare(b.args[0],b.args[1])&&a.success(c)},"@\x3e\x3d/2":function(a,c,b){0<=d.compare(b.args[0],b.args[1])&&a.success(c)},"is/2":function(a,c,b){var e=b.args[1].interpret(a);d.type.is_number(e)?
a.prepend([new p(c.goal.replace(new f("\x3d",[b.args[0],e],a.level)),c.substitution,c)]):a.throwError(e)},"\x3d:\x3d/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0===b&&a.success(c)},"\x3d\\\x3d/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0!==b&&a.success(c)},"\x3c/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0>b&&a.success(c)},"\x3d\x3c/2":function(a,
c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0>=b&&a.success(c)},"\x3e/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0<b&&a.success(c)},"\x3e\x3d/2":function(a,c,b){b=d.arithmetic_compare(a,b.args[0],b.args[1]);d.type.is_term(b)?a.throwError(b):0<=b&&a.success(c)},"var/1":function(a,c,b){d.type.is_variable(b.args[0])&&a.success(c)},"atom/1":function(a,c,b){d.type.is_atom(b.args[0])&&a.success(c)},"atomic/1":function(a,
c,b){d.type.is_atomic(b.args[0])&&a.success(c)},"compound/1":function(a,c,b){d.type.is_compound(b.args[0])&&a.success(c)},"integer/1":function(a,c,b){d.type.is_integer(b.args[0])&&a.success(c)},"float/1":function(a,c,b){d.type.is_float(b.args[0])&&a.success(c)},"number/1":function(a,c,b){d.type.is_number(b.args[0])&&a.success(c)},"nonvar/1":function(a,c,b){d.type.is_variable(b.args[0])||a.success(c)},"halt/0":function(a,c,b){a.points=[]},"halt/1":function(a,c,b){c=b.args[0];d.type.is_variable(c)?
a.throwError(d.error.instantiation(b.indicator)):d.type.is_integer(c)?a.points=[]:a.throwError(d.error.type("integer",c,b.indicator))},"current_prolog_flag/2":function(a,c,b){var e=b.args[0],g=b.args[1];if(d.type.is_variable(e)||d.type.is_atom(e))if(d.type.is_variable(e)||d.type.is_flag(e)){b=[];for(var h in d.flag)if(d.flag.hasOwnProperty(h)){var l=new f(",",[new f("\x3d",[new f(h),e]),new f("\x3d",[a.flag[h],g])]);b.push(new p(c.goal.replace(l),c.substitution,c))}a.prepend(b)}else a.throwError(d.error.domain("prolog_flag",
e,b.indicator));else a.throwError(d.error.type("atom",e,b.indicator))},"set_prolog_flag/2":function(a,c,b){var e=b.args[0],g=b.args[1];d.type.is_variable(e)||d.type.is_variable(g)?a.throwError(d.error.instantiation(b.indicator)):d.type.is_atom(e)?d.type.is_flag(e)?d.type.is_value_flag(e,g)?d.type.is_modifiable_flag(e)?(a.flag[e.id]=g,a.success(c)):a.throwError(d.error.permission("modify","flag",e)):a.throwError(d.error.domain("flag_value",new f("+",[e,g]),b.indicator)):a.throwError(d.error.domain("prolog_flag",
e,b.indicator)):a.throwError(d.error.type("atom",e,b.indicator))}},flag:{bounded:{allowed:[new f("true"),new f("false")],value:new f("true"),changeable:!1},max_integer:{allowed:[new t(Number.MAX_SAFE_INTEGER)],value:new t(Number.MAX_SAFE_INTEGER),changeable:!1},min_integer:{allowed:[new t(Number.MIN_SAFE_INTEGER)],value:new t(Number.MIN_SAFE_INTEGER),changeable:!1},integer_rounding_function:{allowed:[new f("down"),new f("toward_zero")],value:new f("toward_zero"),changeable:!1},char_conversion:{allowed:[new f("on"),
new f("off")],value:new f("on"),changeable:!0},debug:{allowed:[new f("on"),new f("off")],value:new f("off"),changeable:!0},max_arity:{allowed:[new f("unbounded")],value:new f("unbounded"),changeable:!1},unknown:{allowed:[new f("error"),new f("fail"),new f("warning")],value:new f("error"),changeable:!0},double_quotes:{allowed:[new f("chars"),new f("codes"),new f("atom")],value:new f("codes"),changeable:!0}},unify:function(a,c,b){b=void 0===b?!1:b;if(this.type.is_anonymous_var(a))return new p(c,new z);
if(this.type.is_anonymous_var(c))return new p(a,new z);if(this.type.is_variable(c)){var e={};if(b&&-1!==x(a.variables(),c.id)&&!d.type.is_variable(a))return null;e[c.id]=a;return new p(a,new z(e))}return a.unify(c,b)},compare:function(a,c){var b=d.type.compare(a,c);return 0!==b?b:a.compare(c)},arithmetic_compare:function(a,c,b){c=c.interpret(a);return d.type.is_number(c)?(a=b.interpret(a),d.type.is_number(a)?d.compare(c,a):a):c},operate:function(a,c){if(d.type.is_operator(c)){for(var b=d.type.is_operator(c),
e=[],f,g=!1,h=0;h<c.args.length;h++){f=c.args[h].interpret(a);if(d.type.is_number(f)){if(null!==b.type_args&&f.is_float!==b.type_args)return d.error.type(b.type_args?"float":"integer",f,a.__call_indicator);e.push(f.value)}else return f;g=g||f.is_float}e.push(a);f=d.arithmetic.evaluation[c.indicator].fn.apply(this,e);g=null===b.type_result?g:b.type_result;return d.type.is_term(f)?f:f===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY?d.error.evaluation("overflow",a.__call_indicator):!1===g&&
"true"===a.flag.bounded.id&&(f>a.flag.max_integer.value||f<a.flag.min_integer.value)?d.error.evaluation("int_overflow",a.__call_indicator):new t(f,g)}return d.error.type("evaluable",c.indicator,a.__call_indicator)},error:{existence:function(a,c,b){return new f("error",[new f("existence_error",[new f(a),new f(c)]),new f(b)])},type:function(a,c,b){return new f("error",[new f("type_error",[new f(a),c]),new f(b)])},instantiation:function(a){return new f("error",[new f("instantiation_error"),new f(a)])},
domain:function(a,c,b){return new f("error",[new f("domain_error",[new f(a),c]),new f(b)])},representation:function(a,c){return new f("error",[new f("representation_error",[new f(a)]),new f(c)])},permission:function(a,c,b,d){return new f("error",[new f("permission_error",[new f(a),new f(c),b]),new f(d)])},evaluation:function(a,c){return new f("error",[new f("evaluation_error",[new f(a)]),new f(c)])},syntax:function(a,c,b){var d=b?a.start+a.value.length:a.start;b=b?new f("token_not_found"):new f("found",
[new f(a.value)]);return new f("error",[new f("syntax_error",[new f("line",[new t(a.line)]),new f("column",[new t(d+1)]),b,new f("cause",[new f(c)])])])},syntax_by_predicate:function(a,c,b){return new f("error",[new f("syntax_error",[new f(a),c]),new f(b)])}},format_variable:function(a){return"_"+a},format_answer:function(a){if(d.type.is_error(a))return"uncaught exception: "+a.args[0].toString();if(!1===a)return"false.";if(null===a)return"limit exceeded ;";var c=0,b="",e;for(e in a.links)a.links.hasOwnProperty(e)&&
(c++,""!==b&&(b+=", "),b+=e.toString()+" \x3d "+a.links[e].toString());return 0===c?"true ;":b+" ;"},flatten_error:function(a){if(!d.type.is_error(a))return null;a=a.args[0];var c={};c.type=a.args[0].id;c.thrown="syntax_error"==c.type?null:a.args[1].id;c.expected=null;c.found=null;c.representation=null;c.existence=null;c.existence_type=null;c.line=null;c.column=null;c.permission_operation=null;c.permission_type=null;c.evaluation_type=null;"type_error"==c.type||"domain_error"==c.type?(c.expected=a.args[0].args[0].id,
c.found=a.args[0].args[1].toString()):"syntax_error"==c.type?(c.expected=a.args[0].args[3].args[0].id,c.found="token_not_found"==a.args[0].args[2].id?"token_not_found":a.args[0].args[2].args[0].id,c.line=a.args[0].args[0].args[0].value,c.column=a.args[0].args[1].args[0].value):"permission_error"==c.type?(c.found=a.args[0].args[2].toString(),c.permission_operation=a.args[0].args[0].id,c.permission_type=a.args[0].args[1].id):"evaluation_error"==c.type?c.evaluation_type=a.args[0].args[0].id:"representation_error"==
c.type?c.representation=a.args[0].args[0].id:"existence_error"==c.type&&(c.existence=a.args[0].args[1].toString(),c.existence_type=a.args[0].args[0].id);return c},create:function(a){return new d.type.Session(a)}};window.pl=d})();
new pl.type.Module("lists",{"append/3":[new pl.type.Rule(new pl.type.Term("append",[new pl.type.Term("[]",[]),new pl.type.Var("X"),new pl.type.Var("X")]),null),new pl.type.Rule(new pl.type.Term("append",[new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("X"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("S")])]),new pl.type.Term("append",[new pl.type.Var("T"),new pl.type.Var("X"),new pl.type.Var("S")]))],"member/2":[new pl.type.Rule(new pl.type.Term("member",
[new pl.type.Var("X"),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("_")])]),null),new pl.type.Rule(new pl.type.Term("member",[new pl.type.Var("X"),new pl.type.Term(".",[new pl.type.Var("_"),new pl.type.Var("Xs")])]),new pl.type.Term("member",[new pl.type.Var("X"),new pl.type.Var("Xs")]))],"length/2":[new pl.type.Rule(new pl.type.Term("length",[new pl.type.Term("[]",[]),new pl.type.Num(0,!1)]),null),new pl.type.Rule(new pl.type.Term("length",[new pl.type.Term(".",[new pl.type.Var("_"),
new pl.type.Var("T")]),new pl.type.Var("Y")]),new pl.type.Term(",",[new pl.type.Term("length",[new pl.type.Var("T"),new pl.type.Var("X")]),new pl.type.Term("is",[new pl.type.Var("Y"),new pl.type.Term("+",[new pl.type.Var("X"),new pl.type.Num(1,!1)])])]))],"permutation/2":[new pl.type.Rule(new pl.type.Term("permutation",[new pl.type.Term("[]",[]),new pl.type.Term("[]",[])]),null),new pl.type.Rule(new pl.type.Term("permutation",[new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("S")]),
new pl.type.Term(",",[new pl.type.Term("permutation",[new pl.type.Var("T"),new pl.type.Var("P")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("X"),new pl.type.Var("Y"),new pl.type.Var("P")]),new pl.type.Term("append",[new pl.type.Var("X"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("Y")]),new pl.type.Var("S")])])]))],"map/3":[new pl.type.Rule(new pl.type.Term("map",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Term("[]",[])]),null),new pl.type.Rule(new pl.type.Term("map",
[new pl.type.Var("F"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("S")])]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("F"),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("L"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])])]),new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",
[new pl.type.Var("F2"),new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("F2")]),new pl.type.Term("map",[new pl.type.Var("F"),new pl.type.Var("T"),new pl.type.Var("S")])])])])]))],"maplist/3":[new pl.type.Rule(new pl.type.Term("maplist",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Term("[]",[])]),null),new pl.type.Rule(new pl.type.Term("maplist",[new pl.type.Var("F"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Term(".",
[new pl.type.Var("X"),new pl.type.Var("S")])]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("F"),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("L"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])])]),new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("F2"),new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("F2")]),
new pl.type.Term("maplist",[new pl.type.Var("F"),new pl.type.Var("T"),new pl.type.Var("S")])])])])]))],"filter/3":[new pl.type.Rule(new pl.type.Term("filter",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Term("[]",[])]),null),new pl.type.Rule(new pl.type.Term("filter",[new pl.type.Var("P"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("P"),new pl.type.Var("A")]),new pl.type.Term(",",
[new pl.type.Term("append",[new pl.type.Var("A"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term("[]",[])]),new pl.type.Var("B")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("F"),new pl.type.Var("B")]),new pl.type.Term(",",[new pl.type.Term(";",[new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("F")]),new pl.type.Term(",",[new pl.type.Term("\x3d",[new pl.type.Var("L"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("S")])]),new pl.type.Term("!",
[])])]),new pl.type.Term("\x3d",[new pl.type.Var("L"),new pl.type.Var("S")])]),new pl.type.Term("filter",[new pl.type.Var("P"),new pl.type.Var("T"),new pl.type.Var("S")])])])])]))],"include/3":[new pl.type.Rule(new pl.type.Term("include",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Term("[]",[])]),null),new pl.type.Rule(new pl.type.Term("include",[new pl.type.Var("P"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",
[new pl.type.Var("P"),new pl.type.Var("A")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("A"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term("[]",[])]),new pl.type.Var("B")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("F"),new pl.type.Var("B")]),new pl.type.Term(",",[new pl.type.Term(";",[new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("F")]),new pl.type.Term(",",[new pl.type.Term("\x3d",[new pl.type.Var("L"),new pl.type.Term(".",
[new pl.type.Var("H"),new pl.type.Var("S")])]),new pl.type.Term("!",[])])]),new pl.type.Term("\x3d",[new pl.type.Var("L"),new pl.type.Var("S")])]),new pl.type.Term("include",[new pl.type.Var("P"),new pl.type.Var("T"),new pl.type.Var("S")])])])])]))],"exclude/3":[new pl.type.Rule(new pl.type.Term("exclude",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Term("[]",[])]),null),new pl.type.Rule(new pl.type.Term("exclude",[new pl.type.Var("P"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),
new pl.type.Var("S")]),new pl.type.Term(",",[new pl.type.Term("exclude",[new pl.type.Var("P"),new pl.type.Var("T"),new pl.type.Var("E")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("P"),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("L"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term("[]",[])]),new pl.type.Var("Q")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("R"),new pl.type.Var("Q")]),new pl.type.Term(";",
[new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("R")]),new pl.type.Term(",",[new pl.type.Term("!",[]),new pl.type.Term("\x3d",[new pl.type.Var("S"),new pl.type.Var("E")])])]),new pl.type.Term("\x3d",[new pl.type.Var("S"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("E")])])])])])])]))],"reduce/4":[new pl.type.Rule(new pl.type.Term("reduce",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Var("I"),new pl.type.Var("I")]),null),new pl.type.Rule(new pl.type.Term("reduce",
[new pl.type.Var("P"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("I"),new pl.type.Var("R")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("P"),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("L"),new pl.type.Term(".",[new pl.type.Var("I"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])])])]),new pl.type.Var("L2")]),new pl.type.Term(",",
[new pl.type.Term("\x3d..",[new pl.type.Var("P2"),new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("P2")]),new pl.type.Term("reduce",[new pl.type.Var("P"),new pl.type.Var("T"),new pl.type.Var("X"),new pl.type.Var("R")])])])])]))],"foldl/4":[new pl.type.Rule(new pl.type.Term("foldl",[new pl.type.Var("_"),new pl.type.Term("[]",[]),new pl.type.Var("I"),new pl.type.Var("I")]),null),new pl.type.Rule(new pl.type.Term("foldl",[new pl.type.Var("P"),new pl.type.Term(".",
[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("I"),new pl.type.Var("R")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("P"),new pl.type.Var("L")]),new pl.type.Term(",",[new pl.type.Term("append",[new pl.type.Var("L"),new pl.type.Term(".",[new pl.type.Var("I"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])])])]),new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("\x3d..",[new pl.type.Var("P2"),
new pl.type.Var("L2")]),new pl.type.Term(",",[new pl.type.Term("call",[new pl.type.Var("P2")]),new pl.type.Term("foldl",[new pl.type.Var("P"),new pl.type.Var("T"),new pl.type.Var("X"),new pl.type.Var("R")])])])])]))],"sum_list/2":[new pl.type.Rule(new pl.type.Term("sum_list",[new pl.type.Term("[]",[]),new pl.type.Num(0,!1)]),null),new pl.type.Rule(new pl.type.Term("sum_list",[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("Xs")]),new pl.type.Var("S")]),new pl.type.Term(",",[new pl.type.Term("sum_list",
[new pl.type.Var("Xs"),new pl.type.Var("Y")]),new pl.type.Term("is",[new pl.type.Var("S"),new pl.type.Term("+",[new pl.type.Var("X"),new pl.type.Var("Y")])])]))],"max_list/2":[new pl.type.Rule(new pl.type.Term("max_list",[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])]),new pl.type.Var("X")]),null),new pl.type.Rule(new pl.type.Term("max_list",[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("Xs")]),new pl.type.Var("S")]),new pl.type.Term(",",[new pl.type.Term("max_list",
[new pl.type.Var("Xs"),new pl.type.Var("Y")]),new pl.type.Term(";",[new pl.type.Term(",",[new pl.type.Term("\x3e\x3d",[new pl.type.Var("X"),new pl.type.Var("Y")]),new pl.type.Term(",",[new pl.type.Term("\x3d",[new pl.type.Var("S"),new pl.type.Var("X")]),new pl.type.Term("!",[])])]),new pl.type.Term("\x3d",[new pl.type.Var("S"),new pl.type.Var("Y")])])]))],"min_list/2":[new pl.type.Rule(new pl.type.Term("min_list",[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])]),new pl.type.Var("X")]),
null),new pl.type.Rule(new pl.type.Term("min_list",[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("Xs")]),new pl.type.Var("S")]),new pl.type.Term(",",[new pl.type.Term("min_list",[new pl.type.Var("Xs"),new pl.type.Var("Y")]),new pl.type.Term(";",[new pl.type.Term(",",[new pl.type.Term("\x3d\x3c",[new pl.type.Var("X"),new pl.type.Var("Y")]),new pl.type.Term(",",[new pl.type.Term("\x3d",[new pl.type.Var("S"),new pl.type.Var("X")]),new pl.type.Term("!",[])])]),new pl.type.Term("\x3d",[new pl.type.Var("S"),
new pl.type.Var("Y")])])]))],"prod_list/2":[new pl.type.Rule(new pl.type.Term("prod_list",[new pl.type.Term("[]",[]),new pl.type.Num(1,!1)]),null),new pl.type.Rule(new pl.type.Term("prod_list",[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("Xs")]),new pl.type.Var("S")]),new pl.type.Term(",",[new pl.type.Term("prod_list",[new pl.type.Var("Xs"),new pl.type.Var("Y")]),new pl.type.Term("is",[new pl.type.Var("S"),new pl.type.Term("*",[new pl.type.Var("X"),new pl.type.Var("Y")])])]))],"last/2":[new pl.type.Rule(new pl.type.Term("last",
[new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Term("[]",[])]),new pl.type.Var("X")]),null),new pl.type.Rule(new pl.type.Term("last",[new pl.type.Term(".",[new pl.type.Var("_"),new pl.type.Var("Xs")]),new pl.type.Var("X")]),new pl.type.Term("last",[new pl.type.Var("Xs"),new pl.type.Var("X")]))],"nth0/3":[new pl.type.Rule(new pl.type.Term("nth0",[new pl.type.Num(0,!1),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("_")]),new pl.type.Var("X")]),null),new pl.type.Rule(new pl.type.Term("nth0",
[new pl.type.Var("N"),new pl.type.Term(".",[new pl.type.Var("_"),new pl.type.Var("Xs")]),new pl.type.Var("X")]),new pl.type.Term(",",[new pl.type.Term("\x3e",[new pl.type.Var("N"),new pl.type.Num(0,!1)]),new pl.type.Term(",",[new pl.type.Term("is",[new pl.type.Var("M"),new pl.type.Term("-",[new pl.type.Var("N"),new pl.type.Num(1,!1)])]),new pl.type.Term("nth0",[new pl.type.Var("M"),new pl.type.Var("Xs"),new pl.type.Var("X")])])]))],"nth1/3":[new pl.type.Rule(new pl.type.Term("nth1",[new pl.type.Num(1,
!1),new pl.type.Term(".",[new pl.type.Var("X"),new pl.type.Var("_")]),new pl.type.Var("X")]),null),new pl.type.Rule(new pl.type.Term("nth1",[new pl.type.Var("N"),new pl.type.Term(".",[new pl.type.Var("_"),new pl.type.Var("Xs")]),new pl.type.Var("X")]),new pl.type.Term(",",[new pl.type.Term("\x3e",[new pl.type.Var("N"),new pl.type.Num(1,!1)]),new pl.type.Term(",",[new pl.type.Term("is",[new pl.type.Var("M"),new pl.type.Term("-",[new pl.type.Var("N"),new pl.type.Num(1,!1)])]),new pl.type.Term("nth1",
[new pl.type.Var("M"),new pl.type.Var("Xs"),new pl.type.Var("X")])])]))],"nth0/4":[new pl.type.Rule(new pl.type.Term("nth0",[new pl.type.Num(0,!1),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("H"),new pl.type.Var("T")]),null),new pl.type.Rule(new pl.type.Term("nth0",[new pl.type.Var("N"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("X"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("Xs")])]),new pl.type.Term(",",
[new pl.type.Term("\x3e",[new pl.type.Var("N"),new pl.type.Num(0,!1)]),new pl.type.Term(",",[new pl.type.Term("is",[new pl.type.Var("M"),new pl.type.Term("-",[new pl.type.Var("N"),new pl.type.Num(1,!1)])]),new pl.type.Term("nth0",[new pl.type.Var("M"),new pl.type.Var("T"),new pl.type.Var("X"),new pl.type.Var("Xs")])])]))],"nth1/4":[new pl.type.Rule(new pl.type.Term("nth1",[new pl.type.Num(1,!1),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("H"),new pl.type.Var("T")]),
null),new pl.type.Rule(new pl.type.Term("nth1",[new pl.type.Var("N"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("T")]),new pl.type.Var("X"),new pl.type.Term(".",[new pl.type.Var("H"),new pl.type.Var("Xs")])]),new pl.type.Term(",",[new pl.type.Term("\x3e",[new pl.type.Var("N"),new pl.type.Num(1,!1)]),new pl.type.Term(",",[new pl.type.Term("is",[new pl.type.Var("M"),new pl.type.Term("-",[new pl.type.Var("N"),new pl.type.Num(1,!1)])]),new pl.type.Term("nth1",[new pl.type.Var("M"),new pl.type.Var("T"),
new pl.type.Var("X"),new pl.type.Var("Xs")])])]))],"replicate/3":function(h,q,g){var l=g.args[0],m=g.args[1],u=g.args[2];if(pl.type.is_variable(m))h.throwError(pl.error.instantiation(g.indicator));else if(pl.type.is_integer(m))if(0>m.value)h.throwError(pl.error.domain("not_less_than_zero",m,g.indicator));else if(pl.type.is_variable(u)||pl.type.is_list(u)){g=new pl.type.Term("[]");for(var v=0;v<m.value;v++)g=new pl.type.Term(".",[l,g]);h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",
[g,u])),q.substitution,q.parent)])}else h.throwError(pl.error.type("list",u,g.indicator));else h.throwError(pl.error.type("integer",m,g.indicator))},"sort/2":function(h,q,g){var l=g.args[0],m=g.args[1];if(pl.type.is_variable(l))h.throwError(pl.error.instantiation(g.indicator));else{for(var u=[],v=l;"./2"===v.indicator;)u.push(v.args[0]),v=v.args[1];if(pl.type.is_variable(v))h.throwError(pl.error.instantiation(g.indicator));else if(pl.type.is_empty_list(v)){g=u.sort(pl.compare);l=new pl.type.Term("[]");
for(u=g.length-1;0<=u;u--)l=new pl.type.Term(".",[g[u],l]);h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[l,m])),q.substitution,q.parent)])}else h.throwError(pl.error.type("list",l,g.indicator))}},"take/3":function(h,q,g){var l=g.args[0],m=g.args[1],u=g.args[2];if(pl.type.is_variable(m)||pl.type.is_variable(l))h.throwError(pl.error.instantiation(g.indicator));else if(pl.type.is_list(m))if(pl.type.is_integer(l))if(pl.type.is_variable(u)||pl.type.is_list(u)){g=l.value;for(l=[];0<
g&&"./2"===m.indicator;)l.push(m.args[0]),m=m.args[1],g--;if(0===g){m=new pl.type.Term("[]");for(g=l.length-1;0<=g;g--)m=new pl.type.Term(".",[l[g],m]);h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[m,u])),q.substitution,q.parent)])}}else h.throwError(pl.error.type("list",u,g.indicator));else h.throwError(pl.error.type("integer",l,g.indicator));else h.throwError(pl.error.type("list",m,g.indicator))},"drop/3":function(h,q,g){var l=g.args[0],m=g.args[1],u=g.args[2];if(pl.type.is_variable(m)||
pl.type.is_variable(l))h.throwError(pl.error.instantiation(g.indicator));else if(pl.type.is_list(m))if(pl.type.is_integer(l))if(pl.type.is_variable(u)||pl.type.is_list(u)){g=l.value;for(l=[];0<g&&"./2"===m.indicator;)l.push(m.args[0]),m=m.args[1],g--;0===g&&h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[m,u])),q.substitution,q.parent)])}else h.throwError(pl.error.type("list",u,g.indicator));else h.throwError(pl.error.type("integer",l,g.indicator));else h.throwError(pl.error.type("list",
m,g.indicator))},"reverse/2":function(h,q,g){var l=g.args[0],m=g.args[1],u=pl.type.is_instantiated_list(l),v=pl.type.is_instantiated_list(m);if(pl.type.is_variable(l)&&pl.type.is_variable(m))h.throwError(pl.error.instantiation(g.indicator));else if(pl.type.is_variable(l)||pl.type.is_fully_list(l))if(pl.type.is_variable(m)||pl.type.is_fully_list(m))if(u||v){g=u?l:m;for(v=new pl.type.Term("[]",[]);"./2"===g.indicator;)v=new pl.type.Term(".",[g.args[0],v]),g=g.args[1];h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",
[v,u?m:l])),q.substitution,q.parent)])}else h.throwError(pl.error.instantiation(g.indicator));else h.throwError(pl.error.type("list",m,g.indicator));else h.throwError(pl.error.type("list",l,g.indicator))}});
new pl.type.Module("random",{"maybe/0":function(h,q,g){.5>Math.random()&&h.success(q)},"maybe/1":function(h,q,g){Math.random()<g.args[0].value&&h.success(q)},"random/1":function(h,q,g){var l=g.args[0];pl.type.is_variable(l)||pl.type.is_number(l)?h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[l,new pl.type.Num(Math.random(),!0)])),q.substitution,q)]):h.throwError(pl.error.type("number",l,g.indicator))},"random/3":function(h,q,g){var l=g.args[0],m=g.args[1],u=g.args[2];pl.type.is_variable(l)||
pl.type.is_variable(m)?h.throwError(pl.error.instantiation(g.indicator)):pl.type.is_number(l)?pl.type.is_number(m)?pl.type.is_variable(u)||pl.type.is_number(u)?l.value<m.value&&(g=l.is_float||m.is_float,l=l.value+Math.random()*(m.value-l.value),g||(l=Math.floor(l)),h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[u,new pl.type.Num(l,g)])),q.substitution,q)])):h.throwError(pl.error.type("number",u,g.indicator)):h.throwError(pl.error.type("number",m,g.indicator)):h.throwError(pl.error.type("number",
l,g.indicator))},"random_between/3":function(h,q,g){var l=g.args[0],m=g.args[1],u=g.args[2];pl.type.is_variable(l)||pl.type.is_variable(m)?h.throwError(pl.error.instantiation(g.indicator)):pl.type.is_integer(l)?pl.type.is_integer(m)?pl.type.is_variable(u)||pl.type.is_integer(u)?l.value<m.value&&h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[u,new pl.type.Num(Math.floor(l.value+Math.random()*(m.value-l.value+1)),!1)])),q.substitution,q)]):h.throwError(pl.error.type("integer",
u,g.indicator)):h.throwError(pl.error.type("integer",m,g.indicator)):h.throwError(pl.error.type("integer",l,g.indicator))},"random_member/2":function(h,q,g){var l=g.args[0],m=g.args[1];if(pl.type.is_variable(m))h.throwError(pl.error.instantiation(g.indicator));else{for(g=[];"./2"==m.indicator;)g.push(m.args[0]),m=m.args[1];0<g.length&&h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[l,g[Math.floor(Math.random()*g.length)]])),q.substitution,q)])}},"random_permutation/2":function(h,
q,g){var l=g.args[0],m=g.args[1],u=pl.type.is_instantiated_list(l);var v=pl.type.is_instantiated_list(m);if(pl.type.is_variable(l)&&pl.type.is_variable(m)||!u&&!v)h.throwError(pl.error.instantiation(g.indicator));else if(pl.type.is_variable(l)||pl.type.is_fully_list(l))if(pl.type.is_variable(m)||pl.type.is_fully_list(m)){v=u?l:m;for(g=[];"./2"===v.indicator;)g.push(v.args[0]),v=v.args[1];for(v=0;v<g.length;v++){var B=Math.floor(Math.random()*g.length),y=g[v];g[v]=g[B];g[B]=y}B=new pl.type.Term("[]",
[]);for(v=g.length-1;0<=v;v--)B=new pl.type.Term(".",[g[v],B]);h.prepend([new pl.type.State(q.goal.replace(new pl.type.Term("\x3d",[B,u?m:l])),q.substitution,q)])}else h.throwError(pl.error.type("list",m,g.indicator));else h.throwError(pl.error.type("list",l,g.indicator))}});
